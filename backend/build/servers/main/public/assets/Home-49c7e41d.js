import{r as A,u as Jt,s as en,c as et,g as De,a as Rt,b as Lt,d as tn,j as c,h as Te,e as $e,f as tt,n as st,i as g,G as je,S as ge,_ as Dt,$ as I,C as ot,k as nn,F as Ae,l as rn,m as an,o as sn,p as on,q as cn,t as ln}from"./index-048dc155.js";import{c as he}from"./index-f22de667.js";import{L as xe}from"./List-cef654e2.js";import{B as $}from"./Button-e21ce1d6.js";import{c as le}from"./calorieUtilService-95d7373f.js";import{E as Tt}from"./ErrorMsg-320350ba.js";import{f as M,_ as $t,a as jt,b as un,c as dn,d as re,T as nt,p as X,L as K,e as rt,g as Mt,D as fn,h as hn,i as pn,j as mn,G as vn,u as gn,C as yn,S as ct,k as fe,l as oe,A as bn,m as kn,n as lt,o as wn,q as ue,r as _n,s as An,t as Ft,v as Cn,w as Pe,x as ut,y as Oe,z as Pn,B as In,E as On}from"./generateCategoricalChart-7dc73a94.js";import{u as Bt,C as ke}from"./index.esm-0f7a81a7.js";import{W as Sn}from"./WorkoutPreview-64fa1c28.js";function xn(e){A.useEffect(()=>{const t=document.title;return document.title=e||"Kceli",()=>{document.title=t}},[e])}function Nn({title:e}){const t=Jt();xn(e),A.useEffect(()=>{t(en(!1))},[t])}var Me=(e=>(e.UNIT="unit",e.GRAM="g",e.CUP="cup",e.TABLE_SPOON="tbsp",e.TEA_SPOON="tsp",e.MILLILITER="ml",e))(Me||{});const En=Object.values(Me);function Rn(){return{id:et(),items:[Ut()],isRecorded:!0,recordedAt:null}}function Ut(){return{id:et(),unit:Me.UNIT,quantity:1,name:""}}function Ln(e){switch(e){case"g":return 100;case"ml":return 100;case"unit":return 1;case"cup":return 1;case"tbsp":return 1;case"tsp":return 1;default:return 1}}function Dn(e){switch(e){case"g":return 25;case"ml":return 25;case"unit":return 1;case"cup":return 1;case"tbsp":return 1;case"tsp":return 1;default:return 1}}const Q={getDefaultIntake:Rn,getDefaultIntakeItem:Ut,getUnitDefaultQuantity:Ln,getQuantityStepPerUnit:Dn,units:En};/*!
 * Determine if an object is a Buffer
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */var Tn=function(t){return t!=null&&t.constructor!=null&&typeof t.constructor.isBuffer=="function"&&t.constructor.isBuffer(t)},qt=jn,$n=[];function jn(e,t){var n=0,r;if(!t)return $n;if(e.FLAG==="long"){for(r=new Array(Math.ceil(t.length/2));n<t.length;)r[n/2]=t.slice(n,n+2),n+=2;return r}return t.split(e.FLAG==="num"?",":"")}var Mn=qt,Fn=qn,Bn=[].push,Ie="etaoinshrdlcumwfgypbvkjxqz".split(""),be=/\s+/,Un=["qwertzuop","yxcvbnm","qaw","say","wse","dsx","sy","edr","fdc","dx","rft","gfv","fc","tgz","hgb","gv","zhu","jhn","hb","uji","kjm","jn","iko","lkm"];function qn(e){var t=Object.create(null),n=Object.create(null),r=Object.create(null),a=[],i={in:[],out:[]},s=[],o=e.toString("utf8"),u=[],d=0,l=o.indexOf(`
`),h,p,f,m,y,v,b,_,O,C,R,k,E;for(r.KEY=[];l>-1;)P(o.slice(d,l)),d=l+1,l=o.indexOf(`
`,d);for(P(o.slice(d)),l=-1;++l<u.length;)if(p=u[l],h=p.split(be),f=h[0],f==="REP"){for(m=l+parseInt(h[1],10);++l<=m;)h=u[l].split(be),a.push([h[1],h[2]]);l--}else if(f==="ICONV"||f==="OCONV"){for(m=l+parseInt(h[1],10),_=i[f==="ICONV"?"in":"out"];++l<=m;)h=u[l].split(be),_.push([new RegExp(h[1],"g"),h[2]]);l--}else if(f==="COMPOUNDRULE"){for(m=l+parseInt(h[1],10);++l<=m;)for(C=u[l].split(be)[1],O=-1,s.push(C);++O<C.length;)n[C.charAt(O)]=[];l--}else if(f==="PFX"||f==="SFX"){for(m=l+parseInt(h[3],10),C={type:f,combineable:h[2]==="Y",entries:[]},t[h[1]]=C;++l<=m;){h=u[l].split(be),y=h[2],v=h[3].split("/"),b=h[4],_={add:"",remove:"",match:"",continuation:Mn(r,v[1])},v&&v[0]!=="0"&&(_.add=v[0]);try{y!=="0"&&(_.remove=f==="SFX"?dt(y):y),b&&b!=="."&&(_.match=f==="SFX"?dt(b):Wn(b))}catch{_=null}_&&C.entries.push(_)}l--}else if(f==="TRY"){for(b=h[1],k=-1,R=[];++k<b.length;)E=b.charAt(k),E.toLowerCase()===E&&R.push(E);for(k=-1;++k<Ie.length;)b.indexOf(Ie[k])<0&&R.push(Ie[k]);r[f]=R}else f==="KEY"?Bn.apply(r[f],h[1].split("|")):f==="COMPOUNDMIN"?r[f]=Number(h[1]):f==="ONLYINCOMPOUND"?(r[f]=h[1],n[h[1]]=[]):r[f]=h[1];return isNaN(r.COMPOUNDMIN)&&(r.COMPOUNDMIN=3),r.KEY.length||(r.KEY=Un),r.TRY||(r.TRY=Ie.concat()),r.KEEPCASE||(r.KEEPCASE=!1),{compoundRuleCodes:n,replacementTable:a,conversion:i,compoundRules:s,rules:t,flags:r};function P(x){x=x.trim(),x&&x.charCodeAt(0)!==35&&u.push(x)}}function dt(e){return new RegExp(e+"$")}function Wn(e){return new RegExp("^"+e)}var Wt=Vn;function Vn(e,t){for(var n=-1;++n<t.length;)e=e.replace(t[n][0],t[n][1]);return e}var Fe=Qn;function Qn(e,t,n){return n&&t in e&&n.indexOf(e[t])>-1}var Kn=Fe,Gn=Hn;function Hn(e,t){var n=-1;if(e.data[t])return!Kn(e.flags,"ONLYINCOMPOUND",e.data[t]);if(t.length>=e.flags.COMPOUNDMIN){for(;++n<e.compoundRules.length;)if(e.compoundRules[n].test(t))return!0}return!1}var zn=Wt,Ve=Gn,He=Fe,at=Zn;function Zn(e,t,n){var r=t.trim(),a;if(!r)return null;if(r=zn(r,e.conversion.in),Ve(e,r))return!n&&He(e.flags,"FORBIDDENWORD",e.data[r])?null:r;if(r.toUpperCase()===r){if(a=r.charAt(0)+r.slice(1).toLowerCase(),ft(e.flags,e.data[a],n))return null;if(Ve(e,a))return a}if(a=r.toLowerCase(),a!==r){if(ft(e.flags,e.data[a],n))return null;if(Ve(e,a))return a}return null}function ft(e,t,n){return He(e,"KEEPCASE",t)||n||He(e,"FORBIDDENWORD",t)}var Yn=at,Xn=Jn;function Jn(e){return!!Yn(this,e)}var er=tr;function tr(e){var t=ht(e.charAt(0)),n=e.slice(1);return!n||(n=ht(n),t===n)?t:t==="u"&&n==="l"?"s":null}function ht(e){return e===e.toLowerCase()?"l":e===e.toUpperCase()?"u":null}var Se=er,pt=Wt,nr=Fe,rr=at,ar=sr,ir=[].push;function sr(e){var t=this,n={},r=[],a={},i,s,o=[],u,d,l,h,p,f,m,y,v,b,_,O,C,R,k,E,P,x,L,F,W,B,U;if(e=pt(e.trim(),t.conversion.in),!e||t.correct(e))return[];for(U=Se(e),d=-1;++d<t.replacementTable.length;)for(s=t.replacementTable[d],l=e.indexOf(s[0]);l>-1;)o.push(e.replace(s[0],s[1])),l=e.indexOf(s[0],l+1);for(d=-1;++d<e.length;)for(y=e.charAt(d),b=e.slice(0,d),_=e.slice(d+1),C=y.toLowerCase(),O=C!==y,n={},l=-1;++l<t.flags.KEY.length;)if(v=t.flags.KEY[l],h=v.indexOf(C),!(h<0)){for(f=-1;++f<v.length;)if(f!==h){if(m=v.charAt(f),n[m])continue;n[m]=!0,O&&(m=m.toUpperCase()),o.push(b+m+_)}}for(d=-1,P=e.charAt(0),u=[""],x=1,L=0;++d<e.length;){for(y=P,P=e.charAt(d+1),b=e.slice(0,d),s=y===P?"":y+y,l=-1,p=u.length;++l<p;)l<=x&&u.push(u[l]+s),u[l]+=y;++L<3&&(x=u.length)}for(ir.apply(o,u),u=[e],s=e.toLowerCase(),(e===s||U===null)&&u.push(e.charAt(0).toUpperCase()+s.slice(1)),s=e.toUpperCase(),e!==s&&u.push(s),i={state:{},weighted:a,suggestions:r},R=mt(t,i,u,o),k=0,x=Math.min(R.length,Math.pow(Math.max(15-e.length,3),3)),F=Math.max(Math.pow(10-e.length,3),1);!r.length&&k<x;)E=k+F,mt(t,i,R.slice(k,E)),k=E;for(r.sort(H),u=[],W=[],d=-1;++d<r.length;)B=pt(r[d],t.conversion.out),s=B.toLowerCase(),W.indexOf(s)<0&&(u.push(B),W.push(s));return u;function H(N,T){return se(N,T)||w(N,T)||S(N,T)}function se(N,T){return a[N]===a[T]?0:a[N]>a[T]?-1:1}function w(N,T){var z=Se(N),ee=Se(T);return z===ee?0:z===U?-1:ee===U?1:void 0}function S(N,T){return N.localeCompare(T)}}function mt(e,t,n,r){var a=e.flags.TRY,i=e.data,s=e.flags,o=[],u=-1,d,l,h,p,f,m,y,v,b,_,O,C,R;if(r)for(;++u<r.length;)k(r[u],!0);for(u=-1;++u<n.length;)for(d=n[u],l="",h="",p=d.charAt(0),f=d,m=d.slice(1),y=p.toLowerCase()!==p,v=Se(d),b=-1;++b<=d.length;)for(l+=h,_=f,f=m,m=f.slice(1),h=p,p=d.charAt(b+1),O=y,p&&(y=p.toLowerCase()!==p),f&&O!==y&&(k(l+E(f)),k(l+E(p)+E(h)+m)),k(l+f),f&&k(l+p+h+m),R=-1;++R<a.length;)C=a[R],O&&C!==C.toUpperCase()?(v!=="s"&&(k(l+C+_),k(l+C+f)),C=C.toUpperCase(),k(l+C+_),k(l+C+f)):(k(l+C+_),k(l+C+f));return o;function k(P,x){var L=t.state[P],F;L!==!!L&&(o.push(P),F=rr(e,P),L=F&&!nr(s,"NOSUGGEST",i[F]),t.state[P]=L,L&&(t.weighted[P]=x?10:0,t.suggestions.push(P))),L&&t.weighted[P]++}function E(P){var x=P.charAt(0);return(x.toLowerCase()===x?x.toUpperCase():x.toLowerCase())+P.slice(1)}}var or=at,vt=Fe,cr=lr;function lr(e){var t=this,n=or(t,e,!0);return{correct:t.correct(e),forbidden:!!(n&&vt(t.flags,"FORBIDDENWORD",t.data[n])),warn:!!(n&&vt(t.flags,"WARN",t.data[n]))}}var ur=Vt;function Vt(e,t,n,r){for(var a=-1,i,s,o,u,d;++a<t.entries.length;)if(i=t.entries[a],u=i.continuation,d=-1,(!i.match||i.match.test(e))&&(s=i.remove?e.replace(i.remove,""):e,s=t.type==="SFX"?s+i.add:i.add+s,r.push(s),u&&u.length))for(;++d<u.length;)o=n[u[d]],o&&Vt(s,o,n,r);return r}var gt=ur,Qt=hr,dr=[].push,ze=[];function fr(e,t,n){var r=e[t];t in e?r===ze?e[t]=n.concat():dr.apply(r,n):e[t]=n.concat()}function hr(e,t,n,r){var a=-1,i,s,o,u,d,l,h;for((!("NEEDAFFIX"in r.flags)||n.indexOf(r.flags.NEEDAFFIX)<0)&&fr(e,t,n);++a<n.length;)if(i=r.rules[n[a]],n[a]in r.compoundRuleCodes&&r.compoundRuleCodes[n[a]].push(t),i){for(l=gt(t,i,r.rules,[]),s=-1;++s<l.length;)if(l[s]in e||(e[l[s]]=ze),i.combineable){for(o=a;++o<n.length;)if(d=r.rules[n[o]],d&&d.combineable&&i.type!==d.type)for(h=gt(l[s],d,r.rules,[]),u=-1;++u<h.length;)h[u]in e||(e[h[u]]=ze)}}}var pr=Qt,mr=gr,vr=[];function gr(e,t){var n=this;return pr(n.data,e,n.data[t]||vr,n),n}var yr=br;function br(e){var t=this;return delete t.data[e],t}var kr=wr;function wr(){return this.flags.WORDCHARS||null}var _r=qt,Ar=Qt,Cr=Pr,yt=/\s/g;function Pr(e,t,n){for(var r=e.toString("utf8"),a=r.indexOf(`
`)+1,i=r.indexOf(`
`,a);i>-1;)r.charCodeAt(a)!==9&&bt(r.slice(a,i),t,n),a=i+1,i=r.indexOf(`
`,a);bt(r.slice(a),t,n)}function bt(e,t,n){for(var r=e.indexOf("/"),a=e.indexOf("#"),i="",s,o;r>-1&&e.charCodeAt(r-1)===92;)e=e.slice(0,r-1)+e.slice(r),r=e.indexOf("/",r);a>-1?r>-1&&r<a?(s=e.slice(0,r),yt.lastIndex=r+1,o=yt.exec(e),i=e.slice(r+1,o?o.index:void 0)):s=e.slice(0,a):r>-1?(s=e.slice(0,r),i=e.slice(r+1)):s=e,s=s.trim(),s&&Ar(n,s,_r(t.flags,i.trim()),t)}var Ir=Cr,Or=Sr;function Sr(e){var t=this,n=-1,r,a,i,s;for(Ir(e,t,t.data);++n<t.compoundRules.length;){for(r=t.compoundRules[n],a="",s=-1;++s<r.length;)i=r.charAt(s),a+=t.compoundRuleCodes[i].length?"(?:"+t.compoundRuleCodes[i].join("|")+")":i;t.compoundRules[n]=new RegExp(a,"i")}return t}var xr=Nr;function Nr(e){var t=this,n=e.toString("utf8").split(`
`),r=-1,a,i,s,o;for(t.flags.FORBIDDENWORD===void 0&&(t.flags.FORBIDDENWORD=!1),o=t.flags.FORBIDDENWORD;++r<n.length;)a=n[r].trim(),a&&(a=a.split("/"),s=a[0],i=s.charAt(0)==="*",i&&(s=s.slice(1)),t.add(s,a[1]),i&&t.data[s].push(o));return t}var kt=Tn,Er=Fn,Rr=Ne,J=Ne.prototype;J.correct=Xn;J.suggest=ar;J.spell=cr;J.add=mr;J.remove=yr;J.wordCharacters=kr;J.dictionary=Or;J.personal=xr;function Ne(e,t){var n=-1,r;if(!(this instanceof Ne))return new Ne(e,t);if(typeof e=="string"||kt(e)?(typeof t=="string"||kt(t))&&(r=[{dic:t}]):e&&("length"in e?(r=e,e=e[0]&&e[0].aff):(e.dic&&(r=[e]),e=e.aff)),!e)throw new Error("Missing `aff` in dictionary");if(e=Er(e),this.data=Object.create(null),this.compoundRuleCodes=e.compoundRuleCodes,this.replacementTable=e.replacementTable,this.conversion=e.conversion,this.compoundRules=e.compoundRules,this.rules=e.rules,this.flags=e.flags,r)for(;++n<r.length;)r[n].dic&&this.dictionary(r[n].dic)}const Lr=De(Rr);function Dr(e,t){if(!e||!t)return 0;const n=t.weight||e.weight,r=Number((n*33).toFixed(2)),a=t.intakes.filter(i=>i.isRecorded).reduce((i,s)=>s.items.reduce((o,u)=>{if(u.name.toLocaleLowerCase()==="water")switch(u.unit){case"ml":return o+u.quantity;case"cup":return o+u.quantity*250;default:return o}return o},i),0)||0;return Number(((r-a)/1e3).toFixed(2))}const Tr={calcRecommendedWaterIntake:Dr};function $r(e){return{type:e,response:null,status:"idle",error:null}}const Qe={getDefaultNutritionQuery:$r};var j=(e=>(e.IntakeEdit="IntakeEdit",e.IntakeList="IntakeList",e.UnRecordedIntakeList="UnRecordedIntakeList",e.Water="Water",e.WeightWaistInput="WeightWaistInput",e.Workouts="Workouts",e.Query="Query",e))(j||{});const Kt=A.createContext(void 0);function jr({children:e}){const{loggedInUser:t}=Rt(),{dailyData:n,isLoading:r,isSuccess:a,isError:i}=Lt(),{updateDailyData:s,isLoading:o}=tn(),[u,d]=A.useState("IntakeEdit"),[l,h]=A.useState(Q.getDefaultIntake()),[p,f]=A.useState(l.items[0].id),[m,y]=A.useState(Qe.getDefaultNutritionQuery("chatGPT")),[v,b]=A.useState(Qe.getDefaultNutritionQuery("ninjaAPI")),[_,O]=A.useState(Qe.getDefaultNutritionQuery("usdaAPI")),C=(n==null?void 0:n.intakes.filter(H=>H.isRecorded))||[],R=(n==null?void 0:n.intakes.filter(H=>!H.isRecorded))||[],k=le.getTotalCalories(n),E=le.calcRemainingCalories(t,n),P=(n==null?void 0:n.targetCaloricIntake)??(t==null?void 0:t.targetCaloricIntakePerDay)??0,x=le.calcEstimatedBodyFatStatusPerDay(t,n),L=Math.round(k/P*100),F=Math.round(E/P*100),W=Tr.calcRecommendedWaterIntake(t,n),B=le.getBcgByCosumedCalories({consumedCalories:k,targetCalorie:P});A.useEffect(()=>{!a||!n||n!=null&&n.weight||d("WeightWaistInput")},[n,a]);const U={dailyData:n,isLoading:r,isSuccess:a,isError:i,updateDailyData:s,isLoadingUpdate:o,recordedIntakes:C,unrecordedIntakes:R,remainingCalories:E,consumedCalories:k,targetCaloricIntakePerDay:P,estimatedKGChange:x,backgroundColor:B,openedElement:u,setOpenedElement:d,recommendedWaterIntake:W,intake:l,setIntake:h,calConsumedPct:L,calRemainingPct:F,chatGPTQuery:m,setChatGPTQuery:y,ninjaAPIQuery:v,setNinjaAPIQuery:b,USDAAPIQuery:_,setUSDAAPIQuery:O,currIntakeItemId:p,setCurrIntakeItemId:f};return c(Kt.Provider,{value:U,children:e})}function Z(){const e=A.useContext(Kt);if(e===void 0)throw new Error("useDayEdit must be used within a DayEditProvider");return e}const Mr="calorie";async function Fr(e){const t=await Te.post(`${Mr}/item`,e);return $e(t)}const Br={getCaloriesForItem:Fr},Gt=A.createContext(void 0);function Ur({intakeItem:e,children:t}){const{intake:n,setIntake:r,currIntakeItemId:a,setCurrIntakeItemId:i}=Z(),s=n.items.length===1,o=e.id===a,[u,d]=A.useState(!1),[l,h]=A.useState(""),[p,f]=A.useState(!1),[m,y]=A.useState([]),[v,b]=A.useState(null),_=A.useRef(null),O=m.length>0&&m[0].suggestions.length>0&&!!e.name.length&&!!v;function C(w){w!==a&&i(w)}function R(w){w.preventDefault();const{value:S,name:N}=w.target;switch(N){case"name":if(k({...e,name:S}),S.length||y([]),!_.current)return;_.current(S);break;case"quantity":k({...e,quantity:Number(S)});break;case"calories":{const T={...e,calories:Number(S)};delete T.caloriesPer100g,k(T),h("caloriesPer100g");break}case"caloriesPer100g":{const z=Number(S)*(e.quantity/100);k({...e,caloriesPer100g:Number(S),calories:z}),h("calories");break}}}function k(w){r(S=>({...S,items:S.items.map(N=>N.id===w.id?w:N)}))}function E(){const w=Q.getQuantityStepPerUnit(e.unit);e.quantity-w<1||k({...e,quantity:e.quantity-w})}function P(){const w=Q.getQuantityStepPerUnit(e.unit);k({...e,quantity:e.quantity+w})}function x(){const w=Q.units.indexOf(e.unit),S=w===Q.units.length-1?Q.units[0]:Q.units[w+1],N=Q.getUnitDefaultQuantity(S);k({...e,unit:S,quantity:N})}function L(){const w={...e};u&&(delete w.calories,delete w.caloriesPer100g,h("")),d(S=>!S),k(w)}async function F(){if(!e.name.length)return st.error("Please enter a food name!");try{f(!0);const w=await Br.getCaloriesForItem(e);k({...e,calories:w}),d(!0)}catch(w){console.error(w),st.error("Failed to calculate calories!")}finally{f(!1)}}function W(w,S){const N=e.name.replace(w,S),T=m.filter(z=>z.original!==w);y(T),k({...e,name:N})}function B(w){const S=m.filter(N=>N.original!==w);y(S)}function U(){const w=Q.getDefaultIntakeItem();r(S=>({...S,items:[...S.items,w]})),i(w.id)}function H(){var z,ee;if(n.items.length===1)return;const w=n.items.findIndex(Y=>Y.id===e.id),S=(z=n.items[w-1])==null?void 0:z.id,N=(ee=n.items[w+1])==null?void 0:ee.id,T=[...n.items];T.splice(w,1),r(Y=>({...Y,items:T})),i(N||S)}A.useEffect(()=>{Promise.all([fetch("/assets/dictionaries/en_US.aff").then(w=>w.text()),fetch("/assets/dictionaries/en_US.dic").then(w=>w.text())]).then(([w,S])=>{const N=new Lr(w,S);b(N)}).catch(w=>{console.error("Failed to load dictionaries:",w)})},[]),A.useEffect(()=>{function w(S){if(!v)return;const N=new Set(["nes","ness"]),ee=S.split(" ").filter(Y=>!N.has(Y)&&Y.length>3).map(Y=>({original:Y,suggestions:v.suggest(Y)}));y(ee)}_.current=tt(w,1e3).debouncedFunc},[v]);const se={intakeItem:e,isOneItem:s,isCurrIntakeItem:o,isManual:u,inputFaded:l,setInputFaded:h,isLoadingCal:p,suggestions:m,setSuggestions:y,isSuggestionListShown:O,handleNameInputClick:C,handleInputChange:R,decreaseQuantity:E,increaseQuantity:P,handleUnitBtnClick:x,handleToggleManual:L,handleCalcBtnClick:F,handleSuggestionClick:W,handleIgnoreSuggestionClick:B,handleAddButtonClick:U,handleRemoveButtonClick:H};return c(Gt.Provider,{value:se,children:t})}function ye(){const e=A.useContext(Gt);if(!e)throw new Error("useIntakeItemEdit must be used within an IntakeItemEditProvider");return e}const qr=()=>{const{suggestions:e,handleSuggestionClick:t,handleIgnoreSuggestionClick:n}=ye();return c("ul",{className:"spelling-suggestion-list",children:e.map((r,a)=>g("li",{className:"spelling-suggestion-list__item",children:[r.suggestions.map(i=>c($,{className:"intake-item-edit__btn spelling-suggestion-list__btn",onClickFn:()=>t(r.original,i),dataTestId:"spelling-suggestion-list-btn",children:c("span",{children:i})},i)),c($,{className:"intake-item-edit__btn spelling-suggestion-list__btn",dataTestId:"ignore-suggestion-btn",onClickFn:()=>n(r.original),children:c("span",{children:"ignore"})})]},a))})};const Wr=()=>{const{intakeItem:e,inputFaded:t,setInputFaded:n,handleInputChange:r}=ye();function a(i){t===i&&n("")}return g("div",{className:"intake-item-edit__manuall-calorie-edit",children:[c("input",{type:"number",name:"calories",className:he("intake-item-input",{faded:t==="calories"}),value:e.calories||"",placeholder:"Calories",onChange:r,onClick:()=>a("calories")}),c("input",{type:"number",name:"caloriesPer100g",className:he("intake-item-input",{faded:t==="caloriesPer100g"}),value:e.caloriesPer100g||"",placeholder:"Calories per 100g",onChange:r,onClick:()=>a("caloriesPer100g")})]})};function Vr(e){return je({tag:"svg",attr:{viewBox:"0 0 1024 1024"},child:[{tag:"path",attr:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm192 472c0 4.4-3.6 8-8 8H328c-4.4 0-8-3.6-8-8v-48c0-4.4 3.6-8 8-8h368c4.4 0 8 3.6 8 8v48z"}}]})(e)}function Qr(e){return je({tag:"svg",attr:{viewBox:"0 0 1024 1024"},child:[{tag:"path",attr:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm192 472c0 4.4-3.6 8-8 8H544v152c0 4.4-3.6 8-8 8h-48c-4.4 0-8-3.6-8-8V544H328c-4.4 0-8-3.6-8-8v-48c0-4.4 3.6-8 8-8h152V328c0-4.4 3.6-8 8-8h48c4.4 0 8 3.6 8 8v152h152c4.4 0 8 3.6 8 8v48z"}}]})(e)}const Kr=()=>{const{intakeItem:e,isManual:t,isLoadingCal:n,handleInputChange:r,decreaseQuantity:a,increaseQuantity:i,handleUnitBtnClick:s,handleToggleManual:o,handleCalcBtnClick:u}=ye();return g("section",{className:"intake-item-edit__inputs-btns",children:[g("div",{className:"quantity-input-container",children:[c($,{onClickFn:a,children:c(Vr,{})}),c("input",{type:"number",name:"quantity",className:"intake-item-input quantity-input",value:e.quantity,onChange:r}),c($,{onClickFn:i,children:c(Qr,{})})]}),c($,{onClickFn:s,className:"intake-item-edit__btn",children:c("span",{children:e.unit})}),c($,{onClickFn:o,className:"intake-item-edit__btn",children:c("span",{children:t?"Manual":"Auto"})}),c($,{onClickFn:u,className:"intake-item-edit__btn calc-calories-btn",children:n?c(ge,{withContainer:!0,containerSize:{width:"100%"}}):c("span",{children:"calc"})})]})},Gr=()=>{const{isOneItem:e,handleAddButtonClick:t,handleRemoveButtonClick:n}=ye();return g("section",{className:"intake-edit-item__btns-container",children:[!e&&c($,{onClickFn:n,children:"remove item"}),c($,{onClickFn:t,children:"add item"})]})},Hr=()=>{const{intakeItem:e,handleNameInputClick:t,handleInputChange:n}=ye();return c("input",{type:"text",name:"name",className:"intake-item-input",value:e.name,onChange:n,spellCheck:!0,autoComplete:"off",placeholder:"Enter food name",onClick:()=>t(e.id)})},zr=()=>{const{isCurrIntakeItem:e,isManual:t,isSuggestionListShown:n}=ye();return g("section",{className:"intake-item-edit",children:[c(Hr,{}),n&&c(qr,{}),c(Kr,{}),t&&c(Wr,{}),e&&c(Gr,{})]})};const Zr=()=>{const{dailyData:e,isLoading:t,isLoadingUpdate:n,intake:r,updateDailyData:a,setIntake:i,backgroundColor:s}=Z(),[o,u]=A.useState(!1),d=!o&&!t&&!n;function l(){i(f=>({...f,recordedAt:null,isRecorded:!1}))}function h(){u(f=>!f)}function p(f){if(f.preventDefault(),!e)return;if(!r.items.every(b=>b.name.length&&b.quantity>0))return Dt.error("Please fill all intake items");r.recordedAt=new Date;const v=!e.intakes.some(b=>b.id===r.id)?[...e.intakes,r]:e.intakes.map(b=>b.id===r.id?r:b);a({...e,intakes:v}),i(Q.getDefaultIntake())}return g("form",{className:"intake-edit",onSubmit:p,"data-testid":"intake-edit",children:[(t||n)&&c(ge,{withContainer:!0,containerSize:{height:"75px",width:"100%"}}),d&&c(xe,{items:r.items,render:f=>c(Ur,{intakeItem:f,children:c(zr,{})},f.id),className:"intake-edit-item-list",dataTestId:"intake-edit-item-list"}),o&&c(xe,{items:r.items,render:(f,m)=>g("div",{className:"intake-edit-review-list__item",children:[c("span",{children:`${m+1})`}),c("p",{children:`${f.name} - ${f.quantity} ${f.unit} ${f.calories?`- Calories ${f.calories}`:""}`})]},f.id),className:"intake-edit-review-list",dataTestId:"intake-edit-review-list"}),g("div",{className:"intake-edit-btns-container",style:{backgroundColor:s},children:[c($,{onClickFn:l,className:"intake-edit-btn btn-toggle-save-later"+he({clicked:!r.isRecorded}),children:"Save Later"}),c($,{onClickFn:h,className:"intake-edit-btn",children:o?"Edit":"Review"}),c($,{onClickFn:f=>p(f),className:"intake-edit-btn",type:"submit",children:"Save Intake"})]})]})};const Yr=()=>{const{dailyData:e,setOpenedElement:t}=Z();if(!e)return null;const n=[{name:"add",value:j.IntakeEdit},{name:"intakes",value:j.IntakeList,isShown:e==null?void 0:e.intakes.some(r=>r.isRecorded===!0)},{name:"unrecorded",value:j.UnRecordedIntakeList,isShown:e==null?void 0:e.intakes.some(r=>r.isRecorded===!1)},{name:"water",value:j.Water},{name:"weight",value:j.WeightWaistInput},{name:"workouts",value:j.Workouts,isShown:(e==null?void 0:e.workouts.length)>0},{name:"query",value:j.Query}];return c("ul",{className:"day-edit__filter","data-testid":"day-edit-filter",children:n.map(r=>r.isShown===!1?null:c("li",{className:"filter__item",children:c($,{className:"btn",onClickFn:()=>t(r.value),children:r.name})},r.value))})};var Xr=["points","className","baseLinePoints","connectNulls"];function de(){return de=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},de.apply(this,arguments)}function Jr(e,t){if(e==null)return{};var n=ea(e,t),r,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)r=i[a],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function ea(e,t){if(e==null)return{};var n={},r=Object.keys(e),a,i;for(i=0;i<r.length;i++)a=r[i],!(t.indexOf(a)>=0)&&(n[a]=e[a]);return n}function wt(e){return aa(e)||ra(e)||na(e)||ta()}function ta(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function na(e,t){if(e){if(typeof e=="string")return Ze(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Ze(e,t)}}function ra(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function aa(e){if(Array.isArray(e))return Ze(e)}function Ze(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var _t=function(t){return t&&t.x===+t.x&&t.y===+t.y},ia=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],n=[[]];return t.forEach(function(r){_t(r)?n[n.length-1].push(r):n[n.length-1].length>0&&n.push([])}),_t(t[0])&&n[n.length-1].push(t[0]),n[n.length-1].length<=0&&(n=n.slice(0,-1)),n},we=function(t,n){var r=ia(t);n&&(r=[r.reduce(function(i,s){return[].concat(wt(i),wt(s))},[])]);var a=r.map(function(i){return i.reduce(function(s,o,u){return"".concat(s).concat(u===0?"M":"L").concat(o.x,",").concat(o.y)},"")}).join("");return r.length===1?"".concat(a,"Z"):a},sa=function(t,n,r){var a=we(t,r);return"".concat(a.slice(-1)==="Z"?a.slice(0,-1):a,"L").concat(we(n.reverse(),r).slice(1))},oa=function(t){var n=t.points,r=t.className,a=t.baseLinePoints,i=t.connectNulls,s=Jr(t,Xr);if(!n||!n.length)return null;var o=he("recharts-polygon",r);if(a&&a.length){var u=s.stroke&&s.stroke!=="none",d=sa(n,a,i);return I.createElement("g",{className:o},I.createElement("path",de({},M(s,!0),{fill:d.slice(-1)==="Z"?s.fill:"none",stroke:"none",d})),u?I.createElement("path",de({},M(s,!0),{fill:"none",d:we(n,i)})):null,u?I.createElement("path",de({},M(s,!0),{fill:"none",d:we(a,i)})):null)}var l=we(n,i);return I.createElement("path",de({},M(s,!0),{fill:l.slice(-1)==="Z"?s.fill:"none",className:o,d:l}))},ca=$t,la=jt,ua=un;function da(e,t){return e&&e.length?ca(e,la(t),ua):void 0}var fa=da;const ha=De(fa);var pa=$t,ma=dn,va=jt;function ga(e,t){return e&&e.length?pa(e,va(t),ma):void 0}var ya=ga;const ba=De(ya);var ka=["cx","cy","angle","ticks","axisLine"],wa=["ticks","tick","angle","tickFormatter","stroke"];function pe(e){"@babel/helpers - typeof";return pe=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},pe(e)}function _e(){return _e=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},_e.apply(this,arguments)}function At(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function te(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?At(Object(n),!0).forEach(function(r){Be(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):At(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Ct(e,t){if(e==null)return{};var n=_a(e,t),r,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)r=i[a],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function _a(e,t){if(e==null)return{};var n={},r=Object.keys(e),a,i;for(i=0;i<r.length;i++)a=r[i],!(t.indexOf(a)>=0)&&(n[a]=e[a]);return n}function Aa(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Pt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Ht(r.key),r)}}function Ca(e,t,n){return t&&Pt(e.prototype,t),n&&Pt(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function Pa(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Ye(e,t)}function Ye(e,t){return Ye=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,a){return r.__proto__=a,r},Ye(e,t)}function Ia(e){var t=xa();return function(){var r=Ee(e),a;if(t){var i=Ee(this).constructor;a=Reflect.construct(r,arguments,i)}else a=r.apply(this,arguments);return Oa(this,a)}}function Oa(e,t){if(t&&(pe(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Sa(e)}function Sa(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function xa(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Ee(e){return Ee=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Ee(e)}function Be(e,t,n){return t=Ht(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ht(e){var t=Na(e,"string");return pe(t)==="symbol"?t:String(t)}function Na(e,t){if(pe(e)!=="object"||e===null)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(pe(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Ue=function(e){Pa(n,e);var t=Ia(n);function n(){return Aa(this,n),t.apply(this,arguments)}return Ca(n,[{key:"getTickValueCoord",value:function(a){var i=a.coordinate,s=this.props,o=s.angle,u=s.cx,d=s.cy;return X(u,d,i,o)}},{key:"getTickTextAnchor",value:function(){var a=this.props.orientation,i;switch(a){case"left":i="end";break;case"right":i="start";break;default:i="middle";break}return i}},{key:"getViewBox",value:function(){var a=this.props,i=a.cx,s=a.cy,o=a.angle,u=a.ticks,d=ba(u,function(h){return h.coordinate||0}),l=ha(u,function(h){return h.coordinate||0});return{cx:i,cy:s,startAngle:o,endAngle:o,innerRadius:l.coordinate||0,outerRadius:d.coordinate||0}}},{key:"renderAxisLine",value:function(){var a=this.props,i=a.cx,s=a.cy,o=a.angle,u=a.ticks,d=a.axisLine,l=Ct(a,ka),h=u.reduce(function(y,v){return[Math.min(y[0],v.coordinate),Math.max(y[1],v.coordinate)]},[1/0,-1/0]),p=X(i,s,h[0],o),f=X(i,s,h[1],o),m=te(te(te({},M(l)),{},{fill:"none"},M(d)),{},{x1:p.x,y1:p.y,x2:f.x,y2:f.y});return I.createElement("line",_e({className:"recharts-polar-radius-axis-line"},m))}},{key:"renderTicks",value:function(){var a=this,i=this.props,s=i.ticks,o=i.tick,u=i.angle,d=i.tickFormatter,l=i.stroke,h=Ct(i,wa),p=this.getTickTextAnchor(),f=M(h),m=M(o),y=s.map(function(v,b){var _=a.getTickValueCoord(v),O=te(te(te(te({textAnchor:p,transform:"rotate(".concat(90-u,", ").concat(_.x,", ").concat(_.y,")")},f),{},{stroke:"none",fill:l},m),{},{index:b},_),{},{payload:v});return I.createElement(K,_e({className:"recharts-polar-radius-axis-tick",key:"tick-".concat(b)},rt(a.props,v,b)),n.renderTickItem(o,O,d?d(v.value,b):v.value))});return I.createElement(K,{className:"recharts-polar-radius-axis-ticks"},y)}},{key:"render",value:function(){var a=this.props,i=a.ticks,s=a.axisLine,o=a.tick;return!i||!i.length?null:I.createElement(K,{className:"recharts-polar-radius-axis"},s&&this.renderAxisLine(),o&&this.renderTicks(),Mt.renderCallByParent(this.props,this.getViewBox()))}}],[{key:"renderTickItem",value:function(a,i,s){var o;return I.isValidElement(a)?o=I.cloneElement(a,i):re(a)?o=a(i):o=I.createElement(nt,_e({},i,{className:"recharts-polar-radius-axis-tick-value"}),s),o}}]),n}(A.PureComponent);Be(Ue,"displayName","PolarRadiusAxis");Be(Ue,"axisType","radiusAxis");Be(Ue,"defaultProps",{type:"number",radiusAxisId:0,cx:0,cy:0,angle:0,orientation:"right",stroke:"#ccc",axisLine:!0,tick:!0,tickCount:5,allowDataOverflow:!1,scale:"auto",allowDuplicatedCategory:!0});function me(e){"@babel/helpers - typeof";return me=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},me(e)}function ae(){return ae=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ae.apply(this,arguments)}function It(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function ne(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?It(Object(n),!0).forEach(function(r){qe(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):It(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Ea(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ot(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,zt(r.key),r)}}function Ra(e,t,n){return t&&Ot(e.prototype,t),n&&Ot(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function La(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Xe(e,t)}function Xe(e,t){return Xe=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,a){return r.__proto__=a,r},Xe(e,t)}function Da(e){var t=ja();return function(){var r=Re(e),a;if(t){var i=Re(this).constructor;a=Reflect.construct(r,arguments,i)}else a=r.apply(this,arguments);return Ta(this,a)}}function Ta(e,t){if(t&&(me(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return $a(e)}function $a(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ja(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Re(e){return Re=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Re(e)}function qe(e,t,n){return t=zt(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function zt(e){var t=Ma(e,"string");return me(t)==="symbol"?t:String(t)}function Ma(e,t){if(me(e)!=="object"||e===null)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(me(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Fa=Math.PI/180,St=1e-5,We=function(e){La(n,e);var t=Da(n);function n(){return Ea(this,n),t.apply(this,arguments)}return Ra(n,[{key:"getTickLineCoord",value:function(a){var i=this.props,s=i.cx,o=i.cy,u=i.radius,d=i.orientation,l=i.tickSize,h=l||8,p=X(s,o,u,a.coordinate),f=X(s,o,u+(d==="inner"?-1:1)*h,a.coordinate);return{x1:p.x,y1:p.y,x2:f.x,y2:f.y}}},{key:"getTickTextAnchor",value:function(a){var i=this.props.orientation,s=Math.cos(-a.coordinate*Fa),o;return s>St?o=i==="outer"?"start":"end":s<-St?o=i==="outer"?"end":"start":o="middle",o}},{key:"renderAxisLine",value:function(){var a=this.props,i=a.cx,s=a.cy,o=a.radius,u=a.axisLine,d=a.axisLineType,l=ne(ne({},M(this.props)),{},{fill:"none"},M(u));if(d==="circle")return I.createElement(fn,ae({className:"recharts-polar-angle-axis-line"},l,{cx:i,cy:s,r:o}));var h=this.props.ticks,p=h.map(function(f){return X(i,s,o,f.coordinate)});return I.createElement(oa,ae({className:"recharts-polar-angle-axis-line"},l,{points:p}))}},{key:"renderTicks",value:function(){var a=this,i=this.props,s=i.ticks,o=i.tick,u=i.tickLine,d=i.tickFormatter,l=i.stroke,h=M(this.props),p=M(o),f=ne(ne({},h),{},{fill:"none"},M(u)),m=s.map(function(y,v){var b=a.getTickLineCoord(y),_=a.getTickTextAnchor(y),O=ne(ne(ne({textAnchor:_},h),{},{stroke:"none",fill:l},p),{},{index:v,payload:y,x:b.x2,y:b.y2});return I.createElement(K,ae({className:"recharts-polar-angle-axis-tick",key:"tick-".concat(v)},rt(a.props,y,v)),u&&I.createElement("line",ae({className:"recharts-polar-angle-axis-tick-line"},f,b)),o&&n.renderTickItem(o,O,d?d(y.value,v):y.value))});return I.createElement(K,{className:"recharts-polar-angle-axis-ticks"},m)}},{key:"render",value:function(){var a=this.props,i=a.ticks,s=a.radius,o=a.axisLine;return s<=0||!i||!i.length?null:I.createElement(K,{className:"recharts-polar-angle-axis"},o&&this.renderAxisLine(),this.renderTicks())}}],[{key:"renderTickItem",value:function(a,i,s){var o;return I.isValidElement(a)?o=I.cloneElement(a,i):re(a)?o=a(i):o=I.createElement(nt,ae({},i,{className:"recharts-polar-angle-axis-tick-value"}),s),o}}]),n}(A.PureComponent);qe(We,"displayName","PolarAngleAxis");qe(We,"axisType","angleAxis");qe(We,"defaultProps",{type:"category",angleAxisId:0,scale:"auto",cx:0,cy:0,orientation:"outer",axisLine:!0,tickLine:!0,tickSize:8,tick:!0,hide:!1,allowDuplicatedCategory:!0});var Ba=hn,Ua=Ba(Object.getPrototypeOf,Object),qa=Ua,Wa=pn,Va=qa,Qa=mn,Ka="[object Object]",Ga=Function.prototype,Ha=Object.prototype,Zt=Ga.toString,za=Ha.hasOwnProperty,Za=Zt.call(Object);function Ya(e){if(!Qa(e)||Wa(e)!=Ka)return!1;var t=Va(e);if(t===null)return!0;var n=za.call(t,"constructor")&&t.constructor;return typeof n=="function"&&n instanceof n&&Zt.call(n)==Za}var Xa=Ya;const Ja=De(Xa);function ve(e){"@babel/helpers - typeof";return ve=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ve(e)}function ie(){return ie=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ie.apply(this,arguments)}function xt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function D(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?xt(Object(n),!0).forEach(function(r){V(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):xt(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function ei(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Nt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Yt(r.key),r)}}function ti(e,t,n){return t&&Nt(e.prototype,t),n&&Nt(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function ni(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Je(e,t)}function Je(e,t){return Je=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,a){return r.__proto__=a,r},Je(e,t)}function ri(e){var t=ii();return function(){var r=Le(e),a;if(t){var i=Le(this).constructor;a=Reflect.construct(r,arguments,i)}else a=r.apply(this,arguments);return ai(this,a)}}function ai(e,t){if(t&&(ve(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return ce(e)}function ce(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ii(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Le(e){return Le=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Le(e)}function V(e,t,n){return t=Yt(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Yt(e){var t=si(e,"string");return ve(t)==="symbol"?t:String(t)}function si(e,t){if(ve(e)!=="object"||e===null)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(ve(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var G=function(e){ni(n,e);var t=ri(n);function n(r){var a;return ei(this,n),a=t.call(this,r),V(ce(a),"pieRef",null),V(ce(a),"sectorRefs",[]),V(ce(a),"id",gn("recharts-pie-")),V(ce(a),"handleAnimationEnd",function(){var i=a.props.onAnimationEnd;a.setState({isAnimationFinished:!0}),re(i)&&i()}),V(ce(a),"handleAnimationStart",function(){var i=a.props.onAnimationStart;a.setState({isAnimationFinished:!1}),re(i)&&i()}),a.state={isAnimationFinished:!r.isAnimationActive,prevIsAnimationActive:r.isAnimationActive,prevAnimationId:r.animationId,sectorToFocus:0},a}return ti(n,[{key:"isActiveIndex",value:function(a){var i=this.props.activeIndex;return Array.isArray(i)?i.indexOf(a)!==-1:a===i}},{key:"hasActiveIndex",value:function(){var a=this.props.activeIndex;return Array.isArray(a)?a.length!==0:a||a===0}},{key:"renderLabels",value:function(a){var i=this.props.isAnimationActive;if(i&&!this.state.isAnimationFinished)return null;var s=this.props,o=s.label,u=s.labelLine,d=s.dataKey,l=s.valueKey,h=M(this.props),p=M(o),f=M(u),m=o&&o.offsetRadius||20,y=a.map(function(v,b){var _=(v.startAngle+v.endAngle)/2,O=X(v.cx,v.cy,v.outerRadius+m,_),C=D(D(D(D({},h),v),{},{stroke:"none"},p),{},{index:b,textAnchor:n.getTextAnchor(O.x,v.cx)},O),R=D(D(D(D({},h),v),{},{fill:"none",stroke:v.fill},f),{},{index:b,points:[X(v.cx,v.cy,v.outerRadius,_),O],key:"line"}),k=d;return fe(d)&&fe(l)?k="value":fe(d)&&(k=l),I.createElement(K,{key:"label-".concat(b)},u&&n.renderLabelLineItem(u,R),n.renderLabelItem(o,C,oe(v,k)))});return I.createElement(K,{className:"recharts-pie-labels"},y)}},{key:"renderSectorsStatically",value:function(a){var i=this,s=this.props,o=s.activeShape,u=s.blendStroke,d=s.inactiveShape;return a.map(function(l,h){var p=d&&i.hasActiveIndex()?d:null,f=i.isActiveIndex(h)?o:p,m=D(D({},l),{},{stroke:u?l.fill:l.stroke});return I.createElement(K,ie({ref:function(v){v&&!i.sectorRefs.includes(v)&&i.sectorRefs.push(v)},tabIndex:-1,className:"recharts-pie-sector"},rt(i.props,l,h),{key:"sector-".concat(h)}),n.renderSectorItem(f,m))})}},{key:"renderSectorsWithAnimation",value:function(){var a=this,i=this.props,s=i.sectors,o=i.isAnimationActive,u=i.animationBegin,d=i.animationDuration,l=i.animationEasing,h=i.animationId,p=this.state,f=p.prevSectors,m=p.prevIsAnimationActive;return I.createElement(bn,{begin:u,duration:d,isActive:o,easing:l,from:{t:0},to:{t:1},key:"pie-".concat(h,"-").concat(m),onAnimationStart:this.handleAnimationStart,onAnimationEnd:this.handleAnimationEnd},function(y){var v=y.t,b=[],_=s&&s[0],O=_.startAngle;return s.forEach(function(C,R){var k=f&&f[R],E=R>0?kn(C,"paddingAngle",0):0;if(k){var P=lt(k.endAngle-k.startAngle,C.endAngle-C.startAngle),x=D(D({},C),{},{startAngle:O+E,endAngle:O+P(v)+E});b.push(x),O=x.endAngle}else{var L=C.endAngle,F=C.startAngle,W=lt(0,L-F),B=W(v),U=D(D({},C),{},{startAngle:O+E,endAngle:O+B+E});b.push(U),O=U.endAngle}}),I.createElement(K,null,a.renderSectorsStatically(b))})}},{key:"attachKeyboardHandlers",value:function(a){var i=this;a.onkeydown=function(s){if(!s.altKey)switch(s.key){case"ArrowLeft":{var o=++i.state.sectorToFocus%i.sectorRefs.length;i.sectorRefs[o].focus(),i.setState({sectorToFocus:o});break}case"ArrowRight":{var u=--i.state.sectorToFocus<0?i.sectorRefs.length-1:i.state.sectorToFocus%i.sectorRefs.length;i.sectorRefs[u].focus(),i.setState({sectorToFocus:u});break}case"Escape":{i.sectorRefs[i.state.sectorToFocus].blur(),i.setState({sectorToFocus:0});break}}}}},{key:"renderSectors",value:function(){var a=this.props,i=a.sectors,s=a.isAnimationActive,o=this.state.prevSectors;return s&&i&&i.length&&(!o||!wn(o,i))?this.renderSectorsWithAnimation():this.renderSectorsStatically(i)}},{key:"componentDidMount",value:function(){this.pieRef&&this.attachKeyboardHandlers(this.pieRef)}},{key:"render",value:function(){var a=this,i=this.props,s=i.hide,o=i.sectors,u=i.className,d=i.label,l=i.cx,h=i.cy,p=i.innerRadius,f=i.outerRadius,m=i.isAnimationActive,y=this.state.isAnimationFinished;if(s||!o||!o.length||!ue(l)||!ue(h)||!ue(p)||!ue(f))return null;var v=he("recharts-pie",u);return I.createElement(K,{tabIndex:this.props.rootTabIndex,className:v,ref:function(_){a.pieRef=_}},this.renderSectors(),d&&this.renderLabels(o),Mt.renderCallByParent(this.props,null,!1),(!m||y)&&_n.renderCallByParent(this.props,o,!1))}}],[{key:"getDerivedStateFromProps",value:function(a,i){return i.prevIsAnimationActive!==a.isAnimationActive?{prevIsAnimationActive:a.isAnimationActive,prevAnimationId:a.animationId,curSectors:a.sectors,prevSectors:[],isAnimationFinished:!0}:a.isAnimationActive&&a.animationId!==i.prevAnimationId?{prevAnimationId:a.animationId,curSectors:a.sectors,prevSectors:i.curSectors,isAnimationFinished:!0}:a.sectors!==i.curSectors?{curSectors:a.sectors,isAnimationFinished:!0}:null}},{key:"getTextAnchor",value:function(a,i){return a>i?"start":a<i?"end":"middle"}},{key:"renderLabelLineItem",value:function(a,i){return I.isValidElement(a)?I.cloneElement(a,i):re(a)?a(i):I.createElement(yn,ie({},i,{type:"linear",className:"recharts-pie-label-line"}))}},{key:"renderLabelItem",value:function(a,i,s){if(I.isValidElement(a))return I.cloneElement(a,i);var o=s;return re(a)&&(o=a(i),I.isValidElement(o))?o:I.createElement(nt,ie({},i,{alignmentBaseline:"middle",className:"recharts-pie-label-text"}),o)}},{key:"renderSectorItem",value:function(a,i){return I.isValidElement(a)?I.cloneElement(a,i):re(a)?a(i):Ja(a)?I.createElement(ct,ie({tabIndex:-1},i,a)):I.createElement(ct,ie({tabIndex:-1},i))}}]),n}(A.PureComponent);V(G,"displayName","Pie");V(G,"defaultProps",{stroke:"#fff",fill:"#808080",legendType:"rect",cx:"50%",cy:"50%",startAngle:0,endAngle:360,innerRadius:0,outerRadius:"80%",paddingAngle:0,labelLine:!0,hide:!1,minAngle:0,isAnimationActive:!vn.isSsr,animationBegin:400,animationDuration:1500,animationEasing:"ease",nameKey:"name",blendStroke:!1,rootTabIndex:0});V(G,"parseDeltaAngle",function(e,t){var n=Oe(t-e),r=Math.min(Math.abs(t-e),360);return n*r});V(G,"getRealPieData",function(e){var t=e.props,n=t.data,r=t.children,a=M(e.props),i=An(r,Ft);return n&&n.length?n.map(function(s,o){return D(D(D({payload:s},a),s),i&&i[o]&&i[o].props)}):i&&i.length?i.map(function(s){return D(D({},a),s.props)}):[]});V(G,"parseCoordinateOfPie",function(e,t){var n=t.top,r=t.left,a=t.width,i=t.height,s=Cn(a,i),o=r+Pe(e.props.cx,a,a/2),u=n+Pe(e.props.cy,i,i/2),d=Pe(e.props.innerRadius,s,0),l=Pe(e.props.outerRadius,s,s*.8),h=e.props.maxRadius||Math.sqrt(a*a+i*i)/2;return{cx:o,cy:u,innerRadius:d,outerRadius:l,maxRadius:h}});V(G,"getComposedData",function(e){var t=e.item,n=e.offset,r=G.getRealPieData(t);if(!r||!r.length)return null;var a=t.props,i=a.cornerRadius,s=a.startAngle,o=a.endAngle,u=a.paddingAngle,d=a.dataKey,l=a.nameKey,h=a.valueKey,p=a.tooltipType,f=Math.abs(t.props.minAngle),m=G.parseCoordinateOfPie(t,n),y=G.parseDeltaAngle(s,o),v=Math.abs(y),b=d;fe(d)&&fe(h)?(ut(!1,`Use "dataKey" to specify the value of pie,
      the props "valueKey" will be deprecated in 1.1.0`),b="value"):fe(d)&&(ut(!1,`Use "dataKey" to specify the value of pie,
      the props "valueKey" will be deprecated in 1.1.0`),b=h);var _=r.filter(function(P){return oe(P,b,0)!==0}).length,O=(v>=360?_:_-1)*u,C=v-_*f-O,R=r.reduce(function(P,x){var L=oe(x,b,0);return P+(ue(L)?L:0)},0),k;if(R>0){var E;k=r.map(function(P,x){var L=oe(P,b,0),F=oe(P,l,x),W=(ue(L)?L:0)/R,B;x?B=E.endAngle+Oe(y)*u*(L!==0?1:0):B=s;var U=B+Oe(y)*((L!==0?f:0)+W*C),H=(B+U)/2,se=(m.innerRadius+m.outerRadius)/2,w=[{name:F,value:L,payload:P,dataKey:b,type:p}],S=X(m.cx,m.cy,se,H);return E=D(D(D({percent:W,cornerRadius:i,name:F,tooltipPayload:w,midAngle:H,middleRadius:se,tooltipPosition:S},P),m),{},{value:oe(P,b),startAngle:B,endAngle:U,payload:P,paddingAngle:Oe(y)*u}),E})}return D(D({},m),{},{sectors:k,data:r})});var oi=Pn({chartName:"PieChart",GraphicalChild:G,validateTooltipEventTypes:["item"],defaultTooltipEventType:"item",legendContent:"children",axisComponents:[{axisType:"angleAxis",AxisComp:We},{axisType:"radiusAxis",AxisComp:Ue}],formatAxisMap:In,defaultProps:{layout:"centric",startAngle:0,endAngle:360,cx:"50%",cy:"50%",innerRadius:0,outerRadius:"80%"}});const ci=({intakes:e,remainingCalories:t})=>{const n=[...e.map(r=>({name:r.items.reduce((a,i,s,o)=>o.length===1?i.name:s===0?a+`${i.name}, `:s===o.length-1?a+`and ${i.name}`:a+` ${i.name}, `,""),value:r.items.reduce((a,i)=>a+i.calories,0)})),{name:"remaining",value:t}];return t<=0&&n.pop(),g(oi,{width:250,height:250,children:[c(G,{dataKey:"value",isAnimationActive:!1,data:n,cx:125,cy:125,innerRadius:80,outerRadius:110,children:n.map((r,a)=>{const i=r.name==="remaining"?"#a7a7a7":ot[a%ot.length];return c(Ft,{fill:i},`cell-${a}`)})}),c(On,{})]})},li=()=>{const{dailyData:e,recordedIntakes:t,calConsumedPct:n,calRemainingPct:r,remainingCalories:a,consumedCalories:i,estimatedKGChange:s}=Z();if(!e)return null;const{date:o}=e,u=new Intl.DateTimeFormat("en-GB",{weekday:"long",month:"numeric",day:"numeric",year:"numeric"}).format(new Date(o)),d=a>0?"remaining":"over your limit";return g("header",{className:"day-edit__header","data-testid":"day-edit-header",children:[c("div",{className:"day-edit__header__date-container",children:c("h2",{className:"day-edit__header__date","data-testid":"day-edit-header-date",children:u})}),c(ci,{intakes:t,remainingCalories:a}),g("div",{className:"day-edit__header__titles",children:[g("p",{className:"day-edit__header__titles__title","data-testid":"day-edit-header-remaining-calories",children:[g("strong",{children:[Math.abs(a)," "]}),"calories ",d]}),i>0&&g("p",{className:"day-edit__header__titles__title","data-testid":"day-edit-header-consumed-calories",children:[c("strong",{children:Math.round(i)})," calories consumed"]}),g("div",{className:"day-edit__header__percentages-container",children:[g("div",{className:"day-edit__header__percentage","data-testid":"day-edit-header-consumed-percentage",children:[c("p",{className:"day-edit__header__percentage__title",children:"consumed:"}),g("p",{className:"day-edit__header__percentage__value",children:[n,"%"]})]}),g("div",{className:"day-edit__header__percentage","data-testid":"day-edit-header-remaining-percentage",children:[c("p",{className:"day-edit__header__percentage__title",children:"remaining:"}),g("p",{className:"day-edit__header__percentage__value",children:[r,"%"]})]})]}),g("p",{className:"day-edit__header__titles__title","data-testid":"day-edit-header-estimated-kg-change",children:["estimated to ",s>0?"gain":"lose",g("strong",{children:[" ",Math.abs(s)]})," kg"]})]})]})};const ui=({mode:e,zIndex:t})=>c("div",{className:`main-screen ${e||""}`,style:{zIndex:t},"data-testid":"main-screen"});function di(e,t=!0){const n=A.useRef(null);return A.useEffect(()=>{function r(a){n.current&&!n.current.contains(a.target)&&e()}return document.addEventListener("click",r,t),()=>document.removeEventListener("click",r,t)},[e,t]),{outsideClickRef:n}}const fi=({isModalAbove:e,isFullScreen:t=!1})=>{const n="tippy"+(e?" down":" up")+(t?" full-screen":"");return c("div",{className:n,"data-testid":"tippy"})};function Xt(e,t){var o;const n=(o=e.current)==null?void 0:o.getBoundingClientRect();if(!n)return;const a=window.innerHeight-n.top<t,i={top:n.bottom+n.height/2+window.scrollY},s={bottom:window.innerHeight-n.top+n.height/2};return{isModalAbove:a,position:{...a?s:i,left:n.left+n.width/2+window.scrollX},rect:n}}const Ce=A.createContext(void 0),q=({children:e,externalStateControl:t,onClose:n,onOpen:r,onAfterClose:a})=>{const[i,s]=A.useState(""),[o,u]=A.useState(null),[d,l]=A.useState(null),[h,p]=A.useState(!1),f=()=>{if(n==null||n(),t){t.setOpenedModalName(""),a==null||a();return}s(""),a==null||a()},m=_=>{if(r==null||r(),t){t.setOpenedModalName(_);return}s(_)},{debouncedFunc:y,cancel:v}=tt(()=>{f()},500),b={openedModalName:(t==null?void 0:t.openedModalName)||i,close:f,open:m,position:o,setPosition:u,isModalAbove:h,setIsModalAbove:p,modalHoverGuardZone:d,setModalHoverGuardZone:l,debouncedClose:y,cancelDebouncedClose:v};return c(Ce.Provider,{value:b,children:e})},hi=({children:e,modalName:t,setPositionByRef:n=!1,modalHeight:r=0,externalControlFunc:a})=>{const{open:i,setPosition:s,setIsModalAbove:o}=A.useContext(Ce),u=A.useRef(null),d=A.useCallback(()=>{const h=Xt(u,r),{isModalAbove:p,position:f}=h;o(p),s(f)},[r,o,s]),l=()=>{if(n&&d(),a)return a();i(t)};return A.useEffect(()=>{if(!n)return;const h=["wheel","scroll","resize"];return h.forEach(p=>{window.addEventListener(p,d)}),()=>{h.forEach(p=>{window.removeEventListener(p,d)})}},[n,d]),A.cloneElement(e,{onClick:l,ref:u})},pi=({children:e,onClickFn:t})=>{const{close:n}=A.useContext(Ce);return A.cloneElement(e,{onClick:()=>{t==null||t(),n()}})},mi=({children:e,modalName:t,modalHeight:n=0})=>{const{open:r,setPosition:a,setIsModalAbove:i,setModalHoverGuardZone:s,debouncedClose:o,cancelDebouncedClose:u}=A.useContext(Ce),d=A.useRef(null),{debouncedFunc:l,cancel:h}=tt(p,500);function p(){const y=Xt(d,n);y&&(a(y.position),i(y.isModalAbove),s({height:y.rect.height,width:y.rect.width}),r(t))}function f(){u(),l()}function m(){h(),o()}return c("div",{className:"modal-hover-open",ref:d,onMouseEnter:f,onMouseLeave:m,children:e})},vi=({children:e,name:t,className:n,mainScreenMode:r="transparent",mainScreenZIndex:a=1e3,elementId:i="app",includeTippy:s=!1,style:o={},hoverControl:u=!1})=>{const{openedModalName:d,open:l,close:h,position:p,isModalAbove:f,modalHoverGuardZone:m,debouncedClose:y,cancelDebouncedClose:v}=A.useContext(Ce),{outsideClickRef:b}=di(h);function _(){v(),l(t)}function O(){y()}return t!==d?null:nn.createPortal(g(Ae,{children:[!u&&c(ui,{mode:r,zIndex:a}),g("section",{className:`modal ${n||t}`,style:{...o,zIndex:a+1,...p},ref:u?void 0:b,onMouseEnter:()=>u&&_(),onMouseLeave:()=>u&&O(),"data-testid":"modal-window",children:[s&&c(fi,{isModalAbove:!!f}),e,u&&m&&c("div",{className:"modal-hover-guard-zone",style:{top:f?"100%":`-${m.height/2}px`,height:`${m.height/2}px`||"10%",width:`${m.width}px`||"10%"}})]})]}),document.getElementById(i))};q.OpenBtn=hi;q.Window=vi;q.CloseBtn=pi;q.ModalHoverOpen=mi;const gi=({intake:e})=>{const{dailyData:t,openedElement:n,setOpenedElement:r,setIntake:a,updateDailyData:i}=Z(),s=n===j.IntakeList,o=le.getTotalCalories(e);function u(p){if(!t)return;const f={...t};f.intakes=t.intakes.filter(m=>m.id!==p),i(f)}function d(p){if(!t)return;const f={...p};a(f),r(j.IntakeEdit)}function l(p){if(!t)return;const f={...p};f.id=et(),f.recordedAt=new Date,i({...t,intakes:[...t.intakes,f]})}function h(p){if(!t)return;const f={...t};f.intakes=t.intakes.map(m=>(m.id===p&&(m.isRecorded=!0,m.recordedAt=new Date),m)),i(f)}return g("section",{className:"intake-preview","data-testid":"intake-preview",children:[c("ol",{className:"intake-preview__item-list",children:e.items.map(p=>c("li",{className:"intake-preview__item-list__item","data-testid":"intake-preview-item",children:`${p.name} - ${p.quantity} ${p.unit} - caolries: ${Math.round(p.calories)}`},p.id))}),g("p",{className:"intake-preview__total-calories",children:["total calories: ",o]}),g("div",{className:"intake-preview__btns-container",children:[g(q,{children:[c(q.OpenBtn,{modalName:"delete-intake",children:c("button",{className:"btn",children:"Delete"})}),g(q.Window,{name:"delete-intake",className:"delete-intake-modal",style:{top:window.scrollY+100},children:[c("h2",{children:"Are you sure you want to delete this intake?"}),c(q.CloseBtn,{onClickFn:()=>u(e.id),children:c("button",{className:"btn delete-btn",children:"Delete"})}),c(q.CloseBtn,{children:c("button",{className:"btn",children:"Cancel"})})]})]}),s&&g(Ae,{children:[c($,{className:"btn",onClickFn:()=>d(e),children:"Edit"}),c($,{className:"btn",onClickFn:()=>l(e),children:"duplicate"})]}),!s&&c($,{className:"btn",onClickFn:()=>h(e.id),children:"Save"})]})]})};const yi=()=>{const{dailyData:e,unrecordedIntakes:t,recordedIntakes:n,openedElement:r,isLoadingUpdate:a}=Z();if(!e)return null;const i=r===j.IntakeList,o=(i?n:t).sort((d,l)=>!d.recordedAt||!l.recordedAt?0:new Date(d.recordedAt).getTime()-new Date(l.recordedAt).getTime()),u=le.getTotalCaloriesFromDailyData({dailyData:e,isRecorded:i});return g(Ae,{children:[g("header",{className:"intake-list__header","data-testid":"intake-list-header",children:[g("h3",{className:"intake-list__header__title",children:[i?"Recorded":"Unrecorded"," Intakes"]}),g("h4",{className:"intake-list__header__total-calories",children:["total calories: ",u]})]}),a&&c(ge,{}),!a&&c(xe,{className:"intake-list",items:o,render:(d,l)=>{const h=d.recordedAt?`- ${rn(d.recordedAt)}`:"";return g("li",{className:"intake-list-item",children:[g("h5",{className:"intake-list-item__title",children:["Intake ",l+1,"# ",h]}),c(gi,{intake:d})]},d.id)}})]})},bi=()=>{const{dailyData:e,isLoading:t,updateDailyData:n}=Z(),{control:r,handleSubmit:a}=Bt({defaultValues:{weight:"",waist:""}});function i(o){e&&n({...e,weight:Number(o.weight),waist:Number(o.waist)})}if(!e)return null;const s=!e.weight&&!e.waist&&!t;return t?c(ge,{withContainer:!0,containerSize:{height:"75px"}}):c(Ae,{children:s?g("form",{className:"weight-waist-form","data-testid":"weight-waist-form",onSubmit:a(i),children:[c(ke,{control:r,name:"weight",render:({field:o})=>c("input",{...o,type:"number",className:"weight-waist-form__input",placeholder:"Enter your weight",required:!0})}),c(ke,{control:r,name:"waist",render:({field:o})=>c("input",{...o,type:"number",className:"weight-waist-form__input",placeholder:"Enter your waist size",required:!0})}),c($,{className:"btn",type:"submit",children:"update"})]}):g("div",{className:"weight-waist-details","data-testid":"weight-waist-details",children:[c("p",{className:"weight-waist-details__title",children:"weight:"}),g("p",{className:"weight-waist-details__text",children:[e.weight," kg"]}),c("p",{className:"weight-waist-details__title",children:"waist:"}),g("p",{className:"weight-waist-details__text",children:[e.waist," cm"]})]})})},it="nutrition";async function ki(e){const t=await Te.get(`${it}/chatGPT?prompt=${e}`);return $e(t)}async function wi(e){const t=await Te.get(`${it}/ninja?query=${e}`);return $e(t)}async function _i(e){const t=await Te.get(`${it}/usda?query=${e}`);return $e(t)}const Ke={queryChatGPT:ki,queryNinja:wi,queryUSDA:_i};function Ai(e){return je({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M2 19V8H1V6H4V4C4 3.44772 4.44772 3 5 3H19C19.5523 3 20 3.44772 20 4V6H23V8H22V19H23V21H1V19H2ZM13 19V12H11V19H13ZM8 19V12H6V19H8ZM18 19V12H16V19H18ZM6 5V6H18V5H6Z"}}]})(e)}function Ci(e){return je({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M20.5624 10.1875C20.8124 9.5 20.8749 8.8125 20.8124 8.125C20.7499 7.4375 20.4999 6.75 20.1874 6.125C19.6249 5.1875 18.8124 4.4375 17.8749 4C16.8749 3.5625 15.8124 3.4375 14.7499 3.6875C14.2499 3.1875 13.6874 2.75 13.0624 2.4375C12.4374 2.125 11.6874 2 10.9999 2C9.9374 2 8.8749 2.3125 7.9999 2.9375C7.1249 3.5625 6.4999 4.4375 6.1874 5.4375C5.4374 5.625 4.8124 5.9375 4.1874 6.3125C3.6249 6.75 3.1874 7.3125 2.8124 7.875C2.24991 8.8125 2.06241 9.875 2.18741 10.9375C2.31241 12 2.7499 13 3.4374 13.8125C3.1874 14.5 3.1249 15.1875 3.1874 15.875C3.2499 16.5625 3.4999 17.25 3.8124 17.875C4.3749 18.8125 5.1874 19.5625 6.1249 20C7.1249 20.4375 8.1874 20.5625 9.2499 20.3125C9.7499 20.8125 10.3124 21.25 10.9374 21.5625C11.5624 21.875 12.3124 22 12.9999 22C14.0624 22 15.1249 21.6875 15.9999 21.0625C16.8749 20.4375 17.4999 19.5625 17.8124 18.5625C18.4999 18.4375 19.1874 18.125 19.7499 17.6875C20.3124 17.25 20.8124 16.75 21.1249 16.125C21.6874 15.1875 21.8749 14.125 21.7499 13.0625C21.6249 12 21.2499 11 20.5624 10.1875ZM13.0624 20.6875C12.0624 20.6875 11.3124 20.375 10.6249 19.8125C10.6249 19.8125 10.6874 19.75 10.7499 19.75L14.7499 17.4375C14.8749 17.375 14.9374 17.3125 14.9999 17.1875C15.0624 17.0625 15.0624 17 15.0624 16.875V11.25L16.7499 12.25V16.875C16.8124 19.0625 15.0624 20.6875 13.0624 20.6875ZM4.9999 17.25C4.5624 16.5 4.3749 15.625 4.5624 14.75C4.5624 14.75 4.6249 14.8125 4.6874 14.8125L8.6874 17.125C8.8124 17.1875 8.8749 17.1875 8.9999 17.1875C9.1249 17.1875 9.2499 17.1875 9.3124 17.125L14.1874 14.3125V16.25L10.1249 18.625C9.2499 19.125 8.2499 19.25 7.3124 19C6.3124 18.75 5.4999 18.125 4.9999 17.25ZM3.9374 8.5625C4.3749 7.8125 5.0624 7.25 5.8749 6.9375V7.0625V11.6875C5.8749 11.8125 5.8749 11.9375 5.9374 12C5.9999 12.125 6.0624 12.1875 6.1874 12.25L11.0624 15.0625L9.3749 16.0625L5.3749 13.75C4.4999 13.25 3.8749 12.4375 3.6249 11.5C3.3749 10.5625 3.4374 9.4375 3.9374 8.5625ZM17.7499 11.75L12.8749 8.9375L14.5624 7.9375L18.5624 10.25C19.1874 10.625 19.6874 11.125 19.9999 11.75C20.3124 12.375 20.4999 13.0625 20.4374 13.8125C20.3749 14.5 20.1249 15.1875 19.6874 15.75C19.2499 16.3125 18.6874 16.75 17.9999 17V12.25C17.9999 12.125 17.9999 12 17.9374 11.9375C17.9374 11.9375 17.8749 11.8125 17.7499 11.75ZM19.4374 9.25C19.4374 9.25 19.3749 9.1875 19.3124 9.1875L15.3124 6.875C15.1874 6.8125 15.1249 6.8125 14.9999 6.8125C14.8749 6.8125 14.7499 6.8125 14.6874 6.875L9.8124 9.6875V7.75L13.8749 5.375C14.4999 5 15.1874 4.875 15.9374 4.875C16.6249 4.875 17.3124 5.125 17.9374 5.5625C18.4999 6 18.9999 6.5625 19.2499 7.1875C19.4999 7.8125 19.5624 8.5625 19.4374 9.25ZM8.9374 12.75L7.2499 11.75V7.0625C7.2499 6.375 7.4374 5.625 7.8124 5.0625C8.1874 4.4375 8.7499 4 9.3749 3.6875C9.9999 3.375 10.7499 3.25 11.4374 3.375C12.1249 3.4375 12.8124 3.75 13.3749 4.1875C13.3749 4.1875 13.3124 4.25 13.2499 4.25L9.2499 6.5625C9.1249 6.625 9.0624 6.6875 8.9999 6.8125C8.9374 6.9375 8.9374 7 8.9374 7.125V12.75ZM9.8124 10.75L11.9999 9.5L14.1874 10.75V13.25L11.9999 14.5L9.8124 13.25V10.75Z"}}]})(e)}const Pi=()=>c("div",{className:"dot-loader","data-testid":"dot-loader"}),Ge=({queryState:{type:e,status:t,error:n,response:r}})=>t==="loading"?c(Pi,{}):t==="error"&&n?c(Tt,{msg:n}):t==="success"?g("section",{"data-testid":"nutrition-query-response-handler",children:[e==="chatGPT"&&c("p",{children:r}),e==="ninjaAPI"&&c("ul",{className:"nutrition-query__results__item__list","data-testid":"nutrition-query-response-ninja-api-response",children:r.map((a,i)=>c("li",{children:Object.entries(a).map(([s,o])=>s==="name"?c("strong",{children:a.name},s):g("div",{children:[g("span",{children:[s,":"]}),c("span",{children:o})]},s))},i))}),e==="usdaAPI"&&c("ul",{className:"nutrition-query__results__item__list","data-testid":"nutrition-query-response-usda-api-response",children:r.map((a,i)=>{const s=Object.entries(a);return c("li",{children:s.map(([o,u])=>o==="description"?c("strong",{children:a.description},o):g("div",{children:[g("span",{children:[o,":"]}),c("span",{children:u})]},o))},i)})})]}):null;const Ii=()=>{const{chatGPTQuery:e,setChatGPTQuery:t,ninjaAPIQuery:n,setNinjaAPIQuery:r,USDAAPIQuery:a,setUSDAAPIQuery:i}=Z(),{control:s,handleSubmit:o}=Bt({defaultValues:{chatGPTQuery:"",ninjaAPIQuery:"",USDAAPIQuery:""}});async function u(d){if(d.chatGPTQuery)try{t({...e,status:"loading"});const l=await Ke.queryChatGPT(d.chatGPTQuery);t({...e,status:"success",response:l})}catch(l){t({...e,status:"error",error:l instanceof Error?l.message:"An unknown error occurred."})}if(d.ninjaAPIQuery)try{r({...n,status:"loading"});const l=await Ke.queryNinja(d.ninjaAPIQuery);r({...n,status:"success",response:l})}catch(l){r({...n,status:"error",error:l instanceof Error?l.message:"An unknown error occurred."})}if(d.USDAAPIQuery)try{i({...a,status:"loading"});const l=await Ke.queryUSDA(d.USDAAPIQuery);i({...a,status:"success",response:l})}catch(l){i({...a,status:"error",error:l instanceof Error?l.message:"An unknown error occurred."})}}return g("section",{className:"nutrition-query","data-testid":"nutrition-query",children:[g("section",{className:"nutrition-query__desc",children:[c("p",{children:"This tab let's you query the APIs used by the app."}),g("ul",{children:[c("li",{children:"The first one is a chatbot that generates a response based on the input"}),c("li",{children:"The second one is a food database."}),c("li",{children:"The third one is a nutrition database."})]})]}),g("form",{className:"nutrition-query__form",autoComplete:"off","data-testid":"nutrition-query-form",children:[g("label",{htmlFor:"chatGPTQuery",children:[c("span",{children:"Chat GPT"}),c(Ci,{})]}),c(ke,{name:"chatGPTQuery",control:s,render:({field:d})=>c("textarea",{id:"chatGPTQuery",...d})}),g("label",{htmlFor:"ninjaAPIQuery",children:[c("span",{children:"Ninja API"}),c(an,{})]}),c(ke,{name:"ninjaAPIQuery",control:s,render:({field:d})=>c("input",{id:"ninjaAPIQuery",...d})}),g("label",{htmlFor:"USDAAPIQuery",children:[c("span",{children:"USDA API"}),c(Ai,{})]}),c(ke,{name:"USDAAPIQuery",control:s,render:({field:d})=>c("input",{id:"USDAAPIQuery",...d})}),c($,{onClickFn:o(u),children:"query"})]}),g("div",{className:"nutrition-query__results",children:[e.status!=="idle"&&g("div",{className:"nutrition-query__results__item",children:[c("h1",{children:"Chat GPT Response:"}),c(Ge,{queryState:e})]}),n.status!=="idle"&&g("div",{className:"nutrition-query__results__item",children:[c("h1",{children:"Ninja API Response:"}),c(Ge,{queryState:n})]}),a.status!=="idle"&&g("div",{className:"nutrition-query__results__item",children:[c("h1",{children:"USDA API Response:"}),c(Ge,{queryState:a})]})]})]})};const Et=[{name:"cup (250ml)",value:250},{name:"bottle (750ml)",value:750},{name:"1.5 Liter",value:1500}],Oi=()=>{const{dailyData:e,updateDailyData:t,recommendedWaterIntake:n}=Z(),[r,a]=A.useState("");function i(o){a(o.name)}function s(){if(!e)return;const o=Et.find(l=>l.name===r);if(!o)return Dt.error("Please select a value");const u=Q.getDefaultIntake();u.items[0].quantity=o.value,u.items[0].unit=Me.MILLILITER,u.items[0].name="water";const d=[...e.intakes,u];t({...e,intakes:d})}return g("section",{className:"water-edit","data-testid":"water-edit",children:[c("h2",{className:"water-edit__title",children:`Recommended water intake: ${n} ml`}),c("div",{className:"water-edit__btns-values-container",children:Et.map(o=>c($,{className:he("btn",{"btn-selected":r===o.name}),onClickFn:()=>i(o),children:o.name},o.value))}),c($,{className:"water-edit__btn-save",onClickFn:s,children:"Save"})]})},Si=()=>{const{dailyData:e,isLoading:t,isSuccess:n,isError:r,isLoadingUpdate:a,openedElement:i,backgroundColor:s}=Z(),o=n&&e&&!a,u=t||a,d=i===j.IntakeList||i===j.UnRecordedIntakeList;return g("section",{className:"day-edit",style:{backgroundColor:s,border:`5px solid ${s}`},"data-testid":"day-edit",children:[u&&c(ge,{}),r&&c(Tt,{}),o&&g(Ae,{children:[c(li,{}),c(Yr,{}),i===j.WeightWaistInput&&c(bi,{}),i===j.IntakeEdit&&c(Zr,{}),i===j.Workouts&&c(xe,{items:e.workouts,render:l=>c(Sn,{workout:l,isDayEdit:!0},l.id)}),d&&c(yi,{}),i===j.Query&&c(Ii,{}),i===j.Water&&c(Oi,{})]})]})};const xi=()=>{const e=sn();return g("div",{className:"login-signup-msg","data-testid":"login-signup-msg",children:[c("div",{className:"login-signup-msg-text-container",children:c("h1",{children:"Start Your Journey Now!"})}),c("div",{className:"login-signup-msg-btn-container",children:[{title:"Log in",className:"btn-login",path:"/login"},{title:"Sign up",className:"btn-signup",path:"/signup"}].map(n=>c("button",{className:n.className,onClick:()=>{e(n.path)},children:n.title},n.title))})]})};function Ni(){const e=on(),{mutate:t,isLoading:n}=cn({mutationFn:ln.create,onSuccess:()=>{e.invalidateQueries(["today"])}});return{createDay:t,isLoading:n}}const Ui=()=>{const{loggedInUser:e}=Rt(),{dailyData:t}=Lt(),{createDay:n,isLoading:r}=Ni(),a=e&&!r,i=e&&t&&!Ei(t);Nn({title:"Home / Kceli"});function s(){const o=new Date().toDateString();n({date:o})}return g("main",{className:"home","data-testid":"home-page",children:[!e&&c(xi,{}),a&&c(jr,{children:c(Si,{})}),r&&c(ge,{}),i&&g(q,{children:[c(q.OpenBtn,{modalName:"create-day",children:c("button",{className:"home__btn","data-testid":"create-day-open-modal-btn",children:"start a new day"})}),g(q.Window,{name:"create-day",className:"create-day-modal",children:[g("h2",{className:"create-day-modal__title",children:["Are you sure you want to start a new day? ",c("br",{})]}),c(q.CloseBtn,{onClickFn:s,children:c("button",{className:"btn create-day-modal__btn","data-testid":"create-day-modal-btn",children:"start a new day"})}),c(q.CloseBtn,{children:c("button",{className:"btn create-day-modal__btn",children:"cancel"})})]})]})]})};function Ei(e){const t=new Date().toDateString(),n=new Date(e.date).toDateString();return t===n}export{Ui as default};
