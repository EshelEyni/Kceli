import{a5 as p,r as m,j as e,G as N,m as c,B as _,a6 as C,a7 as y,D as T,S as b,F as I}from"./index-d0f3b42c.js";import{E as R}from"./ErrorMsg-2d04ed7d.js";import{L as k}from"./List-0b5eaac5.js";const D=({children:t})=>{const{isRunning:n}=p(),r=m.useRef(null),i=m.useRef(0),[u,o]=m.useState(v(1));return m.useEffect(()=>{const{current:a}=r;if(n){const l=setInterval(()=>{o(v(i.current)),i.current=i.current===100?0:i.current+1},10);r.current=l}else a&&clearInterval(a),o(v(0));return()=>{a&&clearInterval(a)}},[n]),e("div",{className:"seconds-circle","data-testid":"seconds-circle",style:{background:u},children:t})};function v(t){return`radial-gradient(closest-side,  var(--color-background) 85%, transparent 87%),
        conic-gradient(var(--color-text-gray) ${t}%, var(--color-background-light) 0)`}const M=({children:t})=>{const{initialTime:n,time:r,isRunning:i}=p(),u=m.useRef(null),[o,a]=m.useState(w(1));return m.useEffect(()=>{const{current:l}=u;if(i){const h=setInterval(()=>{const d=Math.abs((r-n)*60)/(n*60)*100;a(w(d))},10);u.current=h}else l&&clearInterval(l);return()=>{l&&clearInterval(l)}},[i,n,r]),m.useEffect(()=>{const h=Math.abs((r-n)*60)/(n*60)*100;a(w(h))},[n,r]),e("div",{className:"item-duration-circle","data-testid":"item-duration-circle",style:{background:o},children:e("div",{className:"item-duration-circle__border",children:t})})};function w(t){return`conic-gradient(var(--color-info) ${Math.max(t,.25)}%, var(--color-background-light) 0)`}const F=({children:t})=>{const{duration:n,completedDuration:r}=p(),i=r/n*100,[u,o]=m.useState($(i||1));return m.useEffect(()=>{const a=r/n*100;o($(a))},[r,n]),e("div",{className:"total-duration-circle","data-testid":"total-duration-circle",style:{background:u},children:e("div",{className:"total-duration-circle__border",children:t})})};function $(t){return`conic-gradient(#6A0DAD ${Math.max(t,.25)}%, var(--color-background-light) 0)`}function B(t){return N({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M125.7 160H176c17.7 0 32 14.3 32 32s-14.3 32-32 32H48c-17.7 0-32-14.3-32-32V64c0-17.7 14.3-32 32-32s32 14.3 32 32v51.2L97.6 97.6c87.5-87.5 229.3-87.5 316.8 0s87.5 229.3 0 316.8s-229.3 87.5-316.8 0c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0c62.5 62.5 163.8 62.5 226.3 0s62.5-163.8 0-226.3s-163.8-62.5-226.3 0L125.7 160z"}}]})(t)}function W(t){return N({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M75 75L41 41C25.9 25.9 0 36.6 0 57.9V168c0 13.3 10.7 24 24 24H134.1c21.4 0 32.1-25.9 17-41l-30.8-30.8C155 85.5 203 64 256 64c106 0 192 86 192 192s-86 192-192 192c-40.8 0-78.6-12.7-109.7-34.4c-14.5-10.1-34.4-6.6-44.6 7.9s-6.6 34.4 7.9 44.6C151.2 495 201.7 512 256 512c141.4 0 256-114.6 256-256S397.4 0 256 0C185.3 0 121.3 28.7 75 75zm181 53c-13.3 0-24 10.7-24 24V256c0 6.4 2.5 12.5 7 17l72 72c9.4 9.4 24.6 9.4 33.9 0s9.4-24.6 0-33.9l-65-65V152c0-13.3-10.7-24-24-24z"}}]})(t)}function x(t){return N({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"}},{tag:"path",attr:{d:"M13 8v8h-3V8h3m0-3h-3C8.34 5 7 6.34 7 8v8c0 1.66 1.34 3 3 3h3c1.66 0 3-1.34 3-3V8c0-1.66-1.34-3-3-3zM1 8h2v11h3V5H1v3zm17.5 3c-.83 0-1.5.68-1.5 1.5v2c0 .82.67 1.5 1.5 1.5H21v1h-4v2h4.5c.83 0 1.5-.67 1.5-1.5v-2c0-.83-.67-1.5-1.5-1.5H19v-1h4v-2h-4.5z"}}]})(t)}const E=new Audio("/assets/sounds/SamsungRingtoneSoundEffect.mp3");function L(t){const n=Math.floor(t/60),r=Math.floor(t%60),i=Math.floor(t%1*100),u=n.toString().padStart(2,"0"),o=r.toString().padStart(2,"0"),a=i.toString().padStart(2,"0").slice(-2);return`${u}:${o}.${a}`}const U=()=>{const{time:t,setTime:n,isRunning:r,setIsRunning:i,onResetTimer:u,setInitialTime:o}=p(),a=m.useRef(null);function l(){i(d=>!d)}function h(){n(0),o(0),i(!1)}function s(){n(d=>d+10),o(d=>d+10)}return m.useEffect(()=>{const{current:d}=a;if(r){const g=setInterval(()=>{n(f=>f>=0?f-.01:(i(!1),E.play(),clearInterval(g),0))},10);a.current=g}else d&&clearInterval(d);return()=>{d&&clearInterval(d)}},[r,n,i]),c("section",{className:"timer","data-testid":"timer",children:[e(F,{children:e(M,{children:e(D,{children:e("div",{className:"clock-wrapper",children:e("span",{className:"timer__count",children:L(t)})})})})}),c("div",{className:"timer__controls",children:[e(_,{className:"timer__controls__btn",onClickFn:h,children:e(B,{"data-testid":"clear-icon"})}),e(_,{className:"timer__controls__btn",onClickFn:s,children:e(x,{"data-testid":"increment-icon"})}),e(_,{className:"timer__controls__btn",onClickFn:l,children:r?e(C,{"data-testid":"pause-icon"}):e(y,{"data-testid":"play-icon"})}),e(_,{className:"timer__controls__btn",onClickFn:u,children:e(W,{"data-testid":"reset-icon"})})]})]})};const S=({item:t})=>{const{currItem:n,isWorkoutStarted:r,onStartItem:i,onCompleteItem:u}=p(),o=(n==null?void 0:n.id)===t.id,a=()=>!o||!r?null:c("div",{className:"workout-item-display__btns-container","data-testid":"workout-item-display-btns-container",children:[!t.isStarted&&e(_,{className:"workout-item-display__btn",isDisabled:!r,onClickFn:()=>i(t),children:"start"}),t.isStarted&&!t.isCompleted&&e(_,{className:"workout-item-display__btn",isDisabled:!r,onClickFn:()=>u(t),children:"complete"})]}),l=()=>t.type!=="superset"?null:e("ul",{className:"workout-item-display__info__superset-set-list","data-testid":"workout-item-display-info-superset-set-list",children:t.items.map((s,d)=>{const f=s.weightUnit==="kg"||s.weightUnit==="lbs"?`${s.weight} ${s.weightUnit}`:s.weightUnit;return e("li",{className:"workout-item-display__info__superset-set-list__item",children:`${s.name} - ${s.reps} reps - ${f}`},d)})});return c("section",{className:"workout-item-display",children:[c("div",{className:"workout-item-display__info","data-testid":"workout-item-display-info",children:[e("h4",{className:"workout-item-display__info__title","data-testid":"workout-item-display-info-title",children:(()=>{const s=`${t.name} - ${T.calcItemDuration(t)} min`;switch(t.type){case"anaerobic":{const g=t.weightUnit==="kg"||t.weightUnit==="lbs"?`${t.weight} ${t.weightUnit}`:t.weightUnit;return`${s} - ${t.sets} * ${t.reps} - ${g} - ${t.restInSec}s rest`}case"superset":return`${s} - ${t.sets} sets - ${t.items.length} items - ${t.restInSec}s rest`;default:return s}})()}),l()]}),a()]})},P=()=>{const{workout:t,unCompletedItems:n,completedItems:r,isLoading:i,isSuccess:u,isError:o,duration:a,isWorkoutStarted:l,onStart:h}=p();return i?e(b,{}):o?e(R,{}):!u||!t?null:e("main",{className:"page workout-details","data-testid":"workout-details",children:c("div",{className:"workout-details__wrapper",children:[c("section",{className:"workout-details__info",children:[c("div",{className:"workout-details__info__item",children:[e("h2",{children:"description:"}),c("h3",{children:[" ",t.description]})]}),c("div",{className:"workout-details__info__item",children:[e("h2",{children:"duration: "}),c("h3",{children:[a," min"]})]}),c("div",{className:"workout-details__info__item",children:[e("h2",{children:"type: "}),e("h3",{children:t.type})]}),"split"in t&&c("div",{className:"workout-details__info__item",children:[e("h2",{children:"split: "})," ",e("h3",{children:t.split})]}),!l&&e(_,{onClickFn:h,children:"Start"})]}),!l&&c(I,{children:[e("h2",{className:"workout-details__title",children:"items:"}),e(k,{items:t.items,className:"workout-details__list",render:s=>e(S,{item:s},s.id),dataTestId:"workout-items-list"})]}),l&&c(I,{children:[e(U,{}),e(k,{items:n,className:"workout-details__list",render:s=>e(S,{item:s},s.id),dataTestId:"workout-uncompleted-items-list"}),r.length>0&&c("div",{className:"workout-details__completed-list-container",children:[e("h2",{className:"workout-details__completed-list-container__title",children:"Completed Items:"}),e("hr",{className:"workout-details__completed-list-container__hr"}),e(k,{items:r,className:"workout-details__list",render:s=>e(S,{item:s},s.id),dataTestId:"workout-completed-items-list"})]})]})]})})};export{P as default};
