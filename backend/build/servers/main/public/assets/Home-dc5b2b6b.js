import{g as Fe,h as ne,a as ue,u as on,r as S,b as $e,c as jt,d as cn,e as Mt,f as ln,i as le,j as o,k as it,n as dt,l as m,B as T,S as J,m as je,o as Me,p as un,F as _e,_ as Xe,R as N,C as ft,q as dn,s as ht,t as fn,v as hn,w as pn,x as mn,G as gn,y as Bt,z as vn,A as yn,D as kn,E as bn}from"./index-a1d8b748.js";import{i as W,M as _n,u as wn}from"./intakeUtilService-1c08fabc.js";import{c as ve}from"./index-58c78652.js";import{F as In,a as Cn,L as Be}from"./index.esm-ec78e624.js";import{E as st}from"./ErrorMsg-cfeac1b6.js";import{f as M,_ as Ut,a as Wt,b as An,c as Pn,d as se,T as ot,p as X,L as z,e as ct,g as qt,D as Sn,h as On,i as Nn,j as xn,G as En,u as Rn,C as Ln,S as pt,k as ge,l as fe,A as Tn,m as Dn,n as mt,o as Fn,q as pe,r as $n,s as jn,t as Vt,v as Mn,w as Oe,x as gt,y as xe,z as Bn,B as Un,E as Wn}from"./generateCategoricalChart-1d138f9a.js";import{u as qn,W as Vn}from"./WorkoutEditMainInputs-b6a4a6fc.js";import{u as Qt,C as Ce}from"./index.esm-3e6870cc.js";import{D as Qn,S as Gn,P as Kn}from"./StrictModeDroppable-9264cdd3.js";import{E as Hn}from"./Empty-212e5666.js";import{W as zn}from"./WorkoutPreview-6b9fba69.js";/*!
 * Determine if an object is a Buffer
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */var Zn=function(t){return t!=null&&t.constructor!=null&&typeof t.constructor.isBuffer=="function"&&t.constructor.isBuffer(t)},Gt=Xn,Yn=[];function Xn(e,t){var n=0,r;if(!t)return Yn;if(e.FLAG==="long"){for(r=new Array(Math.ceil(t.length/2));n<t.length;)r[n/2]=t.slice(n,n+2),n+=2;return r}return t.split(e.FLAG==="num"?",":"")}var Jn=Gt,er=rr,tr=[].push,Ne="etaoinshrdlcumwfgypbvkjxqz".split(""),Ie=/\s+/,nr=["qwertzuop","yxcvbnm","qaw","say","wse","dsx","sy","edr","fdc","dx","rft","gfv","fc","tgz","hgb","gv","zhu","jhn","hb","uji","kjm","jn","iko","lkm"];function rr(e){var t=Object.create(null),n=Object.create(null),r=Object.create(null),a=[],i={in:[],out:[]},s=[],c=e.toString("utf8"),u=[],d=0,l=c.indexOf(`
`),f,v,h,p,y,g,_,A,O,b,x,k,w;for(r.KEY=[];l>-1;)P(c.slice(d,l)),d=l+1,l=c.indexOf(`
`,d);for(P(c.slice(d)),l=-1;++l<u.length;)if(v=u[l],f=v.split(Ie),h=f[0],h==="REP"){for(p=l+parseInt(f[1],10);++l<=p;)f=u[l].split(Ie),a.push([f[1],f[2]]);l--}else if(h==="ICONV"||h==="OCONV"){for(p=l+parseInt(f[1],10),A=i[h==="ICONV"?"in":"out"];++l<=p;)f=u[l].split(Ie),A.push([new RegExp(f[1],"g"),f[2]]);l--}else if(h==="COMPOUNDRULE"){for(p=l+parseInt(f[1],10);++l<=p;)for(b=u[l].split(Ie)[1],O=-1,s.push(b);++O<b.length;)n[b.charAt(O)]=[];l--}else if(h==="PFX"||h==="SFX"){for(p=l+parseInt(f[3],10),b={type:h,combineable:f[2]==="Y",entries:[]},t[f[1]]=b;++l<=p;){f=u[l].split(Ie),y=f[2],g=f[3].split("/"),_=f[4],A={add:"",remove:"",match:"",continuation:Jn(r,g[1])},g&&g[0]!=="0"&&(A.add=g[0]);try{y!=="0"&&(A.remove=h==="SFX"?vt(y):y),_&&_!=="."&&(A.match=h==="SFX"?vt(_):ar(_))}catch{A=null}A&&b.entries.push(A)}l--}else if(h==="TRY"){for(_=f[1],k=-1,x=[];++k<_.length;)w=_.charAt(k),w.toLowerCase()===w&&x.push(w);for(k=-1;++k<Ne.length;)_.indexOf(Ne[k])<0&&x.push(Ne[k]);r[h]=x}else h==="KEY"?tr.apply(r[h],f[1].split("|")):h==="COMPOUNDMIN"?r[h]=Number(f[1]):h==="ONLYINCOMPOUND"?(r[h]=f[1],n[f[1]]=[]):r[h]=f[1];return isNaN(r.COMPOUNDMIN)&&(r.COMPOUNDMIN=3),r.KEY.length||(r.KEY=nr),r.TRY||(r.TRY=Ne.concat()),r.KEEPCASE||(r.KEEPCASE=!1),{compoundRuleCodes:n,replacementTable:a,conversion:i,compoundRules:s,rules:t,flags:r};function P(R){R=R.trim(),R&&R.charCodeAt(0)!==35&&u.push(R)}}function vt(e){return new RegExp(e+"$")}function ar(e){return new RegExp("^"+e)}var Kt=ir;function ir(e,t){for(var n=-1;++n<t.length;)e=e.replace(t[n][0],t[n][1]);return e}var Ue=sr;function sr(e,t,n){return n&&t in e&&n.indexOf(e[t])>-1}var or=Ue,cr=lr;function lr(e,t){var n=-1;if(e.data[t])return!or(e.flags,"ONLYINCOMPOUND",e.data[t]);if(t.length>=e.flags.COMPOUNDMIN){for(;++n<e.compoundRules.length;)if(e.compoundRules[n].test(t))return!0}return!1}var ur=Kt,Ke=cr,Je=Ue,lt=dr;function dr(e,t,n){var r=t.trim(),a;if(!r)return null;if(r=ur(r,e.conversion.in),Ke(e,r))return!n&&Je(e.flags,"FORBIDDENWORD",e.data[r])?null:r;if(r.toUpperCase()===r){if(a=r.charAt(0)+r.slice(1).toLowerCase(),yt(e.flags,e.data[a],n))return null;if(Ke(e,a))return a}if(a=r.toLowerCase(),a!==r){if(yt(e.flags,e.data[a],n))return null;if(Ke(e,a))return a}return null}function yt(e,t,n){return Je(e,"KEEPCASE",t)||n||Je(e,"FORBIDDENWORD",t)}var fr=lt,hr=pr;function pr(e){return!!fr(this,e)}var mr=gr;function gr(e){var t=kt(e.charAt(0)),n=e.slice(1);return!n||(n=kt(n),t===n)?t:t==="u"&&n==="l"?"s":null}function kt(e){return e===e.toLowerCase()?"l":e===e.toUpperCase()?"u":null}var Ee=mr,bt=Kt,vr=Ue,yr=lt,kr=_r,br=[].push;function _r(e){var t=this,n={},r=[],a={},i,s,c=[],u,d,l,f,v,h,p,y,g,_,A,O,b,x,k,w,P,R,E,j,G,B,q;if(e=bt(e.trim(),t.conversion.in),!e||t.correct(e))return[];for(q=Ee(e),d=-1;++d<t.replacementTable.length;)for(s=t.replacementTable[d],l=e.indexOf(s[0]);l>-1;)c.push(e.replace(s[0],s[1])),l=e.indexOf(s[0],l+1);for(d=-1;++d<e.length;)for(y=e.charAt(d),_=e.slice(0,d),A=e.slice(d+1),b=y.toLowerCase(),O=b!==y,n={},l=-1;++l<t.flags.KEY.length;)if(g=t.flags.KEY[l],f=g.indexOf(b),!(f<0)){for(h=-1;++h<g.length;)if(h!==f){if(p=g.charAt(h),n[p])continue;n[p]=!0,O&&(p=p.toUpperCase()),c.push(_+p+A)}}for(d=-1,P=e.charAt(0),u=[""],R=1,E=0;++d<e.length;){for(y=P,P=e.charAt(d+1),_=e.slice(0,d),s=y===P?"":y+y,l=-1,v=u.length;++l<v;)l<=R&&u.push(u[l]+s),u[l]+=y;++E<3&&(R=u.length)}for(br.apply(c,u),u=[e],s=e.toLowerCase(),(e===s||q===null)&&u.push(e.charAt(0).toUpperCase()+s.slice(1)),s=e.toUpperCase(),e!==s&&u.push(s),i={state:{},weighted:a,suggestions:r},x=_t(t,i,u,c),k=0,R=Math.min(x.length,Math.pow(Math.max(15-e.length,3),3)),j=Math.max(Math.pow(10-e.length,3),1);!r.length&&k<R;)w=k+j,_t(t,i,x.slice(k,w)),k=w;for(r.sort(ee),u=[],G=[],d=-1;++d<r.length;)B=bt(r[d],t.conversion.out),s=B.toLowerCase(),G.indexOf(s)<0&&(u.push(B),G.push(s));return u;function ee(C,L){return Y(C,L)||te(C,L)||I(C,L)}function Y(C,L){return a[C]===a[L]?0:a[C]>a[L]?-1:1}function te(C,L){var $=Ee(C),K=Ee(L);return $===K?0:$===q?-1:K===q?1:void 0}function I(C,L){return C.localeCompare(L)}}function _t(e,t,n,r){var a=e.flags.TRY,i=e.data,s=e.flags,c=[],u=-1,d,l,f,v,h,p,y,g,_,A,O,b,x;if(r)for(;++u<r.length;)k(r[u],!0);for(u=-1;++u<n.length;)for(d=n[u],l="",f="",v=d.charAt(0),h=d,p=d.slice(1),y=v.toLowerCase()!==v,g=Ee(d),_=-1;++_<=d.length;)for(l+=f,A=h,h=p,p=h.slice(1),f=v,v=d.charAt(_+1),O=y,v&&(y=v.toLowerCase()!==v),h&&O!==y&&(k(l+w(h)),k(l+w(v)+w(f)+p)),k(l+h),h&&k(l+v+f+p),x=-1;++x<a.length;)b=a[x],O&&b!==b.toUpperCase()?(g!=="s"&&(k(l+b+A),k(l+b+h)),b=b.toUpperCase(),k(l+b+A),k(l+b+h)):(k(l+b+A),k(l+b+h));return c;function k(P,R){var E=t.state[P],j;E!==!!E&&(c.push(P),j=yr(e,P),E=j&&!vr(s,"NOSUGGEST",i[j]),t.state[P]=E,E&&(t.weighted[P]=R?10:0,t.suggestions.push(P))),E&&t.weighted[P]++}function w(P){var R=P.charAt(0);return(R.toLowerCase()===R?R.toUpperCase():R.toLowerCase())+P.slice(1)}}var wr=lt,wt=Ue,Ir=Cr;function Cr(e){var t=this,n=wr(t,e,!0);return{correct:t.correct(e),forbidden:!!(n&&wt(t.flags,"FORBIDDENWORD",t.data[n])),warn:!!(n&&wt(t.flags,"WARN",t.data[n]))}}var Ar=Ht;function Ht(e,t,n,r){for(var a=-1,i,s,c,u,d;++a<t.entries.length;)if(i=t.entries[a],u=i.continuation,d=-1,(!i.match||i.match.test(e))&&(s=i.remove?e.replace(i.remove,""):e,s=t.type==="SFX"?s+i.add:i.add+s,r.push(s),u&&u.length))for(;++d<u.length;)c=n[u[d]],c&&Ht(s,c,n,r);return r}var It=Ar,zt=Or,Pr=[].push,et=[];function Sr(e,t,n){var r=e[t];t in e?r===et?e[t]=n.concat():Pr.apply(r,n):e[t]=n.concat()}function Or(e,t,n,r){var a=-1,i,s,c,u,d,l,f;for((!("NEEDAFFIX"in r.flags)||n.indexOf(r.flags.NEEDAFFIX)<0)&&Sr(e,t,n);++a<n.length;)if(i=r.rules[n[a]],n[a]in r.compoundRuleCodes&&r.compoundRuleCodes[n[a]].push(t),i){for(l=It(t,i,r.rules,[]),s=-1;++s<l.length;)if(l[s]in e||(e[l[s]]=et),i.combineable){for(c=a;++c<n.length;)if(d=r.rules[n[c]],d&&d.combineable&&i.type!==d.type)for(f=It(l[s],d,r.rules,[]),u=-1;++u<f.length;)f[u]in e||(e[f[u]]=et)}}}var Nr=zt,xr=Rr,Er=[];function Rr(e,t){var n=this;return Nr(n.data,e,n.data[t]||Er,n),n}var Lr=Tr;function Tr(e){var t=this;return delete t.data[e],t}var Dr=Fr;function Fr(){return this.flags.WORDCHARS||null}var $r=Gt,jr=zt,Mr=Br,Ct=/\s/g;function Br(e,t,n){for(var r=e.toString("utf8"),a=r.indexOf(`
`)+1,i=r.indexOf(`
`,a);i>-1;)r.charCodeAt(a)!==9&&At(r.slice(a,i),t,n),a=i+1,i=r.indexOf(`
`,a);At(r.slice(a),t,n)}function At(e,t,n){for(var r=e.indexOf("/"),a=e.indexOf("#"),i="",s,c;r>-1&&e.charCodeAt(r-1)===92;)e=e.slice(0,r-1)+e.slice(r),r=e.indexOf("/",r);a>-1?r>-1&&r<a?(s=e.slice(0,r),Ct.lastIndex=r+1,c=Ct.exec(e),i=e.slice(r+1,c?c.index:void 0)):s=e.slice(0,a):r>-1?(s=e.slice(0,r),i=e.slice(r+1)):s=e,s=s.trim(),s&&jr(n,s,$r(t.flags,i.trim()),t)}var Ur=Mr,Wr=qr;function qr(e){var t=this,n=-1,r,a,i,s;for(Ur(e,t,t.data);++n<t.compoundRules.length;){for(r=t.compoundRules[n],a="",s=-1;++s<r.length;)i=r.charAt(s),a+=t.compoundRuleCodes[i].length?"(?:"+t.compoundRuleCodes[i].join("|")+")":i;t.compoundRules[n]=new RegExp(a,"i")}return t}var Vr=Qr;function Qr(e){var t=this,n=e.toString("utf8").split(`
`),r=-1,a,i,s,c;for(t.flags.FORBIDDENWORD===void 0&&(t.flags.FORBIDDENWORD=!1),c=t.flags.FORBIDDENWORD;++r<n.length;)a=n[r].trim(),a&&(a=a.split("/"),s=a[0],i=s.charAt(0)==="*",i&&(s=s.slice(1)),t.add(s,a[1]),i&&t.data[s].push(c));return t}var Pt=Zn,Gr=er,Kr=Re,re=Re.prototype;re.correct=hr;re.suggest=kr;re.spell=Ir;re.add=xr;re.remove=Lr;re.wordCharacters=Dr;re.dictionary=Wr;re.personal=Vr;function Re(e,t){var n=-1,r;if(!(this instanceof Re))return new Re(e,t);if(typeof e=="string"||Pt(e)?(typeof t=="string"||Pt(t))&&(r=[{dic:t}]):e&&("length"in e?(r=e,e=e[0]&&e[0].aff):(e.dic&&(r=[e]),e=e.aff)),!e)throw new Error("Missing `aff` in dictionary");if(e=Gr(e),this.data=Object.create(null),this.compoundRuleCodes=e.compoundRuleCodes,this.replacementTable=e.replacementTable,this.conversion=e.conversion,this.compoundRules=e.compoundRules,this.rules=e.rules,this.flags=e.flags,r)for(;++n<r.length;)r[n].dic&&this.dictionary(r[n].dic)}const Hr=Fe(Kr);function zr(e,t){if(!e||!t)return 0;const n=t.weight||e.weight,r=Number((n*33).toFixed(2)),a=t.intakes.filter(i=>i.isRecorded).reduce((i,s)=>s.items.reduce((c,u)=>{if(u.name.toLocaleLowerCase()==="water")switch(u.unit){case"ml":return c+u.quantity;case"cup":return c+u.quantity*250;default:return c}return c},i),0)||0;return Number(((r-a)/1e3).toFixed(2))}const Zr={calcRecommendedWaterIntake:zr};function Yr(e){return{type:e,response:null,status:"idle",error:null}}const He={getDefaultNutritionQuery:Yr};async function Xr(){const e=await ne.get("intake/favorite");return ue(e)}async function Jr(e){const t=await ne.post("intake/favorite",e);return ue(t)}async function ea(e){const t=await ne.patch(`intake/favorite/${e.id}`,e);return ue(t)}async function ta(e){await ne.delete(`intake/favorite/${e}`)}const We={getUserFavoriteIntakes:Xr,addUserFavoriteIntake:Jr,updateUserFavoriteIntake:ea,removeUserFavoriteIntake:ta};function na(){const{data:e,error:t,isLoading:n,isSuccess:r,isError:a}=on({queryKey:["favoriteIntakes"],queryFn:We.getUserFavoriteIntakes}),i=!!e&&e.length===0;return{favoriteIntakes:e,error:t,isLoading:n,isSuccess:r,isError:a,isEmpty:i}}var F=(e=>(e.IntakeEdit="IntakeEdit",e.IntakeList="IntakeList",e.UnRecordedIntakeList="UnRecordedIntakeList",e.FavoriteIntake="FavoriteIntake",e.Water="Water",e.WeightWaistInput="WeightWaistInput",e.Workouts="Workouts",e.Query="Query",e))(F||{});const Zt=S.createContext(void 0);function ra({children:e}){const{loggedInUser:t}=$e(),{dailyData:n,isLoading:r,isSuccess:a,isError:i}=jt(),{updateDailyData:s,isLoading:c}=cn(),{backgroundColor:u,color:d}=Mt(),l={color:d,border:`1px solid ${d}`},{favoriteIntakes:f,isLoading:v,isSuccess:h,isError:p,isEmpty:y}=na(),[g,_]=ln(),[A,O]=S.useState(g.get("tab")||"IntakeEdit"),[b,x]=S.useState(W.getDefaultIntake()),[k,w]=S.useState(b.items[0].id),[P,R]=S.useState(He.getDefaultNutritionQuery("chatGPT")),[E,j]=S.useState(He.getDefaultNutritionQuery("ninjaAPI")),[G,B]=S.useState(He.getDefaultNutritionQuery("usdaAPI")),q=(n==null?void 0:n.intakes.filter(U=>U.isRecorded))||[],ee=(n==null?void 0:n.intakes.filter(U=>!U.isRecorded))||[],Y=le.getTotalCalories(n),te=le.calcRemainingCalories(t,n),I=(n==null?void 0:n.targetCaloricIntake)??(t==null?void 0:t.targetCaloricIntakePerDay)??0,C=le.calcEstimatedBodyFatStatusPerDay(t,n),L=Math.round(Y/I*100),$=Math.round(te/I*100),K=Zr.calcRecommendedWaterIntake(t,n);S.useEffect(()=>{if(!a||!n||n!=null&&n.weight||n!=null&&n.isWeightWaistIgnored)return;O("WeightWaistInput");const U=new URLSearchParams({tab:"WeightWaistInput"});_(U)},[n,a]);const de={dailyData:n,isLoading:r,isSuccess:a,isError:i,updateDailyData:s,isLoadingUpdate:c,recordedIntakes:q,unrecordedIntakes:ee,remainingCalories:te,consumedCalories:Y,targetCaloricIntakePerDay:I,estimatedKGChange:C,openedTab:A,setOpenedTab:O,recommendedWaterIntake:K,intake:b,setIntake:x,calConsumedPct:L,calRemainingPct:$,chatGPTQuery:P,setChatGPTQuery:R,ninjaAPIQuery:E,setNinjaAPIQuery:j,USDAAPIQuery:G,setUSDAAPIQuery:B,currIntakeItemId:k,setCurrIntakeItemId:w,favoriteIntakes:f,isLoadingFavoriteIntakes:v,isSuccessFavoriteIntakes:h,isErrorFavoriteIntakes:p,isEmptyFavoriteIntakes:y,setSearchParams:_,backgroundColor:u,color:d,btnStyle:l};return o(Zt.Provider,{value:de,children:e})}function Q(){const e=S.useContext(Zt);if(e===void 0)throw new Error("useDayEdit must be used within a DayEditProvider");return e}const aa="calorie";async function ia(e){const t=await ne.post(`${aa}/item`,e);return ue(t)}const sa={getCaloriesForItem:ia},Yt=S.createContext(void 0);function oa({intakeItem:e,children:t}){const{intake:n,setIntake:r,currIntakeItemId:a,setCurrIntakeItemId:i,btnStyle:s}=Q(),c=n.items.length===1,u=e.id===a,[d,l]=S.useState(!1),[f,v]=S.useState(""),[h,p]=S.useState(!1),[y,g]=S.useState([]),[_,A]=S.useState(null),O=S.useRef(null),b=y.length>0&&y[0].suggestions.length>0&&!!e.name.length&&!!_;function x(I){I!==a&&i(I)}function k(I){I.preventDefault();const{value:C,name:L}=I.target;switch(L){case"name":if(w({...e,name:C}),C.length||g([]),!O.current)return;O.current(C);break;case"quantity":{const $={...e,quantity:Number(C)};$.caloriesPer100g&&($.calories=$.caloriesPer100g*($.quantity/100)),w($);break}case"calories":{const $={...e,calories:Number(C)};delete $.caloriesPer100g,w($),v("caloriesPer100g");break}case"caloriesPer100g":{const K=Number(C)*(e.quantity/100);w({...e,caloriesPer100g:Number(C),calories:K}),v("calories");break}}}function w(I){r(C=>({...C,items:C.items.map(L=>L.id===I.id?I:L)}))}function P(){const I=W.getQuantityStepPerUnit(e.unit);if(e.quantity-I<1)return;const C={...e,quantity:e.quantity-I};C.caloriesPer100g&&(C.calories=C.caloriesPer100g*(C.quantity/100)),w(C)}function R(){const I=W.getQuantityStepPerUnit(e.unit),C={...e,quantity:e.quantity+I};C.caloriesPer100g&&(C.calories=C.caloriesPer100g*(C.quantity/100)),w(C)}function E(){const I=W.units.indexOf(e.unit),C=I===W.units.length-1?W.units[0]:W.units[I+1],L=W.getUnitDefaultQuantity(C);w({...e,unit:C,quantity:L})}function j(){const I={...e};d&&(delete I.calories,delete I.caloriesPer100g,v("")),l(C=>!C),w(I)}async function G(){if(!e.name.length)return dt.error("Please enter a food name!");try{p(!0);const I=await sa.getCaloriesForItem(e);w({...e,calories:I}),l(!0)}catch(I){console.error(I),dt.error("Failed to calculate calories!")}finally{p(!1)}}function B(I,C){const L=e.name.replace(I,C),$=y.filter(K=>K.original!==I);g($),w({...e,name:L})}function q(I){const C=y.filter(L=>L.original!==I);g(C)}function ee(){const I=W.getDefaultIntakeItem();r(C=>({...C,items:[...C.items,I]})),i(I.id)}function Y(){var K,de;if(n.items.length===1)return;const I=n.items.findIndex(U=>U.id===e.id),C=(K=n.items[I-1])==null?void 0:K.id,L=(de=n.items[I+1])==null?void 0:de.id,$=[...n.items];$.splice(I,1),r(U=>({...U,items:$})),i(L||C)}S.useEffect(()=>{Promise.all([fetch("/assets/dictionaries/en_US.aff").then(I=>I.text()),fetch("/assets/dictionaries/en_US.dic").then(I=>I.text())]).then(([I,C])=>{const L=new Hr(I,C);A(L)}).catch(I=>{console.error("Failed to load dictionaries:",I)})},[]),S.useEffect(()=>{function I(C){if(!_)return;const L=new Set(["nes","ness"]),de=C.split(" ").filter(U=>!L.has(U)&&U.length>3).map(U=>({original:U,suggestions:_.suggest(U)}));g(de)}O.current=it(I,1e3).debouncedFunc},[_]);const te={intakeItem:e,isOneItem:c,isCurrIntakeItem:u,isManual:d,inputFaded:f,setInputFaded:v,isLoadingCal:h,suggestions:y,setSuggestions:g,isSuggestionListShown:b,handleNameInputClick:x,handleInputChange:k,decreaseQuantity:P,increaseQuantity:R,handleUnitBtnClick:E,handleToggleManual:j,handleCalcBtnClick:G,handleSuggestionClick:B,handleIgnoreSuggestionClick:q,handleAddButtonClick:ee,handleRemoveButtonClick:Y,btnStyle:s};return o(Yt.Provider,{value:te,children:t})}function we(){const e=S.useContext(Yt);if(!e)throw new Error("useIntakeItemEdit must be used within an IntakeItemEditProvider");return e}const ca=()=>{const{suggestions:e,handleSuggestionClick:t,handleIgnoreSuggestionClick:n}=we();return o("ul",{className:"spelling-suggestion-list","data-testid":"spelling-suggestion-list",children:e.map((r,a)=>m("li",{className:"spelling-suggestion-list__item",children:[r.suggestions.map(i=>o(T,{className:"intake-item-edit__btn spelling-suggestion-list__btn",onClickFn:()=>t(r.original,i),dataTestId:"spelling-suggestion-list-btn",children:o("span",{children:i})},i)),o(T,{className:"intake-item-edit__btn spelling-suggestion-list__btn",dataTestId:"ignore-suggestion-btn",onClickFn:()=>n(r.original),children:o("span",{children:"ignore"})})]},a))})};const la=()=>{const{intakeItem:e,inputFaded:t,setInputFaded:n,handleInputChange:r}=we(),a=e.calories?Math.round(e.calories):"";function i(s){t===s&&n("")}return m("div",{className:"intake-item-edit__manuall-calorie-edit","data-testid":"intake-item-edit-manuall-calorie-edit",children:[o("input",{type:"number",name:"calories",className:ve("intake-item-input",{faded:t==="calories"}),value:a,placeholder:"Calories",onChange:r,onClick:()=>i("calories")}),o("input",{type:"number",name:"caloriesPer100g",className:ve("intake-item-input",{faded:t==="caloriesPer100g"}),value:e.caloriesPer100g||"",placeholder:"Calories per 100g",onChange:r,onClick:()=>i("caloriesPer100g")})]})};const ua=()=>{const{intakeItem:e,isManual:t,isLoadingCal:n,handleInputChange:r,decreaseQuantity:a,increaseQuantity:i,handleUnitBtnClick:s,handleToggleManual:c,handleCalcBtnClick:u}=we();return m("section",{className:"intake-item-edit__inputs-btns","data-testid":"intake-item-edit-inputs-btns",children:[m("div",{className:"quantity-input-container",children:[o(T,{className:"quantity-input-btn",onClickFn:a,children:o(In,{})}),o("input",{type:"number",name:"quantity",className:"intake-item-input quantity-input",value:e.quantity,onChange:r}),o(T,{className:"quantity-input-btn",onClickFn:i,children:o(Cn,{})})]}),o(T,{onClickFn:s,className:"intake-item-edit__btn",children:o("span",{children:e.unit})}),o(T,{onClickFn:c,className:"intake-item-edit__btn",children:o("span",{children:t?"Manual":"Auto"})}),o(T,{onClickFn:u,className:"intake-item-edit__btn calc-calories-btn",children:n?o(J,{containerSize:{width:"100%"}}):o("span",{children:"calc"})})]})},da=()=>{const{isOneItem:e,handleAddButtonClick:t,handleRemoveButtonClick:n,btnStyle:r}=we();return m("section",{className:"intake-edit-item__btns-container","data-testid":"intake-item-edit-btns",children:[!e&&o(T,{onClickFn:n,children:"remove item"}),o(T,{style:r,onClickFn:t,children:"add item"})]})},fa=()=>{const{intakeItem:e,handleNameInputClick:t,handleInputChange:n}=we();return o("input",{type:"text",name:"name",className:"intake-item-input",value:e.name,onChange:n,spellCheck:!0,autoComplete:"off",placeholder:"Enter food name",onClick:()=>t(e.id)})},ha=()=>{const{isCurrIntakeItem:e,isManual:t,isSuggestionListShown:n}=we();return m("section",{className:"intake-item-edit","data-testid":"intake-item-edit",children:[o(fa,{}),n&&o(ca,{}),o(ua,{}),t&&o(la,{}),e&&o(da,{})]})};function Xt(){const e=je(),{mutate:t,isLoading:n}=Me({mutationFn:We.addUserFavoriteIntake,onSuccess:()=>{e.invalidateQueries(["favoriteIntakes"])}});return{addFavoriteIntake:t,isLoading:n}}function Jt(){const e=je(),{mutate:t,isLoading:n}=Me({mutationFn:r=>We.updateUserFavoriteIntake(r),onSuccess:()=>{e.invalidateQueries(["favoriteIntakes"])}});return{updateFavoriteIntake:t,isLoading:n}}const pa=()=>{const{dailyData:e,color:t}=Q();if(!e)return null;const r=W.sortIntakesByRecordedAt(e.intakes).findLast(i=>i.isRecorded&&i.type==="food");if(!r)return null;const a=un(r.recordedAt);return m("h5",{className:"last-time-you-ate-title",style:{color:t},children:["Last time you ate: ",a]})};const ma=()=>{const{loggedInUser:e}=$e(),{intake:t,dailyData:n,color:r}=Q();if(!n||!t||!t.isRecorded)return null;const a=Math.round(t.items.reduce((l,f)=>f.calories===void 0?l:l+f.calories,0));if(a<=0)return null;const i={...n,intakes:n==null?void 0:n.intakes.filter(l=>l.id!==t.id)},s=le.getTotalCalories(i),c=le.calcRemainingCalories(e,i),u=s+a,d=c-a;return m("section",{className:"pre-save-calorie-count",style:{color:r},children:[m("p",{children:[o("strong",{children:"Total:"})," ",o("span",{children:a})]}),m("p",{children:[o("strong",{children:"Consumed:"})," ",o("span",{children:u})]}),m("p",{children:[o("strong",{children:"Remaining:"})," ",o("span",{children:d})]})]})};const ga=()=>{const{dailyData:e,isLoading:t,isLoadingUpdate:n,intake:r,updateDailyData:a,setIntake:i,backgroundColor:s,btnStyle:c}=Q(),{addFavoriteIntake:u,isLoading:d}=Xt(),{updateFavoriteIntake:l,isLoading:f}=Jt(),v=t||n||d||f,h=r.recordedAt&&r.isRecorded;function p(k){k.preventDefault();const{value:w}=k.target;i(P=>({...P,name:w}))}function y(){const k=r.type==="food"?"drink":"food";i(w=>({...w,type:k}))}function g(k){k.preventDefault();const{value:w}=k.target,[P,R]=w.split(":"),E=new Date(r.recordedAt);E.setHours(+P),E.setMinutes(+R),i(j=>({...j,recordedAt:E}))}function _(){i(W.getDefaultIntake())}function A(k){if(k.preventDefault(),!r.items.every(P=>P.name.length&&P.quantity>0))return Xe.error("Please fill all intake items");r.recordedAt=null,r.isRecorded=!1,"userId"in r?l(r):u(r),i(W.getDefaultIntake())}function O(){i(k=>({...k,recordedAt:k.isRecorded?new Date:null,isRecorded:!k.isRecorded}))}function b(k){if(k.preventDefault(),!e)return;if(!r.items.every(E=>E.name.length&&E.quantity>0))return Xe.error("Please fill all intake items");r.isRecorded&&!r.recordedAt&&(r.recordedAt=new Date);const R=!e.intakes.some(E=>E.id===r.id)?[...e.intakes,r]:e.intakes.map(E=>E.id===r.id?r:E);a({id:e.id,data:{intakes:R}}),i(W.getDefaultIntake())}function x(k){const w=new Date(k),P=w.getTimezoneOffset();return w.setMinutes(w.getMinutes()-P),w.toISOString().slice(11,16)}return m("form",{className:"intake-edit",onSubmit:b,"data-testid":"intake-edit",children:[v&&o(J,{containerSize:{height:"75px",width:"100%"}}),!v&&m(_e,{children:[m("header",{className:"intake-edit__header","data-testid":"intake-edit-header",children:[m("div",{className:"intake-edit__header__input-name-btn-type",children:[o("input",{type:"text",placeholder:"Name your intake",autoComplete:"off",value:r.name||"",onChange:p,className:"intake-edit__header__name-input","data-testid":"intake-edit-name-input"}),o(T,{onClickFn:y,className:"intake-edit-btn",children:o("span",{children:r.type})})]}),h&&o("input",{className:"intake-edit__header__time-input",type:"time",value:x(r.recordedAt),onChange:g,"data-testid":"intake-edit-time-input"})]}),o(Be,{items:r.items,render:k=>o(oa,{intakeItem:k,children:o(ha,{})},k.id),className:"intake-edit-item-list",dataTestId:"intake-edit-item-list"})]}),m("div",{className:"intake-edit__info-container","data-testid":"intake-edit-info-container",children:[o(pa,{}),o(ma,{})]}),m("div",{className:"intake-edit-btns-container","data-testid":"intake-edit-btns-container",style:{backgroundColor:s},children:[o(T,{style:c,onClickFn:_,className:"intake-edit-btn",children:"clear"}),o(T,{style:c,onClickFn:A,className:"intake-edit-btn",type:"submit",children:"Save To Fav"}),o(T,{style:c,onClickFn:O,className:"intake-edit-btn btn-toggle-save-later "+ve({clicked:!r.isRecorded}),children:"Save Later"}),o(T,{style:c,onClickFn:k=>b(k),className:"intake-edit-btn",type:"submit",children:"Save Intake"})]})]})};const va=()=>{const{dailyData:e,setOpenedTab:t,setSearchParams:n,color:r}=Q();if(!e)return null;function a(s){t(s);const c=new URLSearchParams({tab:s});n(c)}const i=[{name:"add",value:F.IntakeEdit},{name:"intakes",value:F.IntakeList,isShown:e==null?void 0:e.intakes.some(s=>s.isRecorded===!0)},{name:"unrecorded",value:F.UnRecordedIntakeList,isShown:e==null?void 0:e.intakes.some(s=>s.isRecorded===!1)},{name:"favorites",value:F.FavoriteIntake},{name:"water",value:F.Water},{name:"weight",value:F.WeightWaistInput},{name:"workouts",value:F.Workouts},{name:"query",value:F.Query}];return o("ul",{className:"day-edit__filter","data-testid":"day-edit-filter",children:i.map(s=>s.isShown===!1?null:o("li",{className:"filter__item",children:o(T,{style:{color:r,border:`1px solid ${r}`},onClickFn:()=>a(s.value),children:s.name})},s.value))})};var ya=["points","className","baseLinePoints","connectNulls"];function me(){return me=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},me.apply(this,arguments)}function ka(e,t){if(e==null)return{};var n=ba(e,t),r,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)r=i[a],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function ba(e,t){if(e==null)return{};var n={},r=Object.keys(e),a,i;for(i=0;i<r.length;i++)a=r[i],!(t.indexOf(a)>=0)&&(n[a]=e[a]);return n}function St(e){return Ca(e)||Ia(e)||wa(e)||_a()}function _a(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function wa(e,t){if(e){if(typeof e=="string")return tt(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return tt(e,t)}}function Ia(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function Ca(e){if(Array.isArray(e))return tt(e)}function tt(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Ot=function(t){return t&&t.x===+t.x&&t.y===+t.y},Aa=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],n=[[]];return t.forEach(function(r){Ot(r)?n[n.length-1].push(r):n[n.length-1].length>0&&n.push([])}),Ot(t[0])&&n[n.length-1].push(t[0]),n[n.length-1].length<=0&&(n=n.slice(0,-1)),n},Ae=function(t,n){var r=Aa(t);n&&(r=[r.reduce(function(i,s){return[].concat(St(i),St(s))},[])]);var a=r.map(function(i){return i.reduce(function(s,c,u){return"".concat(s).concat(u===0?"M":"L").concat(c.x,",").concat(c.y)},"")}).join("");return r.length===1?"".concat(a,"Z"):a},Pa=function(t,n,r){var a=Ae(t,r);return"".concat(a.slice(-1)==="Z"?a.slice(0,-1):a,"L").concat(Ae(n.reverse(),r).slice(1))},Sa=function(t){var n=t.points,r=t.className,a=t.baseLinePoints,i=t.connectNulls,s=ka(t,ya);if(!n||!n.length)return null;var c=ve("recharts-polygon",r);if(a&&a.length){var u=s.stroke&&s.stroke!=="none",d=Pa(n,a,i);return N.createElement("g",{className:c},N.createElement("path",me({},M(s,!0),{fill:d.slice(-1)==="Z"?s.fill:"none",stroke:"none",d})),u?N.createElement("path",me({},M(s,!0),{fill:"none",d:Ae(n,i)})):null,u?N.createElement("path",me({},M(s,!0),{fill:"none",d:Ae(a,i)})):null)}var l=Ae(n,i);return N.createElement("path",me({},M(s,!0),{fill:l.slice(-1)==="Z"?s.fill:"none",className:c,d:l}))},Oa=Ut,Na=Wt,xa=An;function Ea(e,t){return e&&e.length?Oa(e,Na(t),xa):void 0}var Ra=Ea;const La=Fe(Ra);var Ta=Ut,Da=Pn,Fa=Wt;function $a(e,t){return e&&e.length?Ta(e,Fa(t),Da):void 0}var ja=$a;const Ma=Fe(ja);var Ba=["cx","cy","angle","ticks","axisLine"],Ua=["ticks","tick","angle","tickFormatter","stroke"];function ye(e){"@babel/helpers - typeof";return ye=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ye(e)}function Pe(){return Pe=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Pe.apply(this,arguments)}function Nt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function ae(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Nt(Object(n),!0).forEach(function(r){qe(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Nt(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function xt(e,t){if(e==null)return{};var n=Wa(e,t),r,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)r=i[a],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function Wa(e,t){if(e==null)return{};var n={},r=Object.keys(e),a,i;for(i=0;i<r.length;i++)a=r[i],!(t.indexOf(a)>=0)&&(n[a]=e[a]);return n}function qa(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Et(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,en(r.key),r)}}function Va(e,t,n){return t&&Et(e.prototype,t),n&&Et(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function Qa(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&nt(e,t)}function nt(e,t){return nt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,a){return r.__proto__=a,r},nt(e,t)}function Ga(e){var t=za();return function(){var r=Le(e),a;if(t){var i=Le(this).constructor;a=Reflect.construct(r,arguments,i)}else a=r.apply(this,arguments);return Ka(this,a)}}function Ka(e,t){if(t&&(ye(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Ha(e)}function Ha(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function za(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Le(e){return Le=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Le(e)}function qe(e,t,n){return t=en(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function en(e){var t=Za(e,"string");return ye(t)==="symbol"?t:String(t)}function Za(e,t){if(ye(e)!=="object"||e===null)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(ye(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Ve=function(e){Qa(n,e);var t=Ga(n);function n(){return qa(this,n),t.apply(this,arguments)}return Va(n,[{key:"getTickValueCoord",value:function(a){var i=a.coordinate,s=this.props,c=s.angle,u=s.cx,d=s.cy;return X(u,d,i,c)}},{key:"getTickTextAnchor",value:function(){var a=this.props.orientation,i;switch(a){case"left":i="end";break;case"right":i="start";break;default:i="middle";break}return i}},{key:"getViewBox",value:function(){var a=this.props,i=a.cx,s=a.cy,c=a.angle,u=a.ticks,d=Ma(u,function(f){return f.coordinate||0}),l=La(u,function(f){return f.coordinate||0});return{cx:i,cy:s,startAngle:c,endAngle:c,innerRadius:l.coordinate||0,outerRadius:d.coordinate||0}}},{key:"renderAxisLine",value:function(){var a=this.props,i=a.cx,s=a.cy,c=a.angle,u=a.ticks,d=a.axisLine,l=xt(a,Ba),f=u.reduce(function(y,g){return[Math.min(y[0],g.coordinate),Math.max(y[1],g.coordinate)]},[1/0,-1/0]),v=X(i,s,f[0],c),h=X(i,s,f[1],c),p=ae(ae(ae({},M(l)),{},{fill:"none"},M(d)),{},{x1:v.x,y1:v.y,x2:h.x,y2:h.y});return N.createElement("line",Pe({className:"recharts-polar-radius-axis-line"},p))}},{key:"renderTicks",value:function(){var a=this,i=this.props,s=i.ticks,c=i.tick,u=i.angle,d=i.tickFormatter,l=i.stroke,f=xt(i,Ua),v=this.getTickTextAnchor(),h=M(f),p=M(c),y=s.map(function(g,_){var A=a.getTickValueCoord(g),O=ae(ae(ae(ae({textAnchor:v,transform:"rotate(".concat(90-u,", ").concat(A.x,", ").concat(A.y,")")},h),{},{stroke:"none",fill:l},p),{},{index:_},A),{},{payload:g});return N.createElement(z,Pe({className:"recharts-polar-radius-axis-tick",key:"tick-".concat(_)},ct(a.props,g,_)),n.renderTickItem(c,O,d?d(g.value,_):g.value))});return N.createElement(z,{className:"recharts-polar-radius-axis-ticks"},y)}},{key:"render",value:function(){var a=this.props,i=a.ticks,s=a.axisLine,c=a.tick;return!i||!i.length?null:N.createElement(z,{className:"recharts-polar-radius-axis"},s&&this.renderAxisLine(),c&&this.renderTicks(),qt.renderCallByParent(this.props,this.getViewBox()))}}],[{key:"renderTickItem",value:function(a,i,s){var c;return N.isValidElement(a)?c=N.cloneElement(a,i):se(a)?c=a(i):c=N.createElement(ot,Pe({},i,{className:"recharts-polar-radius-axis-tick-value"}),s),c}}]),n}(S.PureComponent);qe(Ve,"displayName","PolarRadiusAxis");qe(Ve,"axisType","radiusAxis");qe(Ve,"defaultProps",{type:"number",radiusAxisId:0,cx:0,cy:0,angle:0,orientation:"right",stroke:"#ccc",axisLine:!0,tick:!0,tickCount:5,allowDataOverflow:!1,scale:"auto",allowDuplicatedCategory:!0});function ke(e){"@babel/helpers - typeof";return ke=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ke(e)}function oe(){return oe=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},oe.apply(this,arguments)}function Rt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function ie(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Rt(Object(n),!0).forEach(function(r){Qe(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Rt(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Ya(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Lt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,tn(r.key),r)}}function Xa(e,t,n){return t&&Lt(e.prototype,t),n&&Lt(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function Ja(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&rt(e,t)}function rt(e,t){return rt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,a){return r.__proto__=a,r},rt(e,t)}function ei(e){var t=ri();return function(){var r=Te(e),a;if(t){var i=Te(this).constructor;a=Reflect.construct(r,arguments,i)}else a=r.apply(this,arguments);return ti(this,a)}}function ti(e,t){if(t&&(ke(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return ni(e)}function ni(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ri(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Te(e){return Te=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Te(e)}function Qe(e,t,n){return t=tn(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function tn(e){var t=ai(e,"string");return ke(t)==="symbol"?t:String(t)}function ai(e,t){if(ke(e)!=="object"||e===null)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(ke(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var ii=Math.PI/180,Tt=1e-5,Ge=function(e){Ja(n,e);var t=ei(n);function n(){return Ya(this,n),t.apply(this,arguments)}return Xa(n,[{key:"getTickLineCoord",value:function(a){var i=this.props,s=i.cx,c=i.cy,u=i.radius,d=i.orientation,l=i.tickSize,f=l||8,v=X(s,c,u,a.coordinate),h=X(s,c,u+(d==="inner"?-1:1)*f,a.coordinate);return{x1:v.x,y1:v.y,x2:h.x,y2:h.y}}},{key:"getTickTextAnchor",value:function(a){var i=this.props.orientation,s=Math.cos(-a.coordinate*ii),c;return s>Tt?c=i==="outer"?"start":"end":s<-Tt?c=i==="outer"?"end":"start":c="middle",c}},{key:"renderAxisLine",value:function(){var a=this.props,i=a.cx,s=a.cy,c=a.radius,u=a.axisLine,d=a.axisLineType,l=ie(ie({},M(this.props)),{},{fill:"none"},M(u));if(d==="circle")return N.createElement(Sn,oe({className:"recharts-polar-angle-axis-line"},l,{cx:i,cy:s,r:c}));var f=this.props.ticks,v=f.map(function(h){return X(i,s,c,h.coordinate)});return N.createElement(Sa,oe({className:"recharts-polar-angle-axis-line"},l,{points:v}))}},{key:"renderTicks",value:function(){var a=this,i=this.props,s=i.ticks,c=i.tick,u=i.tickLine,d=i.tickFormatter,l=i.stroke,f=M(this.props),v=M(c),h=ie(ie({},f),{},{fill:"none"},M(u)),p=s.map(function(y,g){var _=a.getTickLineCoord(y),A=a.getTickTextAnchor(y),O=ie(ie(ie({textAnchor:A},f),{},{stroke:"none",fill:l},v),{},{index:g,payload:y,x:_.x2,y:_.y2});return N.createElement(z,oe({className:"recharts-polar-angle-axis-tick",key:"tick-".concat(g)},ct(a.props,y,g)),u&&N.createElement("line",oe({className:"recharts-polar-angle-axis-tick-line"},h,_)),c&&n.renderTickItem(c,O,d?d(y.value,g):y.value))});return N.createElement(z,{className:"recharts-polar-angle-axis-ticks"},p)}},{key:"render",value:function(){var a=this.props,i=a.ticks,s=a.radius,c=a.axisLine;return s<=0||!i||!i.length?null:N.createElement(z,{className:"recharts-polar-angle-axis"},c&&this.renderAxisLine(),this.renderTicks())}}],[{key:"renderTickItem",value:function(a,i,s){var c;return N.isValidElement(a)?c=N.cloneElement(a,i):se(a)?c=a(i):c=N.createElement(ot,oe({},i,{className:"recharts-polar-angle-axis-tick-value"}),s),c}}]),n}(S.PureComponent);Qe(Ge,"displayName","PolarAngleAxis");Qe(Ge,"axisType","angleAxis");Qe(Ge,"defaultProps",{type:"category",angleAxisId:0,scale:"auto",cx:0,cy:0,orientation:"outer",axisLine:!0,tickLine:!0,tickSize:8,tick:!0,hide:!1,allowDuplicatedCategory:!0});var si=On,oi=si(Object.getPrototypeOf,Object),ci=oi,li=Nn,ui=ci,di=xn,fi="[object Object]",hi=Function.prototype,pi=Object.prototype,nn=hi.toString,mi=pi.hasOwnProperty,gi=nn.call(Object);function vi(e){if(!di(e)||li(e)!=fi)return!1;var t=ui(e);if(t===null)return!0;var n=mi.call(t,"constructor")&&t.constructor;return typeof n=="function"&&n instanceof n&&nn.call(n)==gi}var yi=vi;const ki=Fe(yi);function be(e){"@babel/helpers - typeof";return be=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},be(e)}function ce(){return ce=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ce.apply(this,arguments)}function Dt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function D(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Dt(Object(n),!0).forEach(function(r){H(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Dt(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function bi(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ft(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,rn(r.key),r)}}function _i(e,t,n){return t&&Ft(e.prototype,t),n&&Ft(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function wi(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&at(e,t)}function at(e,t){return at=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,a){return r.__proto__=a,r},at(e,t)}function Ii(e){var t=Ai();return function(){var r=De(e),a;if(t){var i=De(this).constructor;a=Reflect.construct(r,arguments,i)}else a=r.apply(this,arguments);return Ci(this,a)}}function Ci(e,t){if(t&&(be(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return he(e)}function he(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ai(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function De(e){return De=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},De(e)}function H(e,t,n){return t=rn(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function rn(e){var t=Pi(e,"string");return be(t)==="symbol"?t:String(t)}function Pi(e,t){if(be(e)!=="object"||e===null)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(be(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Z=function(e){wi(n,e);var t=Ii(n);function n(r){var a;return bi(this,n),a=t.call(this,r),H(he(a),"pieRef",null),H(he(a),"sectorRefs",[]),H(he(a),"id",Rn("recharts-pie-")),H(he(a),"handleAnimationEnd",function(){var i=a.props.onAnimationEnd;a.setState({isAnimationFinished:!0}),se(i)&&i()}),H(he(a),"handleAnimationStart",function(){var i=a.props.onAnimationStart;a.setState({isAnimationFinished:!1}),se(i)&&i()}),a.state={isAnimationFinished:!r.isAnimationActive,prevIsAnimationActive:r.isAnimationActive,prevAnimationId:r.animationId,sectorToFocus:0},a}return _i(n,[{key:"isActiveIndex",value:function(a){var i=this.props.activeIndex;return Array.isArray(i)?i.indexOf(a)!==-1:a===i}},{key:"hasActiveIndex",value:function(){var a=this.props.activeIndex;return Array.isArray(a)?a.length!==0:a||a===0}},{key:"renderLabels",value:function(a){var i=this.props.isAnimationActive;if(i&&!this.state.isAnimationFinished)return null;var s=this.props,c=s.label,u=s.labelLine,d=s.dataKey,l=s.valueKey,f=M(this.props),v=M(c),h=M(u),p=c&&c.offsetRadius||20,y=a.map(function(g,_){var A=(g.startAngle+g.endAngle)/2,O=X(g.cx,g.cy,g.outerRadius+p,A),b=D(D(D(D({},f),g),{},{stroke:"none"},v),{},{index:_,textAnchor:n.getTextAnchor(O.x,g.cx)},O),x=D(D(D(D({},f),g),{},{fill:"none",stroke:g.fill},h),{},{index:_,points:[X(g.cx,g.cy,g.outerRadius,A),O],key:"line"}),k=d;return ge(d)&&ge(l)?k="value":ge(d)&&(k=l),N.createElement(z,{key:"label-".concat(_)},u&&n.renderLabelLineItem(u,x),n.renderLabelItem(c,b,fe(g,k)))});return N.createElement(z,{className:"recharts-pie-labels"},y)}},{key:"renderSectorsStatically",value:function(a){var i=this,s=this.props,c=s.activeShape,u=s.blendStroke,d=s.inactiveShape;return a.map(function(l,f){var v=d&&i.hasActiveIndex()?d:null,h=i.isActiveIndex(f)?c:v,p=D(D({},l),{},{stroke:u?l.fill:l.stroke});return N.createElement(z,ce({ref:function(g){g&&!i.sectorRefs.includes(g)&&i.sectorRefs.push(g)},tabIndex:-1,className:"recharts-pie-sector"},ct(i.props,l,f),{key:"sector-".concat(f)}),n.renderSectorItem(h,p))})}},{key:"renderSectorsWithAnimation",value:function(){var a=this,i=this.props,s=i.sectors,c=i.isAnimationActive,u=i.animationBegin,d=i.animationDuration,l=i.animationEasing,f=i.animationId,v=this.state,h=v.prevSectors,p=v.prevIsAnimationActive;return N.createElement(Tn,{begin:u,duration:d,isActive:c,easing:l,from:{t:0},to:{t:1},key:"pie-".concat(f,"-").concat(p),onAnimationStart:this.handleAnimationStart,onAnimationEnd:this.handleAnimationEnd},function(y){var g=y.t,_=[],A=s&&s[0],O=A.startAngle;return s.forEach(function(b,x){var k=h&&h[x],w=x>0?Dn(b,"paddingAngle",0):0;if(k){var P=mt(k.endAngle-k.startAngle,b.endAngle-b.startAngle),R=D(D({},b),{},{startAngle:O+w,endAngle:O+P(g)+w});_.push(R),O=R.endAngle}else{var E=b.endAngle,j=b.startAngle,G=mt(0,E-j),B=G(g),q=D(D({},b),{},{startAngle:O+w,endAngle:O+B+w});_.push(q),O=q.endAngle}}),N.createElement(z,null,a.renderSectorsStatically(_))})}},{key:"attachKeyboardHandlers",value:function(a){var i=this;a.onkeydown=function(s){if(!s.altKey)switch(s.key){case"ArrowLeft":{var c=++i.state.sectorToFocus%i.sectorRefs.length;i.sectorRefs[c].focus(),i.setState({sectorToFocus:c});break}case"ArrowRight":{var u=--i.state.sectorToFocus<0?i.sectorRefs.length-1:i.state.sectorToFocus%i.sectorRefs.length;i.sectorRefs[u].focus(),i.setState({sectorToFocus:u});break}case"Escape":{i.sectorRefs[i.state.sectorToFocus].blur(),i.setState({sectorToFocus:0});break}}}}},{key:"renderSectors",value:function(){var a=this.props,i=a.sectors,s=a.isAnimationActive,c=this.state.prevSectors;return s&&i&&i.length&&(!c||!Fn(c,i))?this.renderSectorsWithAnimation():this.renderSectorsStatically(i)}},{key:"componentDidMount",value:function(){this.pieRef&&this.attachKeyboardHandlers(this.pieRef)}},{key:"render",value:function(){var a=this,i=this.props,s=i.hide,c=i.sectors,u=i.className,d=i.label,l=i.cx,f=i.cy,v=i.innerRadius,h=i.outerRadius,p=i.isAnimationActive,y=this.state.isAnimationFinished;if(s||!c||!c.length||!pe(l)||!pe(f)||!pe(v)||!pe(h))return null;var g=ve("recharts-pie",u);return N.createElement(z,{tabIndex:this.props.rootTabIndex,className:g,ref:function(A){a.pieRef=A}},this.renderSectors(),d&&this.renderLabels(c),qt.renderCallByParent(this.props,null,!1),(!p||y)&&$n.renderCallByParent(this.props,c,!1))}}],[{key:"getDerivedStateFromProps",value:function(a,i){return i.prevIsAnimationActive!==a.isAnimationActive?{prevIsAnimationActive:a.isAnimationActive,prevAnimationId:a.animationId,curSectors:a.sectors,prevSectors:[],isAnimationFinished:!0}:a.isAnimationActive&&a.animationId!==i.prevAnimationId?{prevAnimationId:a.animationId,curSectors:a.sectors,prevSectors:i.curSectors,isAnimationFinished:!0}:a.sectors!==i.curSectors?{curSectors:a.sectors,isAnimationFinished:!0}:null}},{key:"getTextAnchor",value:function(a,i){return a>i?"start":a<i?"end":"middle"}},{key:"renderLabelLineItem",value:function(a,i){return N.isValidElement(a)?N.cloneElement(a,i):se(a)?a(i):N.createElement(Ln,ce({},i,{type:"linear",className:"recharts-pie-label-line"}))}},{key:"renderLabelItem",value:function(a,i,s){if(N.isValidElement(a))return N.cloneElement(a,i);var c=s;return se(a)&&(c=a(i),N.isValidElement(c))?c:N.createElement(ot,ce({},i,{alignmentBaseline:"middle",className:"recharts-pie-label-text"}),c)}},{key:"renderSectorItem",value:function(a,i){return N.isValidElement(a)?N.cloneElement(a,i):se(a)?a(i):ki(a)?N.createElement(pt,ce({tabIndex:-1},i,a)):N.createElement(pt,ce({tabIndex:-1},i))}}]),n}(S.PureComponent);H(Z,"displayName","Pie");H(Z,"defaultProps",{stroke:"#fff",fill:"#808080",legendType:"rect",cx:"50%",cy:"50%",startAngle:0,endAngle:360,innerRadius:0,outerRadius:"80%",paddingAngle:0,labelLine:!0,hide:!1,minAngle:0,isAnimationActive:!En.isSsr,animationBegin:400,animationDuration:1500,animationEasing:"ease",nameKey:"name",blendStroke:!1,rootTabIndex:0});H(Z,"parseDeltaAngle",function(e,t){var n=xe(t-e),r=Math.min(Math.abs(t-e),360);return n*r});H(Z,"getRealPieData",function(e){var t=e.props,n=t.data,r=t.children,a=M(e.props),i=jn(r,Vt);return n&&n.length?n.map(function(s,c){return D(D(D({payload:s},a),s),i&&i[c]&&i[c].props)}):i&&i.length?i.map(function(s){return D(D({},a),s.props)}):[]});H(Z,"parseCoordinateOfPie",function(e,t){var n=t.top,r=t.left,a=t.width,i=t.height,s=Mn(a,i),c=r+Oe(e.props.cx,a,a/2),u=n+Oe(e.props.cy,i,i/2),d=Oe(e.props.innerRadius,s,0),l=Oe(e.props.outerRadius,s,s*.8),f=e.props.maxRadius||Math.sqrt(a*a+i*i)/2;return{cx:c,cy:u,innerRadius:d,outerRadius:l,maxRadius:f}});H(Z,"getComposedData",function(e){var t=e.item,n=e.offset,r=Z.getRealPieData(t);if(!r||!r.length)return null;var a=t.props,i=a.cornerRadius,s=a.startAngle,c=a.endAngle,u=a.paddingAngle,d=a.dataKey,l=a.nameKey,f=a.valueKey,v=a.tooltipType,h=Math.abs(t.props.minAngle),p=Z.parseCoordinateOfPie(t,n),y=Z.parseDeltaAngle(s,c),g=Math.abs(y),_=d;ge(d)&&ge(f)?(gt(!1,`Use "dataKey" to specify the value of pie,
      the props "valueKey" will be deprecated in 1.1.0`),_="value"):ge(d)&&(gt(!1,`Use "dataKey" to specify the value of pie,
      the props "valueKey" will be deprecated in 1.1.0`),_=f);var A=r.filter(function(P){return fe(P,_,0)!==0}).length,O=(g>=360?A:A-1)*u,b=g-A*h-O,x=r.reduce(function(P,R){var E=fe(R,_,0);return P+(pe(E)?E:0)},0),k;if(x>0){var w;k=r.map(function(P,R){var E=fe(P,_,0),j=fe(P,l,R),G=(pe(E)?E:0)/x,B;R?B=w.endAngle+xe(y)*u*(E!==0?1:0):B=s;var q=B+xe(y)*((E!==0?h:0)+G*b),ee=(B+q)/2,Y=(p.innerRadius+p.outerRadius)/2,te=[{name:j,value:E,payload:P,dataKey:_,type:v}],I=X(p.cx,p.cy,Y,ee);return w=D(D(D({percent:G,cornerRadius:i,name:j,tooltipPayload:te,midAngle:ee,middleRadius:Y,tooltipPosition:I},P),p),{},{value:fe(P,_),startAngle:B,endAngle:q,payload:P,paddingAngle:xe(y)*u}),w})}return D(D({},p),{},{sectors:k,data:r})});var Si=Bn({chartName:"PieChart",GraphicalChild:Z,validateTooltipEventTypes:["item"],defaultTooltipEventType:"item",legendContent:"children",axisComponents:[{axisType:"angleAxis",AxisComp:Ge},{axisType:"radiusAxis",AxisComp:Ve}],formatAxisMap:Un,defaultProps:{layout:"centric",startAngle:0,endAngle:360,cx:"50%",cy:"50%",innerRadius:0,outerRadius:"80%"}});const Oi=({intakes:e,remainingCalories:t})=>{const r=[...W.sortIntakesByRecordedAt(e).map(a=>({name:a.items.reduce((i,s,c,u)=>u.length===1?s.name:c===0?i+`${s.name}, `:c===u.length-1?i+`and ${s.name}`:i+` ${s.name}, `,""),value:a.items.reduce((i,s)=>i+s.calories,0)})),{name:"remaining",value:t}];return t<=0&&r.pop(),m(Si,{width:250,height:250,children:[o(Z,{dataKey:"value",isAnimationActive:!1,data:r,cx:125,cy:125,innerRadius:80,outerRadius:110,children:r.map((a,i)=>{const s=a.name==="remaining"?"#a7a7a7":ft[i%ft.length];return o(Vt,{fill:s},`cell-${i}`)})}),o(Wn,{})]})},Ni=()=>{const{dailyData:e,recordedIntakes:t,calConsumedPct:n,calRemainingPct:r,remainingCalories:a,consumedCalories:i,estimatedKGChange:s,color:c}=Q();if(!e)return null;const{date:u}=e,d=new Intl.DateTimeFormat("en-GB",{weekday:"long",month:"numeric",day:"numeric",year:"numeric"}).format(new Date(u)),l=a>0?"remaining":"over your limit";return m("header",{className:"day-edit__header","data-testid":"day-edit-header",children:[o("div",{className:"day-edit__header__date-container",children:o("h2",{className:"day-edit__header__date","data-testid":"day-edit-header-date",children:d})}),o(Oi,{intakes:t,remainingCalories:a}),m("div",{className:"day-edit__header__titles",children:[m("p",{className:"day-edit__header__titles__title","data-testid":"day-edit-header-remaining-calories",children:[m("strong",{children:[Math.abs(a)," "]}),"calories ",l]}),o("hr",{style:{backgroundColor:c}}),i>0&&m(_e,{children:[m("p",{className:"day-edit__header__titles__title","data-testid":"day-edit-header-consumed-calories",children:[o("strong",{children:Math.round(i)})," calories consumed"]}),o("hr",{style:{backgroundColor:c}})]}),m("div",{className:"day-edit__header__percentages-container",children:[m("div",{className:"day-edit__header__percentage","data-testid":"day-edit-header-consumed-percentage",children:[o("p",{className:"day-edit__header__percentage__title",children:"consumed:"}),m("p",{className:"day-edit__header__percentage__value",children:[n,"%"]})]}),m("div",{className:"day-edit__header__percentage","data-testid":"day-edit-header-remaining-percentage",children:[o("p",{className:"day-edit__header__percentage__title",children:"remaining:"}),m("p",{className:"day-edit__header__percentage__value",children:[r,"%"]})]})]}),o("hr",{style:{backgroundColor:c}}),m("p",{className:"day-edit__header__titles__title","data-testid":"day-edit-header-estimated-kg-change",children:["estimated to ",s>0?"gain":"lose",m("strong",{children:[" ",Math.abs(s)]})," kg"]}),o("hr",{style:{backgroundColor:c}})]})]})};const xi=({mode:e,zIndex:t})=>o("div",{className:`main-screen ${e||""}`,style:{zIndex:t},"data-testid":"main-screen"});const Ei=({isModalAbove:e,isFullScreen:t=!1})=>{const n="tippy"+(e?" down":" up")+(t?" full-screen":"");return o("div",{className:n,"data-testid":"tippy"})};function an(e,t){var c;const n=(c=e.current)==null?void 0:c.getBoundingClientRect();if(!n)return;const a=window.innerHeight-n.top<t,i={top:n.bottom+n.height/2+window.scrollY},s={bottom:window.innerHeight-n.top+n.height/2};return{isModalAbove:a,position:{...a?s:i,left:n.left+n.width/2+window.scrollX},rect:n}}const Se=S.createContext(void 0),V=({children:e,externalStateControl:t,onClose:n,onOpen:r,onAfterClose:a})=>{const[i,s]=S.useState(""),[c,u]=S.useState(null),[d,l]=S.useState(null),[f,v]=S.useState(!1),h=()=>{if(n==null||n(),t){t.setOpenedModalName(""),a==null||a();return}s(""),a==null||a()},p=A=>{if(r==null||r(),t){t.setOpenedModalName(A);return}s(A)},{debouncedFunc:y,cancel:g}=it(()=>{h()},500),_={openedModalName:(t==null?void 0:t.openedModalName)||i,close:h,open:p,position:c,setPosition:u,isModalAbove:f,setIsModalAbove:v,modalHoverGuardZone:d,setModalHoverGuardZone:l,debouncedClose:y,cancelDebouncedClose:g};return o(Se.Provider,{value:_,children:e})},Ri=({children:e,modalName:t,setPositionByRef:n=!1,modalHeight:r=0,externalControlFunc:a})=>{const{open:i,setPosition:s,setIsModalAbove:c}=S.useContext(Se),u=S.useRef(null),d=S.useCallback(()=>{const f=an(u,r),{isModalAbove:v,position:h}=f;c(v),s(h)},[r,c,s]),l=()=>{if(n&&d(),a)return a();i(t)};return S.useEffect(()=>{if(!n)return;const f=["wheel","scroll","resize"];return f.forEach(v=>{window.addEventListener(v,d)}),()=>{f.forEach(v=>{window.removeEventListener(v,d)})}},[n,d]),S.cloneElement(e,{onClick:l,ref:u})},Li=({children:e,onClickFn:t})=>{const{close:n}=S.useContext(Se);return S.cloneElement(e,{onClick:()=>{t==null||t(),n()}})},Ti=({children:e,modalName:t,modalHeight:n=0})=>{const{open:r,setPosition:a,setIsModalAbove:i,setModalHoverGuardZone:s,debouncedClose:c,cancelDebouncedClose:u}=S.useContext(Se),d=S.useRef(null),{debouncedFunc:l,cancel:f}=it(v,500);function v(){const y=an(d,n);y&&(a(y.position),i(y.isModalAbove),s({height:y.rect.height,width:y.rect.width}),r(t))}function h(){u(),l()}function p(){f(),c()}return o("div",{className:"modal-hover-open",ref:d,onMouseEnter:h,onMouseLeave:p,children:e})},Di=({children:e,name:t,className:n,mainScreenMode:r="transparent",mainScreenZIndex:a=1e3,elementId:i="app",includeTippy:s=!1,style:c={},hoverControl:u=!1})=>{const{openedModalName:d,open:l,close:f,position:v,isModalAbove:h,modalHoverGuardZone:p,debouncedClose:y,cancelDebouncedClose:g}=S.useContext(Se),{outsideClickRef:_}=qn(f);function A(){g(),l(t)}function O(){y()}return t!==d?null:dn.createPortal(m(_e,{children:[!u&&o(xi,{mode:r,zIndex:a}),m("section",{className:`modal ${n||t}`,style:{...c,zIndex:a+1,...v},ref:u?void 0:_,onMouseEnter:()=>u&&A(),onMouseLeave:()=>u&&O(),"data-testid":"modal-window",children:[s&&o(Ei,{isModalAbove:!!h}),e,u&&p&&o("div",{className:"modal-hover-guard-zone",style:{top:h?"100%":`-${p.height/2}px`,height:`${p.height/2}px`||"10%",width:`${p.width}px`||"10%"}})]})]}),document.getElementById(i))};V.OpenBtn=Ri;V.Window=Di;V.CloseBtn=Li;V.ModalHoverOpen=Ti;function Fi(){const e=je(),{mutate:t,isLoading:n}=Me({mutationFn:async r=>We.removeUserFavoriteIntake(r),onSuccess:()=>{e.invalidateQueries(["favoriteIntakes"])}});return{removeFavoriteIntake:t,isLoading:n}}const sn=({intake:e})=>{const{dailyData:t,openedTab:n,setOpenedTab:r,setIntake:a,updateDailyData:i,setCurrIntakeItemId:s}=Q(),{addFavoriteIntake:c,isLoading:u}=Xt(),{removeFavoriteIntake:d}=Fi(),l=n===F.IntakeList,f=n===F.FavoriteIntake,v=!l||f,h=le.getTotalCalories(e),p=f?e.name||e.items.map(b=>b.name).join(", "):null;function y(b){if(f)return d(b);if(!t)return;const x={...t},k=t.intakes.filter(w=>w.id!==b);i({id:x.id,data:{intakes:k}})}function g(b){if(!t)return;const x={...b};a(x),r(F.IntakeEdit),s(b.items[0].id)}function _(b){if(!t)return;const x={...b};x.id=ht(),x.recordedAt=new Date;const k=[...t.intakes,x];i({id:t.id,data:{intakes:k}})}function A(b){if(!t)return;const x={...t};let k=[...t.intakes];f?k=[...t.intakes,{...e,id:ht(),isRecorded:!0,recordedAt:new Date}]:k=t.intakes.map(w=>(w.id!==b||(w.isRecorded=!0,w.recordedAt=new Date),w)),i({id:x.id,data:{intakes:k}})}function O(b){c(b)}return u?o(J,{containerSize:{height:"50px"}}):m("section",{className:"intake-preview","data-testid":"intake-preview",children:[p&&o("h2",{className:"intake-preview__title","data-testid":"intake-title",children:p}),o(Be,{items:e.items,className:"intake-preview__item-list",render:b=>o("li",{className:"intake-preview__item-list__item","data-testid":"intake-preview-item",children:`${b.name} - ${b.quantity} ${b.unit} - calories: ${Math.round(b.calories)}`},b.id)}),m("p",{className:"intake-preview__total-calories",children:["total calories: ",h]}),m("div",{id:"intake-preview-btns-container",className:"intake-preview__btns-container",children:[m(V,{children:[o(V.OpenBtn,{modalName:"delete-intake",children:o("button",{className:"btn",children:"Delete"})}),m(V.Window,{name:"delete-intake",elementId:"intake-preview-btns-container",className:"delete-intake-modal",children:[o("h2",{children:"Are you sure you want to delete this intake?"}),o(V.CloseBtn,{onClickFn:()=>y(e.id),children:o("button",{className:"btn delete-btn",children:"Delete"})}),o(V.CloseBtn,{children:o("button",{className:"btn",children:"Cancel"})})]})]}),(f||l)&&o(T,{className:"btn",onClickFn:()=>g(e),children:"Edit"}),l&&o(T,{className:"btn",onClickFn:()=>_(e),children:"duplicate"}),v&&o(T,{className:"btn",onClickFn:()=>A(e.id),children:"Save"}),!f&&o(T,{className:"btn",onClickFn:()=>O(e),children:"add to fav"})]})]})};const $i=()=>{const{dailyData:e,unrecordedIntakes:t,recordedIntakes:n,openedTab:r,isLoadingUpdate:a}=Q();if(!e)return null;const i=r===F.IntakeList,c=(i?n:t).sort((d,l)=>!d.recordedAt||!l.recordedAt?0:new Date(d.recordedAt).getTime()-new Date(l.recordedAt).getTime()),u=le.getTotalCaloriesFromDailyData({dailyData:e,isRecorded:i});return m(_e,{children:[m("header",{className:"intake-list__header","data-testid":"intake-list-header",children:[m("h3",{className:"intake-list__header__title",children:[i?"Recorded":"Unrecorded"," Intakes"]}),m("h4",{className:"intake-list__header__total-calories",children:["total calories: ",u]})]}),a&&o(J,{}),!a&&o(Be,{className:"intake-list",items:c,render:(d,l)=>{const f=d.recordedAt?`- ${fn(d.recordedAt)}`:"";return m("li",{className:"intake-list-item",children:[m("h5",{className:"intake-list-item__title",children:["Intake ",l+1,"# ",f]}),o(sn,{intake:d})]},d.id)}})]})};const ji=()=>{const{dailyData:e,isLoading:t,updateDailyData:n,isLoadingUpdate:r,setOpenedTab:a}=Q(),{userDailyStats:i}=hn(),{userGoal:s}=pn(),{control:c,handleSubmit:u}=Qt({defaultValues:{weight:(e==null?void 0:e.weight)||"",waist:(e==null?void 0:e.waist)||""}}),[d,l]=S.useState(!1),[f,v]=S.useState(!(e!=null&&e.weight)&&!(e!=null&&e.waist)&&!t);function h(){e&&(v(!1),!e.isWeightWaistIgnored&&(n({id:e.id,data:{isWeightWaistIgnored:!0}}),a(F.IntakeEdit)))}function p(g){e&&(n({id:e.id,data:{weight:Number(g.weight),waist:Number(g.waist)}}),v(!1))}function y(){v(!0)}return S.useEffect(()=>{!s||!i||l(mn.isReachedGoalWeight({userGoal:s,userDailyStats:i}))},[s,i]),t||r?o(J,{containerSize:{height:"75px"}}):e?f?m("form",{className:"weight-waist-form","data-testid":"weight-waist-form",onSubmit:u(p),children:[o(Ce,{control:c,name:"weight",render:({field:g})=>m("label",{className:"weight-waist-form__label",children:[o("h3",{children:"Weight"}),o("input",{...g,type:"number",className:"weight-waist-form__input",placeholder:"Enter your weight",required:!0})]})}),o(Ce,{control:c,name:"waist",render:({field:g})=>m("label",{className:"weight-waist-form__label",children:[o("h3",{children:"Waist"}),o("input",{...g,type:"number",className:"weight-waist-form__input",placeholder:"Enter your waist size",required:!0})]})}),m("div",{className:"weight-waist-form__btns-container",children:[o(T,{className:"btn",type:"submit",children:"update"}),o(T,{className:"btn",onClickFn:h,children:"dissmis"})]})]}):m(_e,{children:[m("div",{className:"weight-waist-details","data-testid":"weight-waist-details",children:[o("p",{className:"weight-waist-details__title",children:"weight:"}),m("p",{className:"weight-waist-details__text",children:[e.weight," kg"]}),o("p",{className:"weight-waist-details__title",children:"waist:"}),m("p",{className:"weight-waist-details__text",children:[e.waist," cm"]})]}),o(T,{className:"btn",onClickFn:y,children:"update"}),d&&o(gn,{})]}):null},ut="nutrition";async function Mi(e){const t=await ne.get(`${ut}/chatGPT?prompt=${e}`);return ue(t)}async function Bi(e){const t=await ne.get(`${ut}/ninja?query=${e}`);return ue(t)}async function Ui(e){const t=await ne.get(`${ut}/usda?query=${e}`);return ue(t)}const ze={queryChatGPT:Mi,queryNinja:Bi,queryUSDA:Ui};function Wi(e){return Bt({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M2 19V8H1V6H4V4C4 3.44772 4.44772 3 5 3H19C19.5523 3 20 3.44772 20 4V6H23V8H22V19H23V21H1V19H2ZM13 19V12H11V19H13ZM8 19V12H6V19H8ZM18 19V12H16V19H18ZM6 5V6H18V5H6Z"}}]})(e)}function qi(e){return Bt({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M20.5624 10.1875C20.8124 9.5 20.8749 8.8125 20.8124 8.125C20.7499 7.4375 20.4999 6.75 20.1874 6.125C19.6249 5.1875 18.8124 4.4375 17.8749 4C16.8749 3.5625 15.8124 3.4375 14.7499 3.6875C14.2499 3.1875 13.6874 2.75 13.0624 2.4375C12.4374 2.125 11.6874 2 10.9999 2C9.9374 2 8.8749 2.3125 7.9999 2.9375C7.1249 3.5625 6.4999 4.4375 6.1874 5.4375C5.4374 5.625 4.8124 5.9375 4.1874 6.3125C3.6249 6.75 3.1874 7.3125 2.8124 7.875C2.24991 8.8125 2.06241 9.875 2.18741 10.9375C2.31241 12 2.7499 13 3.4374 13.8125C3.1874 14.5 3.1249 15.1875 3.1874 15.875C3.2499 16.5625 3.4999 17.25 3.8124 17.875C4.3749 18.8125 5.1874 19.5625 6.1249 20C7.1249 20.4375 8.1874 20.5625 9.2499 20.3125C9.7499 20.8125 10.3124 21.25 10.9374 21.5625C11.5624 21.875 12.3124 22 12.9999 22C14.0624 22 15.1249 21.6875 15.9999 21.0625C16.8749 20.4375 17.4999 19.5625 17.8124 18.5625C18.4999 18.4375 19.1874 18.125 19.7499 17.6875C20.3124 17.25 20.8124 16.75 21.1249 16.125C21.6874 15.1875 21.8749 14.125 21.7499 13.0625C21.6249 12 21.2499 11 20.5624 10.1875ZM13.0624 20.6875C12.0624 20.6875 11.3124 20.375 10.6249 19.8125C10.6249 19.8125 10.6874 19.75 10.7499 19.75L14.7499 17.4375C14.8749 17.375 14.9374 17.3125 14.9999 17.1875C15.0624 17.0625 15.0624 17 15.0624 16.875V11.25L16.7499 12.25V16.875C16.8124 19.0625 15.0624 20.6875 13.0624 20.6875ZM4.9999 17.25C4.5624 16.5 4.3749 15.625 4.5624 14.75C4.5624 14.75 4.6249 14.8125 4.6874 14.8125L8.6874 17.125C8.8124 17.1875 8.8749 17.1875 8.9999 17.1875C9.1249 17.1875 9.2499 17.1875 9.3124 17.125L14.1874 14.3125V16.25L10.1249 18.625C9.2499 19.125 8.2499 19.25 7.3124 19C6.3124 18.75 5.4999 18.125 4.9999 17.25ZM3.9374 8.5625C4.3749 7.8125 5.0624 7.25 5.8749 6.9375V7.0625V11.6875C5.8749 11.8125 5.8749 11.9375 5.9374 12C5.9999 12.125 6.0624 12.1875 6.1874 12.25L11.0624 15.0625L9.3749 16.0625L5.3749 13.75C4.4999 13.25 3.8749 12.4375 3.6249 11.5C3.3749 10.5625 3.4374 9.4375 3.9374 8.5625ZM17.7499 11.75L12.8749 8.9375L14.5624 7.9375L18.5624 10.25C19.1874 10.625 19.6874 11.125 19.9999 11.75C20.3124 12.375 20.4999 13.0625 20.4374 13.8125C20.3749 14.5 20.1249 15.1875 19.6874 15.75C19.2499 16.3125 18.6874 16.75 17.9999 17V12.25C17.9999 12.125 17.9999 12 17.9374 11.9375C17.9374 11.9375 17.8749 11.8125 17.7499 11.75ZM19.4374 9.25C19.4374 9.25 19.3749 9.1875 19.3124 9.1875L15.3124 6.875C15.1874 6.8125 15.1249 6.8125 14.9999 6.8125C14.8749 6.8125 14.7499 6.8125 14.6874 6.875L9.8124 9.6875V7.75L13.8749 5.375C14.4999 5 15.1874 4.875 15.9374 4.875C16.6249 4.875 17.3124 5.125 17.9374 5.5625C18.4999 6 18.9999 6.5625 19.2499 7.1875C19.4999 7.8125 19.5624 8.5625 19.4374 9.25ZM8.9374 12.75L7.2499 11.75V7.0625C7.2499 6.375 7.4374 5.625 7.8124 5.0625C8.1874 4.4375 8.7499 4 9.3749 3.6875C9.9999 3.375 10.7499 3.25 11.4374 3.375C12.1249 3.4375 12.8124 3.75 13.3749 4.1875C13.3749 4.1875 13.3124 4.25 13.2499 4.25L9.2499 6.5625C9.1249 6.625 9.0624 6.6875 8.9999 6.8125C8.9374 6.9375 8.9374 7 8.9374 7.125V12.75ZM9.8124 10.75L11.9999 9.5L14.1874 10.75V13.25L11.9999 14.5L9.8124 13.25V10.75Z"}}]})(e)}const Vi=()=>o("div",{className:"dot-loader","data-testid":"dot-loader"}),Ze=({queryState:{type:e,status:t,error:n,response:r}})=>t==="loading"?o(Vi,{}):t==="error"&&n?o(st,{msg:n}):t==="success"?m("section",{"data-testid":"nutrition-query-response-handler",children:[e==="chatGPT"&&o("p",{children:r}),e==="ninjaAPI"&&o("ul",{className:"nutrition-query__results__item__list","data-testid":"nutrition-query-response-ninja-api-response",children:r.map((a,i)=>o("li",{children:Object.entries(a).map(([s,c])=>s==="name"?o("strong",{children:a.name},s):m("div",{children:[m("span",{children:[s,":"]}),o("span",{children:c})]},s))},i))}),e==="usdaAPI"&&o("ul",{className:"nutrition-query__results__item__list","data-testid":"nutrition-query-response-usda-api-response",children:r.map((a,i)=>{const s=Object.entries(a);return o("li",{children:s.map(([c,u])=>c==="description"?o("strong",{children:a.description},c):m("div",{children:[m("span",{children:[c,":"]}),o("span",{children:u})]},c))},i)})})]}):null;const Qi=()=>{const{chatGPTQuery:e,setChatGPTQuery:t,ninjaAPIQuery:n,setNinjaAPIQuery:r,USDAAPIQuery:a,setUSDAAPIQuery:i}=Q(),{control:s,handleSubmit:c}=Qt({defaultValues:{chatGPTQuery:"",ninjaAPIQuery:"",USDAAPIQuery:""}});async function u(d){if(d.chatGPTQuery)try{t({...e,status:"loading"});const l=await ze.queryChatGPT(d.chatGPTQuery);t({...e,status:"success",response:l})}catch(l){t({...e,status:"error",error:l instanceof Error?l.message:"An unknown error occurred."})}if(d.ninjaAPIQuery)try{r({...n,status:"loading"});const l=await ze.queryNinja(d.ninjaAPIQuery);r({...n,status:"success",response:l})}catch(l){r({...n,status:"error",error:l instanceof Error?l.message:"An unknown error occurred."})}if(d.USDAAPIQuery)try{i({...a,status:"loading"});const l=await ze.queryUSDA(d.USDAAPIQuery);i({...a,status:"success",response:l})}catch(l){i({...a,status:"error",error:l instanceof Error?l.message:"An unknown error occurred."})}}return m("section",{className:"nutrition-query","data-testid":"nutrition-query",children:[m("section",{className:"nutrition-query__desc",children:[o("p",{children:"This tab let's you query the APIs used by the app."}),m("ul",{children:[o("li",{children:"The first one is a chatbot that generates a response based on the input"}),o("li",{children:"The second one is a food database."}),o("li",{children:"The third one is a nutrition database."})]})]}),m("form",{className:"nutrition-query__form",autoComplete:"off","data-testid":"nutrition-query-form",children:[m("label",{htmlFor:"chatGPTQuery",children:[o("span",{children:"Chat GPT"}),o(qi,{})]}),o(Ce,{name:"chatGPTQuery",control:s,render:({field:d})=>o("textarea",{id:"chatGPTQuery",...d})}),m("label",{htmlFor:"ninjaAPIQuery",children:[o("span",{children:"Ninja API"}),o(vn,{})]}),o(Ce,{name:"ninjaAPIQuery",control:s,render:({field:d})=>o("input",{id:"ninjaAPIQuery",...d})}),m("label",{htmlFor:"USDAAPIQuery",children:[o("span",{children:"USDA API"}),o(Wi,{})]}),o(Ce,{name:"USDAAPIQuery",control:s,render:({field:d})=>o("input",{id:"USDAAPIQuery",...d})}),o(T,{onClickFn:c(u),children:"query"})]}),m("div",{className:"nutrition-query__results",children:[e.status!=="idle"&&m("div",{className:"nutrition-query__results__item",children:[o("h1",{children:"Chat GPT Response:"}),o(Ze,{queryState:e})]}),n.status!=="idle"&&m("div",{className:"nutrition-query__results__item",children:[o("h1",{children:"Ninja API Response:"}),o(Ze,{queryState:n})]}),a.status!=="idle"&&m("div",{className:"nutrition-query__results__item",children:[o("h1",{children:"USDA API Response:"}),o(Ze,{queryState:a})]})]})]})};const $t=[{name:"cup (250ml)",value:250},{name:"bottle (750ml)",value:750},{name:"1.5 Liter",value:1500}],Gi=()=>{const{dailyData:e,updateDailyData:t,recommendedWaterIntake:n}=Q(),[r,a]=S.useState("");function i(c){a(c.name)}function s(){if(!e)return;const c=$t.find(l=>l.name===r);if(!c)return Xe.error("Please select a value");const u=W.getDefaultIntake();u.recordedAt=new Date,u.type="drink",u.items[0].quantity=c.value,u.items[0].unit=_n.MILLILITER,u.items[0].name="water",u.items[0].calories=0;const d=[...e.intakes,u];t({id:e.id,data:{intakes:d}})}return m("section",{className:"water-edit","data-testid":"water-edit",children:[o("h2",{className:"water-edit__title",children:`Recommended water intake: ${n} ml`}),o("div",{className:"water-edit__btns-values-container",children:$t.map(c=>o(T,{className:ve("btn",{"btn-selected":r===c.name}),onClickFn:()=>i(c),children:c.name},c.value))}),o(T,{className:"water-edit__btn-save",onClickFn:s,children:"Save"})]})};const Ki=()=>{const{favoriteIntakes:e,isErrorFavoriteIntakes:t,isLoadingFavoriteIntakes:n,isSuccessFavoriteIntakes:r,isEmptyFavoriteIntakes:a}=Q(),{updateFavoriteIntake:i}=Jt(),[s,c]=S.useState(Ye(e));function u(f,v){return{background:f?"var(--color-warning)":"",transform:f?"rotate(7deg)":"",...v}}function d(f){if(!f.destination||!s)return;const h=((y,g,_)=>{const A=Array.from(y),[O]=A.splice(g,1);return A.splice(_,0,O),A})(s,f.source.index,f.destination.index);c(h);const p={...h[f.destination.index]};p.sortOrder=f.destination.index,i(p)}function l(f){const{value:v}=f.target;if(!e)return c(Ye(e));const h=e==null?void 0:e.filter(p=>p.name.toLowerCase().includes(v.toLowerCase())||p.items.some(y=>y.name.toLowerCase().includes(v.toLowerCase())));c(h)}return S.useEffect(()=>{c(Ye(e))},[e]),m("section",{className:"day-edit__favorite-intakes","data-testid":"day-edit-favorite-intakes",children:[o("input",{type:"text",className:"day-edit__favorite-intakes__input",autoComplete:"off",placeholder:"Search...",onChange:l}),n&&o(J,{}),r&&!a&&o(Qn,{onDragEnd:d,children:o(Gn,{droppableId:"droppable",children:f=>m("ul",{className:"list day-edit__favorite-intakes__list",...f.droppableProps,ref:f.innerRef,children:[s.map((v,h)=>o(Kn,{draggableId:v.id,index:h,children:(p,y)=>o("li",{ref:p.innerRef,...p.draggableProps,...p.dragHandleProps,style:u(y.isDragging,p.draggableProps.style),className:"day-edit__favorite-intakes__list__item",children:o(sn,{intake:v})})},v.id)),f.placeholder]})})}),r&&a&&o(Hn,{entityName:"favorite intake"}),t&&o(st,{msg:"Couldn't get favorite intake. Please try again later."})]})};function Ye(e){return e?e==null?void 0:e.sort((t,n)=>t.sortOrder-n.sortOrder):[]}const Hi=()=>{const{loggedInUser:e}=$e(),{dailyData:t,updateDailyData:n,isLoadingUpdate:r}=Q(),[a,i]=S.useState(null);function s(){const h=yn.getDefaultWorkout();i(h)}function c(h){if(!a)return;const p=h.target.value,y={...a,description:p};i(y)}function u(h){if(!a)return;const p={...a,type:h};i(p)}function d(h){if(!a)return;const p=Number(h.target.value),y={...a,durationInMin:p};i(y)}function l(h){if(!a)return;const p={...a,split:h};i(p)}function f(){i(null)}function v(){if(!a||!t||!e)return;const{id:h,...p}=a,y={...p,userId:e.id},g=[...t.workouts,y];n({id:t.id,data:{workouts:g}}),i(null)}return t?m("section",{className:"day-edit__day-workouts","data-testid":"day-workouts",children:[o(T,{className:"day-edit__day-workouts__btn",onClickFn:s,children:"add quick workout"}),a&&m("form",{className:"day-edit__day-workouts__quick-workout-form","data-testid":"quick-workout-form",children:[o(Vn,{workout:a,handleTypeSelectChange:u,handleDurationInputChange:d,handleDescInputChange:c,handleSplitSelectChange:l}),m("div",{className:"day-edit__day-workouts__quick-workout-form__btns-container",children:[o(T,{onClickFn:f,children:"cancel"}),o(T,{onClickFn:v,children:"save"})]})]}),r?o(J,{containerSize:{height:"50px"}}):o(Be,{className:"day-edit__day-workouts__workouts-list",items:t.workouts,render:h=>o(zn,{workout:h,updateDailyData:n},h.id),dataTestId:"workouts-list"})]}):null},zi=()=>{const{dailyData:e,isLoading:t,isSuccess:n,isError:r,openedTab:a,backgroundColor:i,color:s}=Q(),c=n&&e&&!t,u=t,d=a===F.IntakeList||a===F.UnRecordedIntakeList;return m("section",{className:"day-edit",style:{backgroundColor:i,color:s,border:`5px solid ${i}`},"data-testid":"day-edit",children:[u&&o(J,{}),r&&o(st,{}),c&&m(_e,{children:[o(Ni,{}),o(va,{}),a===F.WeightWaistInput&&o(ji,{}),a===F.IntakeEdit&&o(ga,{}),a===F.Workouts&&o(Hi,{}),a===F.FavoriteIntake&&o(Ki,{}),d&&o($i,{}),a===F.Query&&o(Qi,{}),a===F.Water&&o(Gi,{})]})]})};const Zi=()=>{const e=kn();return m("div",{className:"login-signup-msg","data-testid":"login-signup-msg",children:[o("div",{className:"login-signup-msg-text-container",children:o("h1",{children:"Start Your Journey Now!"})}),o("div",{className:"login-signup-msg-btn-container",children:[{title:"Log in",className:"btn-login",path:"/login"},{title:"Sign up",className:"btn-signup",path:"/signup"}].map(n=>o("button",{className:n.className,onClick:()=>{e(n.path)},children:n.title},n.title))})]})};function Yi(){const e=je(),{mutate:t,isLoading:n}=Me({mutationFn:bn.create,onSuccess:()=>{e.invalidateQueries(["today"])}});return{createDay:t,isLoading:n}}const us=()=>{const{loggedInUser:e}=$e(),{dailyData:t}=jt(),{createDay:n,isLoading:r}=Yi(),{backgroundColor:a,color:i}=Mt(),s=e&&!r,c=e&&t&&!Xi(t);wn({title:"Home / Kceli"});function u(){const d=new Date().toDateString();n({date:d})}return m("main",{className:"home","data-testid":"home-page",children:[!e&&o(Zi,{}),s&&o(ra,{children:o(zi,{})}),r&&o(J,{}),c&&m(V,{children:[o(V.OpenBtn,{modalName:"create-day",children:o("button",{className:"home__btn","data-testid":"create-day-open-modal-btn",style:{backgroundColor:a,color:i},children:"start a new day"})}),m(V.Window,{name:"create-day",className:"create-day-modal",children:[m("h2",{className:"create-day-modal__title",children:["Are you sure you want to start a new day? ",o("br",{})]}),o(V.CloseBtn,{onClickFn:u,children:o("button",{className:"btn create-day-modal__btn","data-testid":"create-day-modal-btn",children:"start a new day"})}),o(V.CloseBtn,{children:o("button",{className:"btn create-day-modal__btn",children:"cancel"})})]})]})]})};function Xi(e){const t=new Date().toDateString(),n=new Date(e.date).toDateString();return t===n}export{us as default};
