import{r as A,u as Gt,s as zt,c as Ot,G as Pt,g as xe,j as l,a as _,h as Ne,b as Ce,d as ze,S as ue,e as St,f as xt,i as Qt,F as se,$ as S,C as Je,k as Vt,l as Ht,m as Yt,n as Xt,o as Zt,p as Jt}from"./index-d6bc9be5.js";import{L as ke}from"./List-b59b5d6f.js";import{B as T}from"./Button-2df1edec.js";import{E as Nt}from"./ErrorMsg-bb2f053c.js";import{c as ne}from"./calorieUtilService-95d7373f.js";import{f as $,_ as Ct,a as Rt,b as en,c as tn,d as X,T as Qe,p as Q,L as B,e as Ve,g as Et,D as nn,h as rn,i as an,j as sn,G as on,u as cn,C as ln,S as et,k as ie,l as ee,A as un,m as dn,n as tt,o as fn,q as re,r as pn,s as hn,t as It,v as mn,w as ye,x as nt,y as we,z as vn,B as gn,E as yn}from"./generateCategoricalChart-24693252.js";import{c as Dt}from"./index-a0d64d05.js";import{W as bn}from"./WorkoutPreview-de837621.js";import{u as wn,C as je}from"./index.esm-0acafa99.js";function _n(e){A.useEffect(()=>{const t=document.title;return document.title=e||"Kceli",()=>{document.title=t}},[e])}function kn({title:e}){const t=Gt();_n(e),A.useEffect(()=>{t(zt(!1))},[t])}var me=(e=>(e.UNIT="unit",e.GRAM="g",e.CUP="cup",e.TABLE_SPOON="tbsp",e.TEA_SPOON="tsp",e.MILLILITER="ml",e))(me||{});const An=Object.values(me);function On(){return{id:Ot(),items:[Lt()],isRecorded:!0,recordedAt:null}}function Lt(){return{id:Ot(),unit:me.UNIT,quantity:1,name:""}}function Pn(e){switch(e){case"g":return 100;case"ml":return 100;case"unit":return 1;case"cup":return 1;case"tbsp":return 1;case"tsp":return 1;default:return 1}}function Sn(e){switch(e){case"g":return 25;case"ml":return 25;case"unit":return 1;case"cup":return 1;case"tbsp":return 1;case"tsp":return 1;default:return 1}}const q={getDefaultIntake:On,getDefaultIntakeItem:Lt,getUnitDefaultQuantity:Pn,getQuantityStepPerUnit:Sn,units:An};function xn(e){return Pt({tag:"svg",attr:{viewBox:"0 0 1024 1024"},child:[{tag:"path",attr:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm192 472c0 4.4-3.6 8-8 8H328c-4.4 0-8-3.6-8-8v-48c0-4.4 3.6-8 8-8h368c4.4 0 8 3.6 8 8v48z"}}]})(e)}function Nn(e){return Pt({tag:"svg",attr:{viewBox:"0 0 1024 1024"},child:[{tag:"path",attr:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm192 472c0 4.4-3.6 8-8 8H544v152c0 4.4-3.6 8-8 8h-48c-4.4 0-8-3.6-8-8V544H328c-4.4 0-8-3.6-8-8v-48c0-4.4 3.6-8 8-8h152V328c0-4.4 3.6-8 8-8h48c4.4 0 8 3.6 8 8v152h152c4.4 0 8 3.6 8 8v48z"}}]})(e)}/*!
 * Determine if an object is a Buffer
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */var Cn=function(t){return t!=null&&t.constructor!=null&&typeof t.constructor.isBuffer=="function"&&t.constructor.isBuffer(t)},Tt=En,Rn=[];function En(e,t){var n=0,r;if(!t)return Rn;if(e.FLAG==="long"){for(r=new Array(Math.ceil(t.length/2));n<t.length;)r[n/2]=t.slice(n,n+2),n+=2;return r}return t.split(e.FLAG==="num"?",":"")}var In=Tt,Dn=$n,Ln=[].push,be="etaoinshrdlcumwfgypbvkjxqz".split(""),fe=/\s+/,Tn=["qwertzuop","yxcvbnm","qaw","say","wse","dsx","sy","edr","fdc","dx","rft","gfv","fc","tgz","hgb","gv","zhu","jhn","hb","uji","kjm","jn","iko","lkm"];function $n(e){var t=Object.create(null),n=Object.create(null),r=Object.create(null),a=[],i={in:[],out:[]},s=[],o=e.toString("utf8"),c=[],d=0,u=o.indexOf(`
`),p,g,m,y,f,h,v,w,k,P,E,O,R;for(r.KEY=[];u>-1;)N(o.slice(d,u)),d=u+1,u=o.indexOf(`
`,d);for(N(o.slice(d)),u=-1;++u<c.length;)if(g=c[u],p=g.split(fe),m=p[0],m==="REP"){for(y=u+parseInt(p[1],10);++u<=y;)p=c[u].split(fe),a.push([p[1],p[2]]);u--}else if(m==="ICONV"||m==="OCONV"){for(y=u+parseInt(p[1],10),w=i[m==="ICONV"?"in":"out"];++u<=y;)p=c[u].split(fe),w.push([new RegExp(p[1],"g"),p[2]]);u--}else if(m==="COMPOUNDRULE"){for(y=u+parseInt(p[1],10);++u<=y;)for(P=c[u].split(fe)[1],k=-1,s.push(P);++k<P.length;)n[P.charAt(k)]=[];u--}else if(m==="PFX"||m==="SFX"){for(y=u+parseInt(p[3],10),P={type:m,combineable:p[2]==="Y",entries:[]},t[p[1]]=P;++u<=y;){p=c[u].split(fe),f=p[2],h=p[3].split("/"),v=p[4],w={add:"",remove:"",match:"",continuation:In(r,h[1])},h&&h[0]!=="0"&&(w.add=h[0]);try{f!=="0"&&(w.remove=m==="SFX"?rt(f):f),v&&v!=="."&&(w.match=m==="SFX"?rt(v):jn(v))}catch{w=null}w&&P.entries.push(w)}u--}else if(m==="TRY"){for(v=p[1],O=-1,E=[];++O<v.length;)R=v.charAt(O),R.toLowerCase()===R&&E.push(R);for(O=-1;++O<be.length;)v.indexOf(be[O])<0&&E.push(be[O]);r[m]=E}else m==="KEY"?Ln.apply(r[m],p[1].split("|")):m==="COMPOUNDMIN"?r[m]=Number(p[1]):m==="ONLYINCOMPOUND"?(r[m]=p[1],n[p[1]]=[]):r[m]=p[1];return isNaN(r.COMPOUNDMIN)&&(r.COMPOUNDMIN=3),r.KEY.length||(r.KEY=Tn),r.TRY||(r.TRY=be.concat()),r.KEEPCASE||(r.KEEPCASE=!1),{compoundRuleCodes:n,replacementTable:a,conversion:i,compoundRules:s,rules:t,flags:r};function N(C){C=C.trim(),C&&C.charCodeAt(0)!==35&&c.push(C)}}function rt(e){return new RegExp(e+"$")}function jn(e){return new RegExp("^"+e)}var $t=Mn;function Mn(e,t){for(var n=-1;++n<t.length;)e=e.replace(t[n][0],t[n][1]);return e}var Re=Fn;function Fn(e,t,n){return n&&t in e&&n.indexOf(e[t])>-1}var Bn=Re,Un=Wn;function Wn(e,t){var n=-1;if(e.data[t])return!Bn(e.flags,"ONLYINCOMPOUND",e.data[t]);if(t.length>=e.flags.COMPOUNDMIN){for(;++n<e.compoundRules.length;)if(e.compoundRules[n].test(t))return!0}return!1}var Kn=$t,Me=Un,Be=Re,He=qn;function qn(e,t,n){var r=t.trim(),a;if(!r)return null;if(r=Kn(r,e.conversion.in),Me(e,r))return!n&&Be(e.flags,"FORBIDDENWORD",e.data[r])?null:r;if(r.toUpperCase()===r){if(a=r.charAt(0)+r.slice(1).toLowerCase(),at(e.flags,e.data[a],n))return null;if(Me(e,a))return a}if(a=r.toLowerCase(),a!==r){if(at(e.flags,e.data[a],n))return null;if(Me(e,a))return a}return null}function at(e,t,n){return Be(e,"KEEPCASE",t)||n||Be(e,"FORBIDDENWORD",t)}var Gn=He,zn=Qn;function Qn(e){return!!Gn(this,e)}var Vn=Hn;function Hn(e){var t=it(e.charAt(0)),n=e.slice(1);return!n||(n=it(n),t===n)?t:t==="u"&&n==="l"?"s":null}function it(e){return e===e.toLowerCase()?"l":e===e.toUpperCase()?"u":null}var _e=Vn,st=$t,Yn=Re,Xn=He,Zn=er,Jn=[].push;function er(e){var t=this,n={},r=[],a={},i,s,o=[],c,d,u,p,g,m,y,f,h,v,w,k,P,E,O,R,N,C,b,x,D,L,j;if(e=st(e.trim(),t.conversion.in),!e||t.correct(e))return[];for(j=_e(e),d=-1;++d<t.replacementTable.length;)for(s=t.replacementTable[d],u=e.indexOf(s[0]);u>-1;)o.push(e.replace(s[0],s[1])),u=e.indexOf(s[0],u+1);for(d=-1;++d<e.length;)for(f=e.charAt(d),v=e.slice(0,d),w=e.slice(d+1),P=f.toLowerCase(),k=P!==f,n={},u=-1;++u<t.flags.KEY.length;)if(h=t.flags.KEY[u],p=h.indexOf(P),!(p<0)){for(m=-1;++m<h.length;)if(m!==p){if(y=h.charAt(m),n[y])continue;n[y]=!0,k&&(y=y.toUpperCase()),o.push(v+y+w)}}for(d=-1,N=e.charAt(0),c=[""],C=1,b=0;++d<e.length;){for(f=N,N=e.charAt(d+1),v=e.slice(0,d),s=f===N?"":f+f,u=-1,g=c.length;++u<g;)u<=C&&c.push(c[u]+s),c[u]+=f;++b<3&&(C=c.length)}for(Jn.apply(o,c),c=[e],s=e.toLowerCase(),(e===s||j===null)&&c.push(e.charAt(0).toUpperCase()+s.slice(1)),s=e.toUpperCase(),e!==s&&c.push(s),i={state:{},weighted:a,suggestions:r},E=ot(t,i,c,o),O=0,C=Math.min(E.length,Math.pow(Math.max(15-e.length,3),3)),x=Math.max(Math.pow(10-e.length,3),1);!r.length&&O<C;)R=O+x,ot(t,i,E.slice(O,R)),O=R;for(r.sort(G),c=[],D=[],d=-1;++d<r.length;)L=st(r[d],t.conversion.out),s=L.toLowerCase(),D.indexOf(s)<0&&(c.push(L),D.push(s));return c;function G(W,K){return ge(W,K)||Te(W,K)||$e(W,K)}function ge(W,K){return a[W]===a[K]?0:a[W]>a[K]?-1:1}function Te(W,K){var Xe=_e(W),Ze=_e(K);return Xe===Ze?0:Xe===j?-1:Ze===j?1:void 0}function $e(W,K){return W.localeCompare(K)}}function ot(e,t,n,r){var a=e.flags.TRY,i=e.data,s=e.flags,o=[],c=-1,d,u,p,g,m,y,f,h,v,w,k,P,E;if(r)for(;++c<r.length;)O(r[c],!0);for(c=-1;++c<n.length;)for(d=n[c],u="",p="",g=d.charAt(0),m=d,y=d.slice(1),f=g.toLowerCase()!==g,h=_e(d),v=-1;++v<=d.length;)for(u+=p,w=m,m=y,y=m.slice(1),p=g,g=d.charAt(v+1),k=f,g&&(f=g.toLowerCase()!==g),m&&k!==f&&(O(u+R(m)),O(u+R(g)+R(p)+y)),O(u+m),m&&O(u+g+p+y),E=-1;++E<a.length;)P=a[E],k&&P!==P.toUpperCase()?(h!=="s"&&(O(u+P+w),O(u+P+m)),P=P.toUpperCase(),O(u+P+w),O(u+P+m)):(O(u+P+w),O(u+P+m));return o;function O(N,C){var b=t.state[N],x;b!==!!b&&(o.push(N),x=Xn(e,N),b=x&&!Yn(s,"NOSUGGEST",i[x]),t.state[N]=b,b&&(t.weighted[N]=C?10:0,t.suggestions.push(N))),b&&t.weighted[N]++}function R(N){var C=N.charAt(0);return(C.toLowerCase()===C?C.toUpperCase():C.toLowerCase())+N.slice(1)}}var tr=He,ct=Re,nr=rr;function rr(e){var t=this,n=tr(t,e,!0);return{correct:t.correct(e),forbidden:!!(n&&ct(t.flags,"FORBIDDENWORD",t.data[n])),warn:!!(n&&ct(t.flags,"WARN",t.data[n]))}}var ar=jt;function jt(e,t,n,r){for(var a=-1,i,s,o,c,d;++a<t.entries.length;)if(i=t.entries[a],c=i.continuation,d=-1,(!i.match||i.match.test(e))&&(s=i.remove?e.replace(i.remove,""):e,s=t.type==="SFX"?s+i.add:i.add+s,r.push(s),c&&c.length))for(;++d<c.length;)o=n[c[d]],o&&jt(s,o,n,r);return r}var lt=ar,Mt=or,ir=[].push,Ue=[];function sr(e,t,n){var r=e[t];t in e?r===Ue?e[t]=n.concat():ir.apply(r,n):e[t]=n.concat()}function or(e,t,n,r){var a=-1,i,s,o,c,d,u,p;for((!("NEEDAFFIX"in r.flags)||n.indexOf(r.flags.NEEDAFFIX)<0)&&sr(e,t,n);++a<n.length;)if(i=r.rules[n[a]],n[a]in r.compoundRuleCodes&&r.compoundRuleCodes[n[a]].push(t),i){for(u=lt(t,i,r.rules,[]),s=-1;++s<u.length;)if(u[s]in e||(e[u[s]]=Ue),i.combineable){for(o=a;++o<n.length;)if(d=r.rules[n[o]],d&&d.combineable&&i.type!==d.type)for(p=lt(u[s],d,r.rules,[]),c=-1;++c<p.length;)p[c]in e||(e[p[c]]=Ue)}}}var cr=Mt,lr=dr,ur=[];function dr(e,t){var n=this;return cr(n.data,e,n.data[t]||ur,n),n}var fr=pr;function pr(e){var t=this;return delete t.data[e],t}var hr=mr;function mr(){return this.flags.WORDCHARS||null}var vr=Tt,gr=Mt,yr=br,ut=/\s/g;function br(e,t,n){for(var r=e.toString("utf8"),a=r.indexOf(`
`)+1,i=r.indexOf(`
`,a);i>-1;)r.charCodeAt(a)!==9&&dt(r.slice(a,i),t,n),a=i+1,i=r.indexOf(`
`,a);dt(r.slice(a),t,n)}function dt(e,t,n){for(var r=e.indexOf("/"),a=e.indexOf("#"),i="",s,o;r>-1&&e.charCodeAt(r-1)===92;)e=e.slice(0,r-1)+e.slice(r),r=e.indexOf("/",r);a>-1?r>-1&&r<a?(s=e.slice(0,r),ut.lastIndex=r+1,o=ut.exec(e),i=e.slice(r+1,o?o.index:void 0)):s=e.slice(0,a):r>-1?(s=e.slice(0,r),i=e.slice(r+1)):s=e,s=s.trim(),s&&gr(n,s,vr(t.flags,i.trim()),t)}var wr=yr,_r=kr;function kr(e){var t=this,n=-1,r,a,i,s;for(wr(e,t,t.data);++n<t.compoundRules.length;){for(r=t.compoundRules[n],a="",s=-1;++s<r.length;)i=r.charAt(s),a+=t.compoundRuleCodes[i].length?"(?:"+t.compoundRuleCodes[i].join("|")+")":i;t.compoundRules[n]=new RegExp(a,"i")}return t}var Ar=Or;function Or(e){var t=this,n=e.toString("utf8").split(`
`),r=-1,a,i,s,o;for(t.flags.FORBIDDENWORD===void 0&&(t.flags.FORBIDDENWORD=!1),o=t.flags.FORBIDDENWORD;++r<n.length;)a=n[r].trim(),a&&(a=a.split("/"),s=a[0],i=s.charAt(0)==="*",i&&(s=s.slice(1)),t.add(s,a[1]),i&&t.data[s].push(o));return t}var ft=Cn,Pr=Dn,Sr=Ae,V=Ae.prototype;V.correct=zn;V.suggest=Zn;V.spell=nr;V.add=lr;V.remove=fr;V.wordCharacters=hr;V.dictionary=_r;V.personal=Ar;function Ae(e,t){var n=-1,r;if(!(this instanceof Ae))return new Ae(e,t);if(typeof e=="string"||ft(e)?(typeof t=="string"||ft(t))&&(r=[{dic:t}]):e&&("length"in e?(r=e,e=e[0]&&e[0].aff):(e.dic&&(r=[e]),e=e.aff)),!e)throw new Error("Missing `aff` in dictionary");if(e=Pr(e),this.data=Object.create(null),this.compoundRuleCodes=e.compoundRuleCodes,this.replacementTable=e.replacementTable,this.conversion=e.conversion,this.compoundRules=e.compoundRules,this.rules=e.rules,this.flags=e.flags,r)for(;++n<r.length;)r[n].dic&&this.dictionary(r[n].dic)}const xr=xe(Sr),Nr=({suggestions:e,handleSuggestionClick:t,handleIgnoreSuggestionClick:n})=>l("ul",{className:"spelling-suggestion-list",children:e.map(r=>_("li",{className:"spelling-suggestion-list__item",children:[r.suggestions.map(a=>l(T,{className:"intake-item-edit__btn spelling-suggestion-list__btn",onClickFn:()=>t(r.original,a),children:l("span",{children:a})},a)),l(T,{className:"intake-item-edit__btn spelling-suggestion-list__btn",onClickFn:()=>n(r.original),children:l("span",{children:"ignore"})})]},r.original))}),Cr="calorie";async function Rr(e){const t=await Ne.post(`${Cr}/item`,e);return Ce(t)}const Er={getCaloriesForItem:Rr},pt=({intakeItem:e,idx:t,handleChange:n})=>{const[r,a]=A.useState(!1),[i,s]=A.useState(!1),[o,c]=A.useState(""),[d,u]=A.useState("idle"),[p,g]=A.useState([]),[m,y]=A.useState(null),f=A.useRef(null),h=p.length>0&&p[0].suggestions.length>0&&!r&&m;function v(b){b.preventDefault();const{value:x,name:D}=b.target;switch(D){case"name":if(n({...e,name:x},t),a(!x.length),x.length||g([]),!f.current)return;f.current(x);break;case"quantity":n({...e,quantity:Number(x)},t);break;case"calories":{const L={...e,calories:Number(x)};delete L.caloriesPer100g,n(L,t),c("caloriesPer100g");break}case"caloriesPer100g":{const j=Number(x)*(e.quantity/100);n({...e,caloriesPer100g:Number(x),calories:j},t),c("calories");break}}}function w(){const b=q.getQuantityStepPerUnit(e.unit);e.quantity-b<1||n({...e,quantity:e.quantity-b},t)}function k(){const b=q.getQuantityStepPerUnit(e.unit);n({...e,quantity:e.quantity+b},t)}function P(b){b.preventDefault();const x=q.units.indexOf(e.unit),D=x===q.units.length-1?q.units[0]:q.units[x+1],L=q.getUnitDefaultQuantity(D);n({...e,unit:D,quantity:L},t)}function E(){const b={...e};i&&(delete b.calories,delete b.caloriesPer100g,c("")),s(x=>!x),n(b,t)}async function O(){if(e.name.length)try{u("pending");const b=await Er.getCaloriesForItem(e);u("resolved"),n({...e,calories:b},t),s(!0)}catch(b){console.error(b),u("error")}}function R(){const{name:b,unit:x,quantity:D}=e;b==="water"&&x===me.MILLILITER&&D===750||n({...e,name:"water",unit:me.MILLILITER,quantity:750},t)}function N(b,x){const D=e.name.replace(b,x),L=p.filter(j=>j.original!==b);g(L),n({...e,name:D},t)}function C(b){const x=p.filter(D=>D.original!==b);g(x)}return A.useEffect(()=>{Promise.all([fetch("/assets/dictionaries/en_US.aff").then(b=>b.text()),fetch("/assets/dictionaries/en_US.dic").then(b=>b.text())]).then(([b,x])=>{const D=new xr(b,x);y(D)}).catch(b=>{console.error("Failed to load dictionaries:",b)})},[]),A.useEffect(()=>{function b(x){if(!m)return;const D=new Set(["nes","ness"]),j=x.split(" ").filter(G=>!D.has(G)).map(G=>({original:G,suggestions:m.suggest(G)}));g(j)}f.current=ze(b,1e3).debouncedFunc},[m]),A.useEffect(()=>{d==="error"&&setTimeout(()=>u("idle"),3e3)},[d]),_("section",{className:"intake-item-edit",children:[l("input",{type:"text",name:"name",className:"intake-item-input",value:e.name,onChange:v,spellCheck:!0,autoComplete:"off",placeholder:"Enter food name"}),h&&l(Nr,{suggestions:p,handleSuggestionClick:N,handleIgnoreSuggestionClick:C}),_("div",{className:"intake-item-edit-inputs-container",children:[_("div",{className:"quantity-input-container",children:[l(T,{onClickFn:w,children:l(xn,{})}),l("input",{type:"number",name:"quantity",className:"intake-item-input quantity-input",value:e.quantity,onChange:v}),l(T,{onClickFn:k,children:l(Nn,{})})]}),l(T,{onClickFn:P,className:"intake-item-edit__btn",children:l("span",{children:e.unit})}),l(T,{onClickFn:R,className:"intake-item-edit__btn"+(e.name==="water"?" active":""),children:l("span",{children:"water"})}),l(T,{onClickFn:E,className:"intake-item-edit__btn",children:l("span",{children:i?"Manual":"Auto"})}),l(T,{onClickFn:O,className:"intake-item-edit__btn calc-calories-btn",children:d==="pending"?l(ue,{withContainer:!0,containerSize:{width:"100%"}}):l("span",{children:"calc"})})]}),i&&_("div",{className:"intake-item-edit__manuall-calorie-edit",children:[l("input",{type:"number",name:"calories",className:"intake-item-input"+(o==="calories"?" faded":""),value:e.calories||"",placeholder:"Calories",onChange:v,onClick:()=>c("")}),l("input",{type:"number",name:"caloriesPer100g",className:"intake-item-input"+(o==="caloriesPer100g"?" faded":""),value:e.caloriesPer100g||"",placeholder:"Calories per 100g",onChange:v,onClick:()=>c("")})]}),d==="error"&&l(Nt,{msg:"Failed to calculate calories!"})]})};function Ir(e,t){if(!e||!t)return 0;const n=t.weight||e.weight,r=Number((n*33).toFixed(2)),a=t.intakes.filter(i=>i.isRecorded).reduce((i,s)=>s.items.reduce((o,c)=>{if(c.name.toLocaleLowerCase()==="water")switch(c.unit){case"ml":return o+c.quantity;case"cup":return o+c.quantity*250;default:return o}return o},i),0)||0;return Number(((r-a)/1e3).toFixed(2))}const Dr={calcRecommendedWaterIntake:Ir};var M=(e=>(e.IntakeEdit="IntakeEdit",e.IntakeList="IntakeList",e.UnRecordedIntakeList="UnRecordedIntakeList",e.WeightWaistInput="WeightWaistInput",e.Workouts="Workouts",e.Query="Query",e))(M||{});const Ft=A.createContext(void 0);function Lr({children:e}){const{loggedInUser:t}=St(),{dailyData:n,isLoading:r,isSuccess:a,isError:i}=xt(),{updateDailyData:s,isLoading:o}=Qt(),[c,d]=A.useState("IntakeEdit"),[u,p]=A.useState(q.getDefaultIntake()),g=(n==null?void 0:n.intakes.filter(R=>R.isRecorded))||[],m=(n==null?void 0:n.intakes.filter(R=>!R.isRecorded))||[],y=ne.getTotalCalories(n),f=ne.calcRemainingCalories(t,n),h=(n==null?void 0:n.targetCaloricIntake)??(t==null?void 0:t.targetCaloricIntakePerDay)??0,v=ne.calcEstimatedBodyFatStatusPerDay(t,n),w=Math.round(y/h*100),k=Math.round(f/h*100),P=Dr.calcRecommendedWaterIntake(t,n),E=ne.getBcgByCosumedCalories({consumedCalories:y,targetCalorie:h});A.useEffect(()=>{!a||!n||n!=null&&n.weight||d("WeightWaistInput")},[n,a]);const O={dailyData:n,isLoading:r,isSuccess:a,isError:i,updateDailyData:s,isLoadingUpdate:o,recordedIntakes:g,unrecordedIntakes:m,remainingCalories:f,consumedCalories:y,targetCaloricIntakePerDay:h,estimatedKGChange:v,backgroundColor:E,openedElement:c,setOpenedElement:d,recommendedWaterIntake:P,intake:u,setIntake:p,calConsumedPct:w,calRemainingPct:k};return l(Ft.Provider,{value:O,children:e})}function de(){const e=A.useContext(Ft);if(e===void 0)throw new Error("useDayEdit must be used within a DayEditProvider");return e}const Tr=()=>{const{dailyData:e,isLoading:t,isLoadingUpdate:n,intake:r,updateDailyData:a,setIntake:i,backgroundColor:s}=de(),[o,c]=A.useState(!1),d=!o&&!t&&!n;function u(){i(f=>({...f,items:[...f.items,q.getDefaultIntakeItem()]}))}function p(f){r.items.length!==1&&i(h=>({...h,items:h.items.filter((v,w)=>w!==f)}))}function g(){i(f=>({...f,recordedAt:f.recordedAt?null:new Date,isRecorded:!f.isRecorded}))}function m(f,h){i(v=>({...v,items:v.items.map((w,k)=>k===h?f:w)}))}function y(f){if(f.preventDefault(),!e||!r.items.every(k=>k.name.length&&k.quantity>0))return;r.recordedAt=new Date;const w=!e.intakes.some(k=>k.id===r.id)?[...e.intakes,r]:e.intakes.map(k=>k.id===r.id?r:k);a({...e,intakes:w}),i(q.getDefaultIntake())}return _("form",{className:"intake-edit",onSubmit:y,"data-testid":"intake-edit",children:[d&&l(se,{children:l("div",{className:"intake-edit__list-container",children:l(ke,{items:r.items,render:(f,h,v)=>h===v.length-1?_("div",{className:"last-intake-edit-item-container",children:[l(pt,{intakeItem:f,idx:h,handleChange:m}),_("div",{className:"last-intake-edit-item__btn-container",children:[v.length>1&&l(T,{onClickFn:()=>p(h),children:"remove item"}),l(T,{onClickFn:u,children:"add item"})]})]},h):l(pt,{intakeItem:f,idx:h,handleChange:m},h)})})}),(t||n)&&l(ue,{withContainer:!0,containerSize:{height:"75px",width:"100%"}}),o&&l(se,{children:l(ke,{items:r.items,render:(f,h)=>_("p",{className:"intake-edit-review-list__item",children:[l("span",{children:`${h+1})`}),l("p",{children:`${f.name} - ${f.quantity} ${f.unit} ${f.calories?`- Calories ${f.calories}`:""}`})]}),className:"intake-edit-review-list"})}),_("div",{className:"intake-edit-btns-container",style:{backgroundColor:s},children:[l(T,{onClickFn:g,className:"intake-edit-btn btn-toggle-save-later"+(r.isRecorded?"":" clicked"),children:"Save Later"}),l(T,{onClickFn:()=>c(f=>!f),className:"intake-edit-btn",children:o?"Edit":"Review"}),l(T,{onClickFn:f=>y(f),className:"intake-edit-btn",type:"submit",children:"Save"})]})]})};const $r=()=>{const{dailyData:e,setOpenedElement:t}=de();if(!e)return null;const n=[{name:"add",value:M.IntakeEdit},{name:"intakes",value:M.IntakeList},{name:"unrecorded",value:M.UnRecordedIntakeList},{name:"weight",value:M.WeightWaistInput},{name:"workouts",value:M.Workouts,isShown:(e==null?void 0:e.workouts.length)>0},{name:"query",value:M.Query}];return l("ul",{className:"filter",children:n.map(r=>r.isShown===!1?null:l("li",{className:"filter__item",children:l(T,{className:"btn",onClickFn:()=>t(r.value),children:r.name})},r.value))})};var jr=["points","className","baseLinePoints","connectNulls"];function ae(){return ae=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ae.apply(this,arguments)}function Mr(e,t){if(e==null)return{};var n=Fr(e,t),r,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)r=i[a],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function Fr(e,t){if(e==null)return{};var n={},r=Object.keys(e),a,i;for(i=0;i<r.length;i++)a=r[i],!(t.indexOf(a)>=0)&&(n[a]=e[a]);return n}function ht(e){return Kr(e)||Wr(e)||Ur(e)||Br()}function Br(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Ur(e,t){if(e){if(typeof e=="string")return We(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return We(e,t)}}function Wr(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function Kr(e){if(Array.isArray(e))return We(e)}function We(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var mt=function(t){return t&&t.x===+t.x&&t.y===+t.y},qr=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],n=[[]];return t.forEach(function(r){mt(r)?n[n.length-1].push(r):n[n.length-1].length>0&&n.push([])}),mt(t[0])&&n[n.length-1].push(t[0]),n[n.length-1].length<=0&&(n=n.slice(0,-1)),n},pe=function(t,n){var r=qr(t);n&&(r=[r.reduce(function(i,s){return[].concat(ht(i),ht(s))},[])]);var a=r.map(function(i){return i.reduce(function(s,o,c){return"".concat(s).concat(c===0?"M":"L").concat(o.x,",").concat(o.y)},"")}).join("");return r.length===1?"".concat(a,"Z"):a},Gr=function(t,n,r){var a=pe(t,r);return"".concat(a.slice(-1)==="Z"?a.slice(0,-1):a,"L").concat(pe(n.reverse(),r).slice(1))},zr=function(t){var n=t.points,r=t.className,a=t.baseLinePoints,i=t.connectNulls,s=Mr(t,jr);if(!n||!n.length)return null;var o=Dt("recharts-polygon",r);if(a&&a.length){var c=s.stroke&&s.stroke!=="none",d=Gr(n,a,i);return S.createElement("g",{className:o},S.createElement("path",ae({},$(s,!0),{fill:d.slice(-1)==="Z"?s.fill:"none",stroke:"none",d})),c?S.createElement("path",ae({},$(s,!0),{fill:"none",d:pe(n,i)})):null,c?S.createElement("path",ae({},$(s,!0),{fill:"none",d:pe(a,i)})):null)}var u=pe(n,i);return S.createElement("path",ae({},$(s,!0),{fill:u.slice(-1)==="Z"?s.fill:"none",className:o,d:u}))},Qr=Ct,Vr=Rt,Hr=en;function Yr(e,t){return e&&e.length?Qr(e,Vr(t),Hr):void 0}var Xr=Yr;const Zr=xe(Xr);var Jr=Ct,ea=tn,ta=Rt;function na(e,t){return e&&e.length?Jr(e,ta(t),ea):void 0}var ra=na;const aa=xe(ra);var ia=["cx","cy","angle","ticks","axisLine"],sa=["ticks","tick","angle","tickFormatter","stroke"];function oe(e){"@babel/helpers - typeof";return oe=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},oe(e)}function he(){return he=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},he.apply(this,arguments)}function vt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function H(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?vt(Object(n),!0).forEach(function(r){Ee(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):vt(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function gt(e,t){if(e==null)return{};var n=oa(e,t),r,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)r=i[a],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function oa(e,t){if(e==null)return{};var n={},r=Object.keys(e),a,i;for(i=0;i<r.length;i++)a=r[i],!(t.indexOf(a)>=0)&&(n[a]=e[a]);return n}function ca(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function yt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Bt(r.key),r)}}function la(e,t,n){return t&&yt(e.prototype,t),n&&yt(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function ua(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Ke(e,t)}function Ke(e,t){return Ke=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,a){return r.__proto__=a,r},Ke(e,t)}function da(e){var t=ha();return function(){var r=Oe(e),a;if(t){var i=Oe(this).constructor;a=Reflect.construct(r,arguments,i)}else a=r.apply(this,arguments);return fa(this,a)}}function fa(e,t){if(t&&(oe(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return pa(e)}function pa(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ha(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Oe(e){return Oe=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Oe(e)}function Ee(e,t,n){return t=Bt(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Bt(e){var t=ma(e,"string");return oe(t)==="symbol"?t:String(t)}function ma(e,t){if(oe(e)!=="object"||e===null)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(oe(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Ie=function(e){ua(n,e);var t=da(n);function n(){return ca(this,n),t.apply(this,arguments)}return la(n,[{key:"getTickValueCoord",value:function(a){var i=a.coordinate,s=this.props,o=s.angle,c=s.cx,d=s.cy;return Q(c,d,i,o)}},{key:"getTickTextAnchor",value:function(){var a=this.props.orientation,i;switch(a){case"left":i="end";break;case"right":i="start";break;default:i="middle";break}return i}},{key:"getViewBox",value:function(){var a=this.props,i=a.cx,s=a.cy,o=a.angle,c=a.ticks,d=aa(c,function(p){return p.coordinate||0}),u=Zr(c,function(p){return p.coordinate||0});return{cx:i,cy:s,startAngle:o,endAngle:o,innerRadius:u.coordinate||0,outerRadius:d.coordinate||0}}},{key:"renderAxisLine",value:function(){var a=this.props,i=a.cx,s=a.cy,o=a.angle,c=a.ticks,d=a.axisLine,u=gt(a,ia),p=c.reduce(function(f,h){return[Math.min(f[0],h.coordinate),Math.max(f[1],h.coordinate)]},[1/0,-1/0]),g=Q(i,s,p[0],o),m=Q(i,s,p[1],o),y=H(H(H({},$(u)),{},{fill:"none"},$(d)),{},{x1:g.x,y1:g.y,x2:m.x,y2:m.y});return S.createElement("line",he({className:"recharts-polar-radius-axis-line"},y))}},{key:"renderTicks",value:function(){var a=this,i=this.props,s=i.ticks,o=i.tick,c=i.angle,d=i.tickFormatter,u=i.stroke,p=gt(i,sa),g=this.getTickTextAnchor(),m=$(p),y=$(o),f=s.map(function(h,v){var w=a.getTickValueCoord(h),k=H(H(H(H({textAnchor:g,transform:"rotate(".concat(90-c,", ").concat(w.x,", ").concat(w.y,")")},m),{},{stroke:"none",fill:u},y),{},{index:v},w),{},{payload:h});return S.createElement(B,he({className:"recharts-polar-radius-axis-tick",key:"tick-".concat(v)},Ve(a.props,h,v)),n.renderTickItem(o,k,d?d(h.value,v):h.value))});return S.createElement(B,{className:"recharts-polar-radius-axis-ticks"},f)}},{key:"render",value:function(){var a=this.props,i=a.ticks,s=a.axisLine,o=a.tick;return!i||!i.length?null:S.createElement(B,{className:"recharts-polar-radius-axis"},s&&this.renderAxisLine(),o&&this.renderTicks(),Et.renderCallByParent(this.props,this.getViewBox()))}}],[{key:"renderTickItem",value:function(a,i,s){var o;return S.isValidElement(a)?o=S.cloneElement(a,i):X(a)?o=a(i):o=S.createElement(Qe,he({},i,{className:"recharts-polar-radius-axis-tick-value"}),s),o}}]),n}(A.PureComponent);Ee(Ie,"displayName","PolarRadiusAxis");Ee(Ie,"axisType","radiusAxis");Ee(Ie,"defaultProps",{type:"number",radiusAxisId:0,cx:0,cy:0,angle:0,orientation:"right",stroke:"#ccc",axisLine:!0,tick:!0,tickCount:5,allowDataOverflow:!1,scale:"auto",allowDuplicatedCategory:!0});function ce(e){"@babel/helpers - typeof";return ce=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ce(e)}function Z(){return Z=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Z.apply(this,arguments)}function bt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function Y(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?bt(Object(n),!0).forEach(function(r){De(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):bt(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function va(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function wt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Ut(r.key),r)}}function ga(e,t,n){return t&&wt(e.prototype,t),n&&wt(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function ya(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&qe(e,t)}function qe(e,t){return qe=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,a){return r.__proto__=a,r},qe(e,t)}function ba(e){var t=ka();return function(){var r=Pe(e),a;if(t){var i=Pe(this).constructor;a=Reflect.construct(r,arguments,i)}else a=r.apply(this,arguments);return wa(this,a)}}function wa(e,t){if(t&&(ce(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return _a(e)}function _a(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ka(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Pe(e){return Pe=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Pe(e)}function De(e,t,n){return t=Ut(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ut(e){var t=Aa(e,"string");return ce(t)==="symbol"?t:String(t)}function Aa(e,t){if(ce(e)!=="object"||e===null)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(ce(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Oa=Math.PI/180,_t=1e-5,Le=function(e){ya(n,e);var t=ba(n);function n(){return va(this,n),t.apply(this,arguments)}return ga(n,[{key:"getTickLineCoord",value:function(a){var i=this.props,s=i.cx,o=i.cy,c=i.radius,d=i.orientation,u=i.tickSize,p=u||8,g=Q(s,o,c,a.coordinate),m=Q(s,o,c+(d==="inner"?-1:1)*p,a.coordinate);return{x1:g.x,y1:g.y,x2:m.x,y2:m.y}}},{key:"getTickTextAnchor",value:function(a){var i=this.props.orientation,s=Math.cos(-a.coordinate*Oa),o;return s>_t?o=i==="outer"?"start":"end":s<-_t?o=i==="outer"?"end":"start":o="middle",o}},{key:"renderAxisLine",value:function(){var a=this.props,i=a.cx,s=a.cy,o=a.radius,c=a.axisLine,d=a.axisLineType,u=Y(Y({},$(this.props)),{},{fill:"none"},$(c));if(d==="circle")return S.createElement(nn,Z({className:"recharts-polar-angle-axis-line"},u,{cx:i,cy:s,r:o}));var p=this.props.ticks,g=p.map(function(m){return Q(i,s,o,m.coordinate)});return S.createElement(zr,Z({className:"recharts-polar-angle-axis-line"},u,{points:g}))}},{key:"renderTicks",value:function(){var a=this,i=this.props,s=i.ticks,o=i.tick,c=i.tickLine,d=i.tickFormatter,u=i.stroke,p=$(this.props),g=$(o),m=Y(Y({},p),{},{fill:"none"},$(c)),y=s.map(function(f,h){var v=a.getTickLineCoord(f),w=a.getTickTextAnchor(f),k=Y(Y(Y({textAnchor:w},p),{},{stroke:"none",fill:u},g),{},{index:h,payload:f,x:v.x2,y:v.y2});return S.createElement(B,Z({className:"recharts-polar-angle-axis-tick",key:"tick-".concat(h)},Ve(a.props,f,h)),c&&S.createElement("line",Z({className:"recharts-polar-angle-axis-tick-line"},m,v)),o&&n.renderTickItem(o,k,d?d(f.value,h):f.value))});return S.createElement(B,{className:"recharts-polar-angle-axis-ticks"},y)}},{key:"render",value:function(){var a=this.props,i=a.ticks,s=a.radius,o=a.axisLine;return s<=0||!i||!i.length?null:S.createElement(B,{className:"recharts-polar-angle-axis"},o&&this.renderAxisLine(),this.renderTicks())}}],[{key:"renderTickItem",value:function(a,i,s){var o;return S.isValidElement(a)?o=S.cloneElement(a,i):X(a)?o=a(i):o=S.createElement(Qe,Z({},i,{className:"recharts-polar-angle-axis-tick-value"}),s),o}}]),n}(A.PureComponent);De(Le,"displayName","PolarAngleAxis");De(Le,"axisType","angleAxis");De(Le,"defaultProps",{type:"category",angleAxisId:0,scale:"auto",cx:0,cy:0,orientation:"outer",axisLine:!0,tickLine:!0,tickSize:8,tick:!0,hide:!1,allowDuplicatedCategory:!0});var Pa=rn,Sa=Pa(Object.getPrototypeOf,Object),xa=Sa,Na=an,Ca=xa,Ra=sn,Ea="[object Object]",Ia=Function.prototype,Da=Object.prototype,Wt=Ia.toString,La=Da.hasOwnProperty,Ta=Wt.call(Object);function $a(e){if(!Ra(e)||Na(e)!=Ea)return!1;var t=Ca(e);if(t===null)return!0;var n=La.call(t,"constructor")&&t.constructor;return typeof n=="function"&&n instanceof n&&Wt.call(n)==Ta}var ja=$a;const Ma=xe(ja);function le(e){"@babel/helpers - typeof";return le=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},le(e)}function J(){return J=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},J.apply(this,arguments)}function kt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function I(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?kt(Object(n),!0).forEach(function(r){F(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):kt(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Fa(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function At(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Kt(r.key),r)}}function Ba(e,t,n){return t&&At(e.prototype,t),n&&At(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function Ua(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Ge(e,t)}function Ge(e,t){return Ge=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,a){return r.__proto__=a,r},Ge(e,t)}function Wa(e){var t=qa();return function(){var r=Se(e),a;if(t){var i=Se(this).constructor;a=Reflect.construct(r,arguments,i)}else a=r.apply(this,arguments);return Ka(this,a)}}function Ka(e,t){if(t&&(le(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return te(e)}function te(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function qa(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Se(e){return Se=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Se(e)}function F(e,t,n){return t=Kt(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Kt(e){var t=Ga(e,"string");return le(t)==="symbol"?t:String(t)}function Ga(e,t){if(le(e)!=="object"||e===null)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(le(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var U=function(e){Ua(n,e);var t=Wa(n);function n(r){var a;return Fa(this,n),a=t.call(this,r),F(te(a),"pieRef",null),F(te(a),"sectorRefs",[]),F(te(a),"id",cn("recharts-pie-")),F(te(a),"handleAnimationEnd",function(){var i=a.props.onAnimationEnd;a.setState({isAnimationFinished:!0}),X(i)&&i()}),F(te(a),"handleAnimationStart",function(){var i=a.props.onAnimationStart;a.setState({isAnimationFinished:!1}),X(i)&&i()}),a.state={isAnimationFinished:!r.isAnimationActive,prevIsAnimationActive:r.isAnimationActive,prevAnimationId:r.animationId,sectorToFocus:0},a}return Ba(n,[{key:"isActiveIndex",value:function(a){var i=this.props.activeIndex;return Array.isArray(i)?i.indexOf(a)!==-1:a===i}},{key:"hasActiveIndex",value:function(){var a=this.props.activeIndex;return Array.isArray(a)?a.length!==0:a||a===0}},{key:"renderLabels",value:function(a){var i=this.props.isAnimationActive;if(i&&!this.state.isAnimationFinished)return null;var s=this.props,o=s.label,c=s.labelLine,d=s.dataKey,u=s.valueKey,p=$(this.props),g=$(o),m=$(c),y=o&&o.offsetRadius||20,f=a.map(function(h,v){var w=(h.startAngle+h.endAngle)/2,k=Q(h.cx,h.cy,h.outerRadius+y,w),P=I(I(I(I({},p),h),{},{stroke:"none"},g),{},{index:v,textAnchor:n.getTextAnchor(k.x,h.cx)},k),E=I(I(I(I({},p),h),{},{fill:"none",stroke:h.fill},m),{},{index:v,points:[Q(h.cx,h.cy,h.outerRadius,w),k],key:"line"}),O=d;return ie(d)&&ie(u)?O="value":ie(d)&&(O=u),S.createElement(B,{key:"label-".concat(v)},c&&n.renderLabelLineItem(c,E),n.renderLabelItem(o,P,ee(h,O)))});return S.createElement(B,{className:"recharts-pie-labels"},f)}},{key:"renderSectorsStatically",value:function(a){var i=this,s=this.props,o=s.activeShape,c=s.blendStroke,d=s.inactiveShape;return a.map(function(u,p){var g=d&&i.hasActiveIndex()?d:null,m=i.isActiveIndex(p)?o:g,y=I(I({},u),{},{stroke:c?u.fill:u.stroke});return S.createElement(B,J({ref:function(h){h&&!i.sectorRefs.includes(h)&&i.sectorRefs.push(h)},tabIndex:-1,className:"recharts-pie-sector"},Ve(i.props,u,p),{key:"sector-".concat(p)}),n.renderSectorItem(m,y))})}},{key:"renderSectorsWithAnimation",value:function(){var a=this,i=this.props,s=i.sectors,o=i.isAnimationActive,c=i.animationBegin,d=i.animationDuration,u=i.animationEasing,p=i.animationId,g=this.state,m=g.prevSectors,y=g.prevIsAnimationActive;return S.createElement(un,{begin:c,duration:d,isActive:o,easing:u,from:{t:0},to:{t:1},key:"pie-".concat(p,"-").concat(y),onAnimationStart:this.handleAnimationStart,onAnimationEnd:this.handleAnimationEnd},function(f){var h=f.t,v=[],w=s&&s[0],k=w.startAngle;return s.forEach(function(P,E){var O=m&&m[E],R=E>0?dn(P,"paddingAngle",0):0;if(O){var N=tt(O.endAngle-O.startAngle,P.endAngle-P.startAngle),C=I(I({},P),{},{startAngle:k+R,endAngle:k+N(h)+R});v.push(C),k=C.endAngle}else{var b=P.endAngle,x=P.startAngle,D=tt(0,b-x),L=D(h),j=I(I({},P),{},{startAngle:k+R,endAngle:k+L+R});v.push(j),k=j.endAngle}}),S.createElement(B,null,a.renderSectorsStatically(v))})}},{key:"attachKeyboardHandlers",value:function(a){var i=this;a.onkeydown=function(s){if(!s.altKey)switch(s.key){case"ArrowLeft":{var o=++i.state.sectorToFocus%i.sectorRefs.length;i.sectorRefs[o].focus(),i.setState({sectorToFocus:o});break}case"ArrowRight":{var c=--i.state.sectorToFocus<0?i.sectorRefs.length-1:i.state.sectorToFocus%i.sectorRefs.length;i.sectorRefs[c].focus(),i.setState({sectorToFocus:c});break}case"Escape":{i.sectorRefs[i.state.sectorToFocus].blur(),i.setState({sectorToFocus:0});break}}}}},{key:"renderSectors",value:function(){var a=this.props,i=a.sectors,s=a.isAnimationActive,o=this.state.prevSectors;return s&&i&&i.length&&(!o||!fn(o,i))?this.renderSectorsWithAnimation():this.renderSectorsStatically(i)}},{key:"componentDidMount",value:function(){this.pieRef&&this.attachKeyboardHandlers(this.pieRef)}},{key:"render",value:function(){var a=this,i=this.props,s=i.hide,o=i.sectors,c=i.className,d=i.label,u=i.cx,p=i.cy,g=i.innerRadius,m=i.outerRadius,y=i.isAnimationActive,f=this.state.isAnimationFinished;if(s||!o||!o.length||!re(u)||!re(p)||!re(g)||!re(m))return null;var h=Dt("recharts-pie",c);return S.createElement(B,{tabIndex:this.props.rootTabIndex,className:h,ref:function(w){a.pieRef=w}},this.renderSectors(),d&&this.renderLabels(o),Et.renderCallByParent(this.props,null,!1),(!y||f)&&pn.renderCallByParent(this.props,o,!1))}}],[{key:"getDerivedStateFromProps",value:function(a,i){return i.prevIsAnimationActive!==a.isAnimationActive?{prevIsAnimationActive:a.isAnimationActive,prevAnimationId:a.animationId,curSectors:a.sectors,prevSectors:[],isAnimationFinished:!0}:a.isAnimationActive&&a.animationId!==i.prevAnimationId?{prevAnimationId:a.animationId,curSectors:a.sectors,prevSectors:i.curSectors,isAnimationFinished:!0}:a.sectors!==i.curSectors?{curSectors:a.sectors,isAnimationFinished:!0}:null}},{key:"getTextAnchor",value:function(a,i){return a>i?"start":a<i?"end":"middle"}},{key:"renderLabelLineItem",value:function(a,i){return S.isValidElement(a)?S.cloneElement(a,i):X(a)?a(i):S.createElement(ln,J({},i,{type:"linear",className:"recharts-pie-label-line"}))}},{key:"renderLabelItem",value:function(a,i,s){if(S.isValidElement(a))return S.cloneElement(a,i);var o=s;return X(a)&&(o=a(i),S.isValidElement(o))?o:S.createElement(Qe,J({},i,{alignmentBaseline:"middle",className:"recharts-pie-label-text"}),o)}},{key:"renderSectorItem",value:function(a,i){return S.isValidElement(a)?S.cloneElement(a,i):X(a)?a(i):Ma(a)?S.createElement(et,J({tabIndex:-1},i,a)):S.createElement(et,J({tabIndex:-1},i))}}]),n}(A.PureComponent);F(U,"displayName","Pie");F(U,"defaultProps",{stroke:"#fff",fill:"#808080",legendType:"rect",cx:"50%",cy:"50%",startAngle:0,endAngle:360,innerRadius:0,outerRadius:"80%",paddingAngle:0,labelLine:!0,hide:!1,minAngle:0,isAnimationActive:!on.isSsr,animationBegin:400,animationDuration:1500,animationEasing:"ease",nameKey:"name",blendStroke:!1,rootTabIndex:0});F(U,"parseDeltaAngle",function(e,t){var n=we(t-e),r=Math.min(Math.abs(t-e),360);return n*r});F(U,"getRealPieData",function(e){var t=e.props,n=t.data,r=t.children,a=$(e.props),i=hn(r,It);return n&&n.length?n.map(function(s,o){return I(I(I({payload:s},a),s),i&&i[o]&&i[o].props)}):i&&i.length?i.map(function(s){return I(I({},a),s.props)}):[]});F(U,"parseCoordinateOfPie",function(e,t){var n=t.top,r=t.left,a=t.width,i=t.height,s=mn(a,i),o=r+ye(e.props.cx,a,a/2),c=n+ye(e.props.cy,i,i/2),d=ye(e.props.innerRadius,s,0),u=ye(e.props.outerRadius,s,s*.8),p=e.props.maxRadius||Math.sqrt(a*a+i*i)/2;return{cx:o,cy:c,innerRadius:d,outerRadius:u,maxRadius:p}});F(U,"getComposedData",function(e){var t=e.item,n=e.offset,r=U.getRealPieData(t);if(!r||!r.length)return null;var a=t.props,i=a.cornerRadius,s=a.startAngle,o=a.endAngle,c=a.paddingAngle,d=a.dataKey,u=a.nameKey,p=a.valueKey,g=a.tooltipType,m=Math.abs(t.props.minAngle),y=U.parseCoordinateOfPie(t,n),f=U.parseDeltaAngle(s,o),h=Math.abs(f),v=d;ie(d)&&ie(p)?(nt(!1,`Use "dataKey" to specify the value of pie,
      the props "valueKey" will be deprecated in 1.1.0`),v="value"):ie(d)&&(nt(!1,`Use "dataKey" to specify the value of pie,
      the props "valueKey" will be deprecated in 1.1.0`),v=p);var w=r.filter(function(N){return ee(N,v,0)!==0}).length,k=(h>=360?w:w-1)*c,P=h-w*m-k,E=r.reduce(function(N,C){var b=ee(C,v,0);return N+(re(b)?b:0)},0),O;if(E>0){var R;O=r.map(function(N,C){var b=ee(N,v,0),x=ee(N,u,C),D=(re(b)?b:0)/E,L;C?L=R.endAngle+we(f)*c*(b!==0?1:0):L=s;var j=L+we(f)*((b!==0?m:0)+D*P),G=(L+j)/2,ge=(y.innerRadius+y.outerRadius)/2,Te=[{name:x,value:b,payload:N,dataKey:v,type:g}],$e=Q(y.cx,y.cy,ge,G);return R=I(I(I({percent:D,cornerRadius:i,name:x,tooltipPayload:Te,midAngle:G,middleRadius:ge,tooltipPosition:$e},N),y),{},{value:ee(N,v),startAngle:L,endAngle:j,payload:N,paddingAngle:we(f)*c}),R})}return I(I({},y),{},{sectors:O,data:r})});var za=vn({chartName:"PieChart",GraphicalChild:U,validateTooltipEventTypes:["item"],defaultTooltipEventType:"item",legendContent:"children",axisComponents:[{axisType:"angleAxis",AxisComp:Le},{axisType:"radiusAxis",AxisComp:Ie}],formatAxisMap:gn,defaultProps:{layout:"centric",startAngle:0,endAngle:360,cx:"50%",cy:"50%",innerRadius:0,outerRadius:"80%"}});const Qa=({intakes:e,remainingCalories:t})=>{const n=[...e.map(r=>({name:r.items.reduce((a,i,s,o)=>o.length===1?i.name:s===0?a+`${i.name}, `:s===o.length-1?a+`and ${i.name}`:a+` ${i.name}, `,""),value:r.items.reduce((a,i)=>a+i.calories,0)})),{name:"remaining",value:t}];return t<=0&&n.pop(),_(za,{width:250,height:250,children:[l(U,{dataKey:"value",isAnimationActive:!1,data:n,cx:125,cy:125,innerRadius:80,outerRadius:110,children:n.map((r,a)=>{const i=r.name==="remaining"?"#a7a7a7":Je[a%Je.length];return l(It,{fill:i},`cell-${a}`)})}),l(yn,{})]})},Va=()=>{const{dailyData:e,recordedIntakes:t,calConsumedPct:n,calRemainingPct:r,remainingCalories:a,consumedCalories:i,estimatedKGChange:s}=de();if(!e)return null;const{date:o}=e,c=new Intl.DateTimeFormat("en-GB",{weekday:"long",month:"numeric",day:"numeric",year:"numeric"}).format(new Date(o)),d=a>0?"remaining":"over your limit";return _("header",{className:"day-edit__header","data-testid":"day-edit-header",children:[l("div",{className:"day-edit__header__date-container",children:l("h2",{className:"day-edit__header__date",children:c})}),l(Qa,{intakes:t,remainingCalories:a}),_("div",{className:"day-edit__header__titles",children:[_("p",{className:"day-edit__header__titles__title",children:[_("strong",{children:[Math.abs(a)," "]}),"calories ",d]}),i>0&&_("p",{className:"day-edit__header__titles__title",children:[l("strong",{children:Math.round(i)})," calories consumed"]}),_("div",{className:"day-edit__header__percentages-container",children:[_("div",{className:"day-edit__header__percentage",children:[l("p",{className:"day-edit__header__percentage__title",children:"consumed:"}),_("p",{className:"day-edit__header__percentage__value",children:[n,"%"]})]}),_("div",{className:"day-edit__header__percentage",children:[l("p",{className:"day-edit__header__percentage__title",children:"remaining:"}),_("p",{className:"day-edit__header__percentage__value",children:[r,"%"]})]})]}),s>0?_("p",{className:"day-edit__header__titles__title",children:["estimated to gain ",_("strong",{children:[s,"kg"]})]}):_("p",{className:"day-edit__header__titles__title",children:["estimated to lose ",l("strong",{children:Math.abs(s)})," kg"]})]})]})},Ha=({intake:e})=>l("ol",{className:"intake-preview",children:e.items.map(t=>l("li",{className:"intake-item-preview-container",children:l("section",{className:"intake-item-preview",children:l("p",{className:"intake-item-preview__details",children:`${t.name} - ${t.quantity} ${t.unit} - caolries: ${Math.round(t.calories)}`})})},t.id))}),Ya=()=>{const{dailyData:e,unrecordedIntakes:t,recordedIntakes:n,openedElement:r,setOpenedElement:a,setIntake:i,updateDailyData:s,isLoadingUpdate:o}=de();if(!e)return null;const c=r===M.IntakeList,u=(c?n:t).sort((f,h)=>!f.recordedAt||!h.recordedAt?0:new Date(f.recordedAt).getTime()-new Date(h.recordedAt).getTime()),p=ne.getTotalCaloriesFromDailyData({dailyData:e,isRecorded:c});function g(f){if(!e)return;const h={...e};h.intakes=e.intakes.map(v=>(v.id===f&&(v.isRecorded=!0,v.recordedAt=new Date),v)),s(h)}function m(f){if(!e)return;const h={...f};i(h),a(M.IntakeEdit)}function y(f){if(!e)return;const h={...e};h.intakes=e.intakes.filter(v=>v.id!==f),s(h)}return _(se,{children:[o&&l(ue,{}),_("header",{className:"intake-list__header","data-testid":"intake-list-header",children:[_("h3",{className:"intake-list__title",children:[c?"Recorded":"Unrecorded"," Intakes"]}),_("h4",{className:"intake-list__total-calories",children:["total calories: ",p]})]}),l(ke,{className:"intake-list",items:u,render:(f,h)=>_("li",{className:"intake-preview-container",children:[l("h5",{className:"intake-list-item-title",children:`Intake ${h+1}#  ${f.recordedAt?`- ${Vt(f.recordedAt)}`:""}`}),l(Ha,{intake:f}),l("p",{className:"intake-preview__total-calories",children:`Total Calories: ${ne.getTotalCalories(f)}`}),_("div",{className:"intake-list__btns-container",children:[l(T,{className:"btn",onClickFn:()=>y(f.id),children:"Delete"}),c?l(T,{className:"btn",onClickFn:()=>m(f),children:"Edit"}):l(T,{className:"btn",onClickFn:()=>g(f.id),children:"Save"})]})]},f.id)})]})},Xa=()=>{const{dailyData:e,isLoading:t,updateDailyData:n}=de(),[r,a]=A.useState(),[i,s]=A.useState();function o(p){const{value:g}=p.target;a(Number(g))}function c(p){const{value:g}=p.target;s(Number(g))}function d(p){p.preventDefault(),!(!e||!r||!i)&&n({...e,weight:r,waist:i})}if(!e)return null;const u=!e.weight&&!e.waist&&!t;return _(se,{children:[t&&l(ue,{withContainer:!0,containerSize:{height:"75px"}}),u&&_("form",{className:"weight-waist-form","data-testid":"weight-waist-form",children:[l("input",{type:"number",name:"weight",className:"weight-waist-form__input",placeholder:"Enter your weight",value:r||"",onChange:o}),l("input",{type:"number",className:"weight-waist-form__input",name:"waist",placeholder:"Enter your waist size",value:i||"",onChange:c}),l(T,{className:"btn",onClickFn:d,type:"submit",children:"update"})]}),!u&&_("div",{className:"weight-waist-details","data-testid":"weight-waist-details",children:[l("p",{className:"weight-waist-details__title",children:"weight:"}),_("p",{className:"weight-waist-details__text",children:[e.weight," kg"]}),l("p",{className:"weight-waist-details__title",children:"waist:"}),_("p",{className:"weight-waist-details__text",children:[e.waist," cm"]})]})]})},Ye="nutrition";async function Za(e){const t=await Ne.get(`${Ye}/chatGPT?prompt=${e}`);return Ce(t)}async function Ja(e){const t=await Ne.get(`${Ye}/ninja?query=${e}`);return Ce(t)}async function ei(e){const t=await Ne.get(`${Ye}/usda?query=${e}`);return Ce(t)}const Fe={queryChatGPT:Za,queryNinja:Ja,queryUSDA:ei},ti=()=>{const[e,t]=A.useState({chatGPTResponse:"",ninjaAPIResponse:"",USDAAPIResponse:""}),{control:n,handleSubmit:r,setValue:a}=wn({defaultValues:{chatGPTQuery:"",ninjaAPIQuery:"",USDAAPIQuery:""}});async function i(s){if(s.chatGPTQuery){const o=await Fe.queryChatGPT(s.chatGPTQuery);t({chatGPTResponse:o})}if(s.ninjaAPIQuery){const o=await Fe.queryNinja(s.ninjaAPIQuery);t({ninjaAPIResponse:o})}if(s.USDAAPIQuery){const o=await Fe.queryUSDA(s.USDAAPIQuery);t({USDAAPIResponse:o})}}return _("section",{className:"nutrition-query","data-testid":"nutrition-query",children:[_("form",{className:"nutrition-query__form",autoComplete:"off",children:[l(je,{name:"chatGPTQuery",control:n,render:({field:s})=>l("textarea",{...s})}),l(je,{name:"ninjaAPIQuery",control:n,render:({field:s})=>l("input",{...s})}),l(je,{name:"USDAAPIQuery",control:n,render:({field:s})=>l("input",{...s})}),l(T,{onClickFn:r(i),children:"Submit"})]}),_("div",{className:"nutrition-query__result",children:[l("h1",{children:"ChatGPT Response:"}),l("span",{children:e.chatGPTResponse}),l("h1",{children:"Ninja API Response:"}),l("pre",{children:JSON.stringify(e.ninjaAPIResponse)}),l("h1",{children:"USDA API Response:"}),l("pre",{children:JSON.stringify(e.USDAAPIResponse)})]})]})},ni=()=>{const{dailyData:e,isLoading:t,isSuccess:n,isError:r,isLoadingUpdate:a,openedElement:i,backgroundColor:s}=de(),o=n&&e&&!a,c=t||a,d=i===M.IntakeList||i===M.UnRecordedIntakeList;return _("section",{className:"day-edit",style:{backgroundColor:s},"data-testid":"day-edit",children:[c&&l(ue,{}),r&&l(Nt,{}),o&&_(se,{children:[l(Va,{}),l($r,{}),i===M.WeightWaistInput&&l(Xa,{}),i===M.IntakeEdit&&l(Tr,{}),i===M.Workouts&&l(ke,{items:e.workouts,render:u=>l(bn,{workout:u,isTodayDetails:!0},u.id)}),d&&l(Ya,{}),i===M.Query&&l(ti,{})]})]})};const ri=()=>{const e=Ht();return _("div",{className:"login-signup-msg","data-testid":"login-signup-msg",children:[l("div",{className:"login-signup-msg-text-container",children:l("h1",{children:"Start Your Journey Now!"})}),l("div",{className:"login-signup-msg-btn-container",children:[{title:"Log in",className:"btn-login",path:"/login"},{title:"Sign up",className:"btn-signup",path:"/signup"}].map(n=>l("button",{className:n.className,onClick:()=>{e(n.path)},children:n.title},n.title))})]})};function ai(){const e=Yt(),{mutate:t,isLoading:n}=Xt({mutationFn:Zt.create,onSuccess:()=>{e.invalidateQueries(["today"])}});return{createDay:t,isLoading:n}}const ii=({mode:e,zIndex:t})=>l("div",{className:`main-screen ${e||""}`,style:{zIndex:t},"data-testid":"main-screen"});function si(e,t=!0){const n=A.useRef(null);return A.useEffect(()=>{function r(a){n.current&&!n.current.contains(a.target)&&e()}return document.addEventListener("click",r,t),()=>document.removeEventListener("click",r,t)},[e,t]),{outsideClickRef:n}}const oi=({isModalAbove:e,isFullScreen:t=!1})=>{const n="tippy"+(e?" down":" up")+(t?" full-screen":"");return l("div",{className:n,"data-testid":"tippy"})};function qt(e,t){var o;const n=(o=e.current)==null?void 0:o.getBoundingClientRect();if(!n)return;const a=window.innerHeight-n.top<t,i={top:n.bottom+n.height/2+window.scrollY},s={bottom:window.innerHeight-n.top+n.height/2};return{isModalAbove:a,position:{...a?s:i,left:n.left+n.width/2+window.scrollX},rect:n}}const ve=A.createContext(void 0),z=({children:e,externalStateControl:t,onClose:n,onOpen:r,onAfterClose:a})=>{const[i,s]=A.useState(""),[o,c]=A.useState(null),[d,u]=A.useState(null),[p,g]=A.useState(!1),m=()=>{if(console.log("close"),n==null||n(),t){t.setOpenedModalName(""),a==null||a();return}s(""),a==null||a()},y=w=>{if(r==null||r(),t){t.setOpenedModalName(w);return}s(w)},{debouncedFunc:f,cancel:h}=ze(()=>{m()},500),v={openedModalName:(t==null?void 0:t.openedModalName)||i,close:m,open:y,position:o,setPosition:c,isModalAbove:p,setIsModalAbove:g,modalHoverGuardZone:d,setModalHoverGuardZone:u,debouncedClose:f,cancelDebouncedClose:h};return l(ve.Provider,{value:v,children:e})},ci=({children:e,modalName:t,setPositionByRef:n=!1,modalHeight:r=0,externalControlFunc:a})=>{const{open:i,setPosition:s,setIsModalAbove:o}=A.useContext(ve),c=A.useRef(null),d=A.useCallback(()=>{const p=qt(c,r),{isModalAbove:g,position:m}=p;o(g),s(m)},[r,o,s]),u=()=>{if(n&&d(),a)return a();i(t)};return A.useEffect(()=>{if(!n)return;const p=["wheel","scroll","resize"];return p.forEach(g=>{window.addEventListener(g,d)}),()=>{p.forEach(g=>{window.removeEventListener(g,d)})}},[n,d]),A.cloneElement(e,{onClick:u,ref:c})},li=({children:e,onClickFn:t})=>{const{close:n}=A.useContext(ve);return A.cloneElement(e,{onClick:()=>{t==null||t(),n()}})},ui=({children:e,modalName:t,modalHeight:n=0})=>{const{open:r,setPosition:a,setIsModalAbove:i,setModalHoverGuardZone:s,debouncedClose:o,cancelDebouncedClose:c}=A.useContext(ve),d=A.useRef(null),{debouncedFunc:u,cancel:p}=ze(g,500);function g(){const f=qt(d,n);f&&(a(f.position),i(f.isModalAbove),s({height:f.rect.height,width:f.rect.width}),r(t))}function m(){c(),u()}function y(){p(),o()}return l("div",{className:"modal-hover-open",ref:d,onMouseEnter:m,onMouseLeave:y,children:e})},di=({children:e,name:t,className:n,mainScreenMode:r="transparent",mainScreenZIndex:a=1e3,elementId:i="app",includeTippy:s=!1,style:o={},hoverControl:c=!1})=>{const{openedModalName:d,open:u,close:p,position:g,isModalAbove:m,modalHoverGuardZone:y,debouncedClose:f,cancelDebouncedClose:h}=A.useContext(ve),{outsideClickRef:v}=si(p);function w(){h(),u(t)}function k(){f()}return t!==d?null:Jt.createPortal(_(se,{children:[!c&&l(ii,{mode:r,zIndex:a}),_("section",{className:`modal ${n||t}`,style:{...o,zIndex:a+1,...g},ref:c?void 0:v,onMouseEnter:()=>c&&w(),onMouseLeave:()=>c&&k(),"data-testid":"modal-window",children:[s&&l(oi,{isModalAbove:!!m}),e,c&&y&&l("div",{className:"modal-hover-guard-zone",style:{top:m?"100%":`-${y.height/2}px`,height:`${y.height/2}px`||"10%",width:`${y.width}px`||"10%"}})]})]}),document.getElementById(i))};z.OpenBtn=ci;z.Window=di;z.CloseBtn=li;z.ModalHoverOpen=ui;const ki=()=>{const{loggedInUser:e}=St(),{dailyData:t}=xt(),{createDay:n,isLoading:r}=ai(),a=e&&!r,i=e&&t&&!fi(t);kn({title:"Home / Kceli"});function s(){n({})}return _("main",{className:"home","data-testid":"home-page",children:[!e&&l(ri,{}),a&&l(Lr,{children:l(ni,{})}),r&&l(ue,{}),i&&_(z,{children:[l(z.OpenBtn,{modalName:"create-day",children:l("button",{className:"home__btn","data-testid":"create-day-open-modal-btn",children:"start a new day"})}),_(z.Window,{name:"create-day",className:"create-day-modal",children:[_("h2",{className:"create-day-modal__title",children:["Are you sure you want to start a new day? ",l("br",{})]}),l(z.CloseBtn,{onClickFn:s,children:l("button",{className:"btn create-day-modal__btn","data-testid":"create-day-modal-btn",children:"start a new day"})}),l(z.CloseBtn,{children:l("button",{className:"btn create-day-modal__btn",children:"cancel"})})]})]})]})};function fi(e){const t=new Date().toDateString(),n=new Date(e.date).toDateString();return t===n}export{ki as default};
