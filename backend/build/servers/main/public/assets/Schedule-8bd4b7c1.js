import{d as B,b as $,L as R,M as N,k as C,H as U,j as e,m as n,C as b,D as T,N as w,r as g,P as k,Q as W,T as P,G as x,S as Y,F as X,B as A,U as z}from"./index-db775740.js";import{E as G}from"./ErrorMsg-8aeab628.js";import{X as I,Y as F,R as H,C as j}from"./YAxis-80d3bfa1.js";import{B as K,N as E,K as q,F as O,v as Q,c as J}from"./generateCategoricalChart-56a18fc0.js";import{L as V}from"./List-74a97737.js";var Z=K({chartName:"BarChart",GraphicalChild:E,defaultTooltipEventType:"axis",validateTooltipEventTypes:["axis","item"],axisComponents:[{axisType:"xAxis",AxisComp:I},{axisType:"yAxis",AxisComp:F}],formatAxisMap:q});function ee(t){const{loggedInUser:i}=B(),{data:r,error:o,isLoading:s,isSuccess:l,isError:a}=$({queryKey:["calenderData",t],queryFn:()=>{const u=t.getMonth()+1,p=t.getFullYear();return U.getCalenderData(u,p)}}),c=!!r&&r.length===0;return{days:te({date:t,data:r,loggedInUser:i}),error:o,isLoading:s,isSuccess:l,isError:a,isEmpty:c}}function te({date:t,data:i,loggedInUser:r}){return re(t).map(o=>ae({date:o,data:i,loggedInUser:r}))}function re(t){const i=R({month:t.getMonth(),year:t.getFullYear()}),r=Array.from({length:i},(c,h)=>new Date(t.getFullYear(),t.getMonth(),h+1)),o=r[0].getDay(),s=r[r.length-1].getDay(),l=Array.from({length:o},(c,h)=>new Date(t.getFullYear(),t.getMonth(),h-o+1)),a=Array.from({length:6-s},(c,h)=>new Date(t.getFullYear(),t.getMonth()+1,h+1));return[...l,...r,...a]}function ae({date:t,data:i,loggedInUser:r}){const o=ne(t);if(!i)return o;const s=i.find(h=>N(new Date(h.date),t));if(!s)return o;const l=C.getTotalCalories(s),a=se(s,r,l),c=s.workouts.some(h=>h.items.some(u=>u.isCompleted));return{...o,id:s.id,data:s,backgroundColor:a,isBorder:c}}function ne(t){return{id:null,data:null,backgroundColor:"",isBorder:!1,date:t,day:t.getDate(),consumedCalories:0}}function se(t,i,r){return t&&i?C.getBcgByCosumedCalories({consumedCalories:r,targetCalorie:i.targetCaloricIntakePerDay}):""}const oe=({intakes:t})=>{const r=t.sort((o,s)=>{const l=new Date(o.recordedAt).getTime(),a=new Date(s.recordedAt).getTime();return l-a}).map(o=>({name:o.items.reduce((s,l,a,c)=>c.length===1?l.name:a===0?s+`${l.name}, `:a===c.length-1?s+`and ${l.name}`:s+` ${l.name}, `,""),calories:o.items.reduce((s,l)=>s+l.calories,0)}));return e("div",{style:{width:"100%",maxWidth:1200,height:300},children:e(H,{children:n(Z,{data:r,children:[e(j,{strokeDasharray:"3 3"}),e(I,{dataKey:"name"}),e(F,{}),e(O,{}),e(E,{dataKey:"calories",barSize:25,children:r.map((o,s)=>e(Q,{fill:b[s%b.length]},`cell-${s}`))})]})})})};function ie(t){if(!t||t.intakes.length===0)return"No data";let i=0,r=0,o;for(const a of t.intakes){if(!a.recordedAt||a.type!=="food")continue;const c=new Date(a.recordedAt).getTime();o!==void 0&&(i+=c-o,r++),o=c}if(r===0)return"No data";const l=i/r/1e3/60/60;return l>=1?`${Math.round(l)} hours`:`${Math.round(l*60)} minutes`}const le={calcAverageTimeBetweenMeals:ie};const ce=({workout:t})=>{const{description:i,type:r,items:o}=t,s=T.calcWorkoutDuration({workout:t})+" min",l=Math.round(o.filter(a=>a.isCompleted).length/o.length*100);return n("article",{className:"day-report__workout-preview",children:[e(w,{className:"day-report__workout-preview__header",children:n("h3",{children:[i," - ",r," - ",s," - ",l,"% completed"]})}),n("table",{className:"day-report__workout-preview__table",children:[e("thead",{className:"day-report__workout-preview__table__header",children:n("tr",{children:[e("th",{children:"Exercise"}),e("th",{children:"Duration"}),e("th",{children:"Reps"}),e("th",{children:"Sets"}),e("th",{children:"Weight"}),e("th",{className:"day-report__workout-preview__table__header__completed",children:"Completed"})]})}),e("tbody",{className:"day-report__workout-preview__table__body",children:o.map((a,c)=>{const h=T.calcItemDuration(a)+" min";return a.type==="superset"?n(g.Fragment,{children:[n("tr",{children:[e("td",{children:a.name}),e("td",{children:h}),e("td",{}),e("td",{children:a.sets}),e("td",{}),e("td",{className:"completed",children:a.isCompleted?e(k,{}):""})]}),a.items.map((u,p)=>n("tr",{children:[e("td",{children:u.name}),e("td",{}),e("td",{children:u.reps}),e("td",{}),n("td",{children:[u.weight," ",u.weightUnit]}),e("td",{className:"completed"})]},`superset-${c}-subitem-${p}`))]},`superset-${c}`):a.type==="anaerobic"?n("tr",{children:[e("td",{children:a.name}),e("td",{children:h}),e("td",{children:a.reps}),e("td",{children:a.sets}),n("td",{children:[a.weight," ",a.weightUnit]}),e("td",{className:"completed",children:a.isCompleted?e(k,{}):""})]},c):n("tr",{children:[e("td",{children:a.name}),e("td",{children:h}),e("td",{}),e("td",{}),e("td",{}),e("td",{className:"completed",children:a.isCompleted?e(k,{}):""})]},c)})})]})]})};const de=({intake:t})=>{const[i,r]=g.useState(!1),o=t.name||t.items.map(a=>a.name).join(", "),s=C.getTotalCalories(t);function l(){r(!i)}return n("article",{className:"day-report__intake-preview",children:[n(w,{className:"day-report__intake-preview__header",onClickFn:l,children:[n("h3",{className:"day-report__intake-preview__header__title",children:[o," ",s," kcal"]}),e("div",{children:i?e(W,{}):e(P,{})})]}),i&&n("table",{className:"day-report__intake-preview__table",children:[e("thead",{className:"day-report__intake-preview__table__head",children:n("tr",{children:[e("th",{children:"Item"}),e("th",{children:"Calories"}),e("th",{children:"Weight"})]})}),e("tbody",{className:"day-report__intake-preview__table__body",children:t.items.map(a=>n("tr",{children:[e("td",{children:a.name}),e("td",{children:a.calories}),n("td",{children:[a.quantity," ",a.unit]})]},a.id))})]})]})},he=({day:t})=>{const{loggedInUser:i}=B(),{data:r}=t;if(!r)return e("section",{className:"day-report",children:e("p",{children:"No data for this day"})});const o=C.getTotalCalories(r),s=C.calcRemainingCalories(i,r),a=` calories ${s>0?"remaining":"over your limit"}`,c=new Intl.DateTimeFormat("en-US",{dateStyle:"full"}).format(t.date),h=le.calcAverageTimeBetweenMeals(r),{targetCaloricIntake:u}=r,p=u?C.getBcgByCosumedCalories({consumedCalories:o,targetCalorie:u}):"gray";return n("section",{className:"day-report",children:[n(w,{className:"day-report__header",children:[e("h1",{children:c}),e("div",{className:"day-report__header__color-circle",style:{background:p}})]}),n("div",{className:"day-report__weight",children:[n("p",{children:[e("strong",{children:"Weight: "}),r.weight]}),n("p",{children:[e("strong",{children:"Waist: "}),r.waist]})]}),n("div",{className:"day-report__calories",children:[e("h3",{className:"day-report__calories__title",children:"calories"}),n("p",{children:[e("strong",{children:"consumed Calories: "}),o]}),n("p",{children:[n("strong",{children:[a,": "]}),Math.abs(s)]}),n("p",{children:[e("strong",{children:"target caloric intake: "}),r.targetCaloricIntake]})]}),r.intakes.length>0&&n("div",{className:"day-report__intakes",children:[e("h2",{className:"day-report__intakes__title",children:"Intakes"}),n("h4",{children:["Number of Intakes: ",r.intakes.length]}),n("h4",{children:["Average time between meals: ",h]}),e(V,{className:"day-report__intakes__list",items:r.intakes,render:y=>e(de,{intake:y})}),e(oe,{intakes:r.intakes})]}),r.workouts.length>0&&n("div",{className:"day-report__workouts",children:[e("h1",{className:"day-report__workouts__title",children:"Workouts"}),e("ul",{children:r.workouts.map((y,d)=>e("li",{children:e(ce,{workout:y})},d))})]})]})};function ue(t){return x({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M256 48C141.13 48 48 141.13 48 256s93.13 208 208 208 208-93.13 208-208S370.87 48 256 48zm62.63 304L296 374.63 177.37 256 296 137.37 318.63 160l-96 96z"}}]})(t)}function me(t){return x({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M256 48C141.13 48 48 141.13 48 256s93.13 208 208 208 208-93.13 208-208S370.87 48 256 48zm-40 326.63L193.37 352l96-96-96-96L216 137.37 334.63 256z"}}]})(t)}const ve=()=>{const[t,i]=g.useState(new Date),[r,o]=g.useState(null),{days:s,isLoading:l,isSuccess:a,isError:c}=ee(t),h=g.useRef(null),u=g.useRef(0);function p(d){o(d)}function y(d){const m=new Date(t);m.setMonth(t.getMonth()+d),i(m)}return g.useEffect(()=>{const d=v=>{const f=v.touches[0];u.current=f.clientX},m=v=>{const f=L=>{const M=new Date(t);M.setMonth(t.getMonth()+L),i(M)},D=v.changedTouches[0].clientX,S=50;D-u.current>S&&f(-1),u.current-D>S&&f(1)},_=h.current;if(_)return _.addEventListener("touchstart",d,!1),_.addEventListener("touchend",m,!1),()=>{_&&(_.removeEventListener("touchstart",d),_.removeEventListener("touchend",m))}},[t,a]),g.useEffect(()=>{if(!a||r)return;const d=new Date,m=s.find(_=>N(_.date,d));m&&o(m)},[s,a,r]),n("main",{className:"page schedule-page",children:[l&&e(Y,{}),c&&e(G,{}),a&&n(X,{children:[n(w,{className:"schedule-page__header",children:[n("h2",{className:"schedule-page__header__title",children:[t.toLocaleString("en-US",{month:"long"})," ",t.getFullYear()]}),n("div",{className:"schedule-page__header__btns-container",children:[e(A,{onClickFn:()=>y(-1),children:e(ue,{className:"schedule-page__header__btns-container__btn__icon"})}),e(A,{onClickFn:()=>y(1),children:e(me,{className:"schedule-page__header__btns-container__btn__icon"})})]})]}),n("ul",{className:"schedule-grid",ref:h,children:[z.map(d=>e("li",{className:"schedule-grid__item weekday-item",children:e("h3",{className:"schedule-grid__item__title",children:d.short})},d.short)),s.map(d=>{const{backgroundColor:m,date:_}=d,v=d.backgroundColor?"white":"",f=d.isBorder?"4px solid var(--color-success)":"none";return e("li",{className:J("schedule-grid__item",{active:r&&N(d.date,r.date)}),onClick:()=>p(d),style:{backgroundColor:m,color:v},children:e("div",{className:"schedule-grid__item__wrapper",style:{border:f},children:e("h3",{children:d.day})})},_.toISOString())})]}),r&&e(he,{day:r})]})]})};export{ve as default};
