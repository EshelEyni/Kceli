import{a as k,A as w,o as N,B as $,C as v,j as r,e as h,r as y,S as F,F as I,D as T}from"./index-f7ecada1.js";import{c as p}from"./calorieUtilService-74544aa9.js";import{E as L}from"./ErrorMsg-549ce38c.js";import{c as A}from"./index-071b4459.js";function R(e){const{loggedInUser:t}=k(),{data:n,error:a,isLoading:s,isSuccess:c,isError:l}=w({queryKey:["calenderData",e],queryFn:()=>{const g=e.getMonth()+1,C=e.getFullYear();return N.getCalenderData(g,C)}}),d=!!n&&n.length===0;return{days:x({date:e,data:n,loggedInUser:t}),error:a,isLoading:s,isSuccess:c,isError:l,isEmpty:d}}function x({date:e,data:t,loggedInUser:n}){return Y(e).map(a=>b({date:a,data:t,loggedInUser:n}))}function Y(e){const t=$(e.getMonth()+1,e.getFullYear()),n=Array.from({length:t-1},(d,i)=>new Date(e.getFullYear(),e.getMonth(),i+1)),a=n[0].getDay(),s=n[n.length-1].getDay(),c=Array.from({length:a},(d,i)=>new Date(e.getFullYear(),e.getMonth(),i-a+1)),l=Array.from({length:6-s},(d,i)=>new Date(e.getFullYear(),e.getMonth()+1,i+1));return[...c,...n,...l]}function b({date:e,data:t,loggedInUser:n}){const a=j(e);if(!t)return a;const s=t.find(d=>v(new Date(d.date),e));if(!s)return a;const c=p.getTotalCalories(s),l=B(s,n,c);return{...a,id:s.id,data:s,backgroundColor:l}}function j(e){return{id:null,data:null,backgroundColor:"",date:e,day:e.getDate(),consumedCalories:0}}function B(e,t,n){return e&&t?p.getBcgByCosumedCalories({consumedCalories:n,targetCalorie:t.targetCaloricIntakePerDay}):""}const X=({day:e})=>{const{data:t}=e;if(!t)return r("p",{children:"No data for this day"});const n=p.getTotalCalories(t);return h("section",{className:"day-info",children:[r("h2",{children:`Consumed Calories: ${n}`}),r("h3",{children:`Weight: ${t.weight}`}),r("h3",{children:`Waist: ${t.waist}`}),r("h3",{children:`Target Caloric Intake: ${t.targetCaloricIntake}`}),h("div",{children:[r("h4",{children:"Workouts:"}),r("ul",{children:t.workouts.map((a,s)=>r("li",{children:`${a.type} - ${a.description}`},s))})]}),h("div",{children:[r("h4",{children:"Intakes:"}),r("ul",{children:t.intakes.map((a,s)=>r("li",{children:`${a.isRecorded?"Recorded":"Not Recorded"} - ${a.items.map(c=>c.name).join(", ")}`},s))})]})]})},G=()=>{const[e,t]=y.useState(new Date),[n,a]=y.useState(null),{days:s,isLoading:c,isSuccess:l,isError:d}=R(e),i=y.useRef(null),g=y.useRef(0);function C(o){a(o)}return y.useEffect(()=>{const o=m=>{const D=m.touches[0];g.current=D.clientX},f=m=>{const D=E=>{const M=new Date(e);M.setMonth(e.getMonth()+E),t(M)},S=m.changedTouches[0].clientX,_=50;S-g.current>_&&D(-1),g.current-S>_&&D(1)},u=i.current;if(u)return u.addEventListener("touchstart",o,!1),u.addEventListener("touchend",f,!1),()=>{u&&(u.removeEventListener("touchstart",o),u.removeEventListener("touchend",f))}},[e,l]),h("section",{className:"schedule-grid-wrapper",children:[c&&r(F,{}),d&&r(L,{}),l&&h(I,{children:[h("ul",{className:"schedule-grid",ref:i,children:[T.map(o=>r("li",{className:"schedule-grid__item",children:r("h3",{className:"schedule-grid__item__title",children:o.short})},o.short)),s.map(o=>{const{backgroundColor:f,date:u}=o,m=o.backgroundColor?"white":"";return r("li",{className:A("schedule-grid__item",{active:n&&v(o.date,n.date)}),onClick:()=>C(o),style:{backgroundColor:f,color:m},children:r("h3",{className:"schedule-grid__item__title",children:o.day})},u.toISOString())})]}),n&&r(X,{day:n})]})]})};const Q=()=>r("main",{className:"page schedule-page",children:r(G,{})});export{Q as default};
