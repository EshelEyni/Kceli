import{r as L,u as Dt,s as $t,c as vt,G as gt,a as yt,b as bt,d as jt,j as u,g as Se,e as S,h as Ft,f as Bt,i as Mt,S as ee,F as he,$ as O,k as Wt,l as Kt,m as Ut,n as qt,o as Vt,O as zt}from"./index-a52bb271.js";import{L as ke}from"./List-010a5ec7.js";import{B as $}from"./Button-37c3884d.js";import{E as Te}from"./ErrorMsg-cecaeed6.js";import{c as ae}from"./calorieUtilService-841f57aa.js";import{f as j,_ as kt,a as wt,b as Gt,c as Yt,d as X,T as We,p as G,L as M,e as Ke,g as At,D as Ht,h as Qt,i as Xt,j as Zt,G as Jt,u as en,C as tn,S as ze,k as oe,l as ne,A as nn,m as rn,n as Ge,o as an,q as ie,r as sn,s as on,t as _t,v as cn,w as ve,x as Ye,y as ye,z as ln,B as un,E as dn}from"./generateCategoricalChart-ca57fd40.js";import{c as Ot}from"./index-6b86ce8a.js";import{W as fn}from"./WorkoutPreview-38aa48cf.js";function pn(e){L.useEffect(()=>{const t=document.title;return document.title=e||"Kceli",()=>{document.title=t}},[e])}function hn({title:e}){const t=Dt();pn(e),L.useEffect(()=>{t($t(!1))},[t])}var me=(e=>(e.UNIT="unit",e.GRAM="g",e.CUP="cup",e.TABLE_SPOON="tbsp",e.TEA_SPOON="tsp",e.MILLILITER="ml",e))(me||{});const mn=Object.values(me);function vn(){return{id:vt(),items:[St()],name:"",isRecorded:!0,recordedAt:null}}function St(){return{id:vt(),unit:me.UNIT,quantity:1,name:""}}function gn(e){switch(e){case"g":return 100;case"ml":return 100;case"unit":return 1;case"cup":return 1;case"tbsp":return 1;case"tsp":return 1;default:return 1}}function yn(e){switch(e){case"g":return 25;case"ml":return 25;case"unit":return 1;case"cup":return 1;case"tbsp":return 1;case"tsp":return 1;default:return 1}}const V={getDefaultIntake:vn,getDefaultIntakeItem:St,getUnitDefaultQuantity:gn,getQuantityStepPerUnit:yn,units:mn};function bn(e){return gt({tag:"svg",attr:{viewBox:"0 0 1024 1024"},child:[{tag:"path",attr:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm192 472c0 4.4-3.6 8-8 8H328c-4.4 0-8-3.6-8-8v-48c0-4.4 3.6-8 8-8h368c4.4 0 8 3.6 8 8v48z"}}]})(e)}function kn(e){return gt({tag:"svg",attr:{viewBox:"0 0 1024 1024"},child:[{tag:"path",attr:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm192 472c0 4.4-3.6 8-8 8H544v152c0 4.4-3.6 8-8 8h-48c-4.4 0-8-3.6-8-8V544H328c-4.4 0-8-3.6-8-8v-48c0-4.4 3.6-8 8-8h152V328c0-4.4 3.6-8 8-8h48c4.4 0 8 3.6 8 8v152h152c4.4 0 8 3.6 8 8v48z"}}]})(e)}var F=(e=>(e.IntakeEdit="IntakeEdit",e.IntakeList="IntakeList",e.UnRecordedIntakeList="UnRecordedIntakeList",e.WeightWaistInput="WeightWaistInput",e.Workouts="Workouts",e))(F||{});const Pt=L.createContext(void 0);function wn({children:e}){const{loggedInUser:t}=yt(N=>N.auth),{dailyData:n,isLoading:r,isSuccess:a,isError:i}=bt(),{updateDailyData:s,isLoading:o}=jt(),[l,d]=L.useState(n!=null&&n.weight?"WeightWaistInput":"IntakeEdit"),[c,f]=L.useState(V.getDefaultIntake()),[y,h]=L.useState(!0),b=(n==null?void 0:n.intakes.filter(N=>N.isRecorded))||[],v=(n==null?void 0:n.intakes.filter(N=>!N.isRecorded))||[],m=ae.calcRemainingCalories(t,n),p=ae.getTotalCalories(n),g=(n==null?void 0:n.targetCaloricIntake)??(t==null?void 0:t.targetCaloricIntakePerDay)??0,A=ae.calcEstimatedBodyFatStatusPerDay(t,n),w=An(t,n),P=ae.getBcgByCosumedCalories({consumedCalories:p,targetCalorie:g}),_={dailyData:n,isLoading:r,isSuccess:a,isError:i,updateDailyData:s,isLoadingUpdate:o,recordedIntakes:b,unrecordedIntakes:v,remainingCalories:m,consumedCalories:p,targetCaloricIntakePerDay:g,estimatedKGChange:A,backgroundColor:P,openedElement:l,setOpenedElement:d,isCurrValidIntake:y,setCurrIsValidIntake:h,recommendedWaterIntake:w,intake:c,setIntake:f};return u(Pt.Provider,{value:_,children:e})}function te(){const e=L.useContext(Pt);if(e===void 0)throw new Error("useTodayData must be used within a TodayDataProvider");return e}function An(e,t){if(!e||!t)return 0;const n=t.weight||e.weight,r=Number((n*33).toFixed(2)),a=t.intakes.filter(i=>i.isRecorded).reduce((i,s)=>s.items.reduce((o,l)=>{if(l.name.toLocaleLowerCase()==="water")switch(l.unit){case"ml":return o+l.quantity;case"cup":return o+l.quantity*250;default:return o}return o},i),0)||0;return Number(((r-a)/1e3).toFixed(2))}/*!
 * Determine if an object is a Buffer
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */var _n=function(t){return t!=null&&t.constructor!=null&&typeof t.constructor.isBuffer=="function"&&t.constructor.isBuffer(t)},xt=Sn,On=[];function Sn(e,t){var n=0,r;if(!t)return On;if(e.FLAG==="long"){for(r=new Array(Math.ceil(t.length/2));n<t.length;)r[n/2]=t.slice(n,n+2),n+=2;return r}return t.split(e.FLAG==="num"?",":"")}var Pn=xt,xn=In,Cn=[].push,ge="etaoinshrdlcumwfgypbvkjxqz".split(""),de=/\s+/,Nn=["qwertzuop","yxcvbnm","qaw","say","wse","dsx","sy","edr","fdc","dx","rft","gfv","fc","tgz","hgb","gv","zhu","jhn","hb","uji","kjm","jn","iko","lkm"];function In(e){var t=Object.create(null),n=Object.create(null),r=Object.create(null),a=[],i={in:[],out:[]},s=[],o=e.toString("utf8"),l=[],d=0,c=o.indexOf(`
`),f,y,h,b,v,m,p,g,A,w,P,_,N;for(r.KEY=[];c>-1;)x(o.slice(d,c)),d=c+1,c=o.indexOf(`
`,d);for(x(o.slice(d)),c=-1;++c<l.length;)if(y=l[c],f=y.split(de),h=f[0],h==="REP"){for(b=c+parseInt(f[1],10);++c<=b;)f=l[c].split(de),a.push([f[1],f[2]]);c--}else if(h==="ICONV"||h==="OCONV"){for(b=c+parseInt(f[1],10),g=i[h==="ICONV"?"in":"out"];++c<=b;)f=l[c].split(de),g.push([new RegExp(f[1],"g"),f[2]]);c--}else if(h==="COMPOUNDRULE"){for(b=c+parseInt(f[1],10);++c<=b;)for(w=l[c].split(de)[1],A=-1,s.push(w);++A<w.length;)n[w.charAt(A)]=[];c--}else if(h==="PFX"||h==="SFX"){for(b=c+parseInt(f[3],10),w={type:h,combineable:f[2]==="Y",entries:[]},t[f[1]]=w;++c<=b;){f=l[c].split(de),v=f[2],m=f[3].split("/"),p=f[4],g={add:"",remove:"",match:"",continuation:Pn(r,m[1])},m&&m[0]!=="0"&&(g.add=m[0]);try{v!=="0"&&(g.remove=h==="SFX"?He(v):v),p&&p!=="."&&(g.match=h==="SFX"?He(p):En(p))}catch{g=null}g&&w.entries.push(g)}c--}else if(h==="TRY"){for(p=f[1],_=-1,P=[];++_<p.length;)N=p.charAt(_),N.toLowerCase()===N&&P.push(N);for(_=-1;++_<ge.length;)p.indexOf(ge[_])<0&&P.push(ge[_]);r[h]=P}else h==="KEY"?Cn.apply(r[h],f[1].split("|")):h==="COMPOUNDMIN"?r[h]=Number(f[1]):h==="ONLYINCOMPOUND"?(r[h]=f[1],n[f[1]]=[]):r[h]=f[1];return isNaN(r.COMPOUNDMIN)&&(r.COMPOUNDMIN=3),r.KEY.length||(r.KEY=Nn),r.TRY||(r.TRY=ge.concat()),r.KEEPCASE||(r.KEEPCASE=!1),{compoundRuleCodes:n,replacementTable:a,conversion:i,compoundRules:s,rules:t,flags:r};function x(I){I=I.trim(),I&&I.charCodeAt(0)!==35&&l.push(I)}}function He(e){return new RegExp(e+"$")}function En(e){return new RegExp("^"+e)}var Ct=Rn;function Rn(e,t){for(var n=-1;++n<t.length;)e=e.replace(t[n][0],t[n][1]);return e}var Pe=Ln;function Ln(e,t,n){return n&&t in e&&n.indexOf(e[t])>-1}var Tn=Pe,Dn=$n;function $n(e,t){var n=-1;if(e.data[t])return!Tn(e.flags,"ONLYINCOMPOUND",e.data[t]);if(t.length>=e.flags.COMPOUNDMIN){for(;++n<e.compoundRules.length;)if(e.compoundRules[n].test(t))return!0}return!1}var jn=Ct,Le=Dn,De=Pe,Ue=Fn;function Fn(e,t,n){var r=t.trim(),a;if(!r)return null;if(r=jn(r,e.conversion.in),Le(e,r))return!n&&De(e.flags,"FORBIDDENWORD",e.data[r])?null:r;if(r.toUpperCase()===r){if(a=r.charAt(0)+r.slice(1).toLowerCase(),Qe(e.flags,e.data[a],n))return null;if(Le(e,a))return a}if(a=r.toLowerCase(),a!==r){if(Qe(e.flags,e.data[a],n))return null;if(Le(e,a))return a}return null}function Qe(e,t,n){return De(e,"KEEPCASE",t)||n||De(e,"FORBIDDENWORD",t)}var Bn=Ue,Mn=Wn;function Wn(e){return!!Bn(this,e)}var Kn=Un;function Un(e){var t=Xe(e.charAt(0)),n=e.slice(1);return!n||(n=Xe(n),t===n)?t:t==="u"&&n==="l"?"s":null}function Xe(e){return e===e.toLowerCase()?"l":e===e.toUpperCase()?"u":null}var be=Kn,Ze=Ct,qn=Pe,Vn=Ue,zn=Yn,Gn=[].push;function Yn(e){var t=this,n={},r=[],a={},i,s,o=[],l,d,c,f,y,h,b,v,m,p,g,A,w,P,_,N,x,I,T,k,C,E,D;if(e=Ze(e.trim(),t.conversion.in),!e||t.correct(e))return[];for(D=be(e),d=-1;++d<t.replacementTable.length;)for(s=t.replacementTable[d],c=e.indexOf(s[0]);c>-1;)o.push(e.replace(s[0],s[1])),c=e.indexOf(s[0],c+1);for(d=-1;++d<e.length;)for(v=e.charAt(d),p=e.slice(0,d),g=e.slice(d+1),w=v.toLowerCase(),A=w!==v,n={},c=-1;++c<t.flags.KEY.length;)if(m=t.flags.KEY[c],f=m.indexOf(w),!(f<0)){for(h=-1;++h<m.length;)if(h!==f){if(b=m.charAt(h),n[b])continue;n[b]=!0,A&&(b=b.toUpperCase()),o.push(p+b+g)}}for(d=-1,x=e.charAt(0),l=[""],I=1,T=0;++d<e.length;){for(v=x,x=e.charAt(d+1),p=e.slice(0,d),s=v===x?"":v+v,c=-1,y=l.length;++c<y;)c<=I&&l.push(l[c]+s),l[c]+=v;++T<3&&(I=l.length)}for(Gn.apply(o,l),l=[e],s=e.toLowerCase(),(e===s||D===null)&&l.push(e.charAt(0).toUpperCase()+s.slice(1)),s=e.toUpperCase(),e!==s&&l.push(s),i={state:{},weighted:a,suggestions:r},P=Je(t,i,l,o),_=0,I=Math.min(P.length,Math.pow(Math.max(15-e.length,3),3)),k=Math.max(Math.pow(10-e.length,3),1);!r.length&&_<I;)N=_+k,Je(t,i,P.slice(_,N)),_=N;for(r.sort(K),l=[],C=[],d=-1;++d<r.length;)E=Ze(r[d],t.conversion.out),s=E.toLowerCase(),C.indexOf(s)<0&&(l.push(E),C.push(s));return l;function K(U,q){return z(U,q)||Ee(U,q)||Re(U,q)}function z(U,q){return a[U]===a[q]?0:a[U]>a[q]?-1:1}function Ee(U,q){var qe=be(U),Ve=be(q);return qe===Ve?0:qe===D?-1:Ve===D?1:void 0}function Re(U,q){return U.localeCompare(q)}}function Je(e,t,n,r){var a=e.flags.TRY,i=e.data,s=e.flags,o=[],l=-1,d,c,f,y,h,b,v,m,p,g,A,w,P;if(r)for(;++l<r.length;)_(r[l],!0);for(l=-1;++l<n.length;)for(d=n[l],c="",f="",y=d.charAt(0),h=d,b=d.slice(1),v=y.toLowerCase()!==y,m=be(d),p=-1;++p<=d.length;)for(c+=f,g=h,h=b,b=h.slice(1),f=y,y=d.charAt(p+1),A=v,y&&(v=y.toLowerCase()!==y),h&&A!==v&&(_(c+N(h)),_(c+N(y)+N(f)+b)),_(c+h),h&&_(c+y+f+b),P=-1;++P<a.length;)w=a[P],A&&w!==w.toUpperCase()?(m!=="s"&&(_(c+w+g),_(c+w+h)),w=w.toUpperCase(),_(c+w+g),_(c+w+h)):(_(c+w+g),_(c+w+h));return o;function _(x,I){var T=t.state[x],k;T!==!!T&&(o.push(x),k=Vn(e,x),T=k&&!qn(s,"NOSUGGEST",i[k]),t.state[x]=T,T&&(t.weighted[x]=I?10:0,t.suggestions.push(x))),T&&t.weighted[x]++}function N(x){var I=x.charAt(0);return(I.toLowerCase()===I?I.toUpperCase():I.toLowerCase())+x.slice(1)}}var Hn=Ue,et=Pe,Qn=Xn;function Xn(e){var t=this,n=Hn(t,e,!0);return{correct:t.correct(e),forbidden:!!(n&&et(t.flags,"FORBIDDENWORD",t.data[n])),warn:!!(n&&et(t.flags,"WARN",t.data[n]))}}var Zn=Nt;function Nt(e,t,n,r){for(var a=-1,i,s,o,l,d;++a<t.entries.length;)if(i=t.entries[a],l=i.continuation,d=-1,(!i.match||i.match.test(e))&&(s=i.remove?e.replace(i.remove,""):e,s=t.type==="SFX"?s+i.add:i.add+s,r.push(s),l&&l.length))for(;++d<l.length;)o=n[l[d]],o&&Nt(s,o,n,r);return r}var tt=Zn,It=tr,Jn=[].push,$e=[];function er(e,t,n){var r=e[t];t in e?r===$e?e[t]=n.concat():Jn.apply(r,n):e[t]=n.concat()}function tr(e,t,n,r){var a=-1,i,s,o,l,d,c,f;for((!("NEEDAFFIX"in r.flags)||n.indexOf(r.flags.NEEDAFFIX)<0)&&er(e,t,n);++a<n.length;)if(i=r.rules[n[a]],n[a]in r.compoundRuleCodes&&r.compoundRuleCodes[n[a]].push(t),i){for(c=tt(t,i,r.rules,[]),s=-1;++s<c.length;)if(c[s]in e||(e[c[s]]=$e),i.combineable){for(o=a;++o<n.length;)if(d=r.rules[n[o]],d&&d.combineable&&i.type!==d.type)for(f=tt(c[s],d,r.rules,[]),l=-1;++l<f.length;)f[l]in e||(e[f[l]]=$e)}}}var nr=It,rr=ir,ar=[];function ir(e,t){var n=this;return nr(n.data,e,n.data[t]||ar,n),n}var sr=or;function or(e){var t=this;return delete t.data[e],t}var cr=lr;function lr(){return this.flags.WORDCHARS||null}var ur=xt,dr=It,fr=pr,nt=/\s/g;function pr(e,t,n){for(var r=e.toString("utf8"),a=r.indexOf(`
`)+1,i=r.indexOf(`
`,a);i>-1;)r.charCodeAt(a)!==9&&rt(r.slice(a,i),t,n),a=i+1,i=r.indexOf(`
`,a);rt(r.slice(a),t,n)}function rt(e,t,n){for(var r=e.indexOf("/"),a=e.indexOf("#"),i="",s,o;r>-1&&e.charCodeAt(r-1)===92;)e=e.slice(0,r-1)+e.slice(r),r=e.indexOf("/",r);a>-1?r>-1&&r<a?(s=e.slice(0,r),nt.lastIndex=r+1,o=nt.exec(e),i=e.slice(r+1,o?o.index:void 0)):s=e.slice(0,a):r>-1?(s=e.slice(0,r),i=e.slice(r+1)):s=e,s=s.trim(),s&&dr(n,s,ur(t.flags,i.trim()),t)}var hr=fr,mr=vr;function vr(e){var t=this,n=-1,r,a,i,s;for(hr(e,t,t.data);++n<t.compoundRules.length;){for(r=t.compoundRules[n],a="",s=-1;++s<r.length;)i=r.charAt(s),a+=t.compoundRuleCodes[i].length?"(?:"+t.compoundRuleCodes[i].join("|")+")":i;t.compoundRules[n]=new RegExp(a,"i")}return t}var gr=yr;function yr(e){var t=this,n=e.toString("utf8").split(`
`),r=-1,a,i,s,o;for(t.flags.FORBIDDENWORD===void 0&&(t.flags.FORBIDDENWORD=!1),o=t.flags.FORBIDDENWORD;++r<n.length;)a=n[r].trim(),a&&(a=a.split("/"),s=a[0],i=s.charAt(0)==="*",i&&(s=s.slice(1)),t.add(s,a[1]),i&&t.data[s].push(o));return t}var at=_n,br=xn,kr=we,Y=we.prototype;Y.correct=Mn;Y.suggest=zn;Y.spell=Qn;Y.add=rr;Y.remove=sr;Y.wordCharacters=cr;Y.dictionary=mr;Y.personal=gr;function we(e,t){var n=-1,r;if(!(this instanceof we))return new we(e,t);if(typeof e=="string"||at(e)?(typeof t=="string"||at(t))&&(r=[{dic:t}]):e&&("length"in e?(r=e,e=e[0]&&e[0].aff):(e.dic&&(r=[e]),e=e.aff)),!e)throw new Error("Missing `aff` in dictionary");if(e=br(e),this.data=Object.create(null),this.compoundRuleCodes=e.compoundRuleCodes,this.replacementTable=e.replacementTable,this.conversion=e.conversion,this.compoundRules=e.compoundRules,this.rules=e.rules,this.flags=e.flags,r)for(;++n<r.length;)r[n].dic&&this.dictionary(r[n].dic)}const wr=Se(kr),Ar=({suggestions:e,handleSuggestionClick:t,handleIgnoreSuggestionClick:n})=>u("ul",{className:"spelling-suggestion-list",children:e.map(r=>S("li",{className:"spelling-suggestion-list__item",children:[r.suggestions.map(a=>u($,{className:"intake-item-edit__btn spelling-suggestion-list__btn",onClickFn:()=>t(r.original,a),children:u("span",{children:a})},a)),u($,{className:"intake-item-edit__btn spelling-suggestion-list__btn",onClickFn:()=>n(r.original),children:u("span",{children:"ignore"})})]},r.original))}),_r="calorie";async function Or(e){const t=await Ft.post(`${_r}/item`,e);return Bt(t)}const Sr={getCaloriesForItem:Or},it=({intakeItem:e,idx:t,handleChange:n})=>{const{isCurrValidIntake:r}=te(),[a,i]=L.useState(!1),[s,o]=L.useState(!1),[l,d]=L.useState(""),[c,f]=L.useState("idle"),[y,h]=L.useState([]),[b,v]=L.useState(null),m=L.useRef(null),p=y.length>0&&y[0].suggestions.length>0&&!a&&b;function g(k){k.preventDefault();const{value:C,name:E}=k.target;switch(E){case"name":if(n({...e,name:C},t),i(!C.length),C.length||h([]),!m.current)return;m.current(C);break;case"quantity":n({...e,quantity:Number(C)},t);break;case"calories":{const D={...e,calories:Number(C)};delete D.caloriesPer100g,n(D,t),d("caloriesPer100g");break}case"caloriesPer100g":{const K=Number(C)*(e.quantity/100);n({...e,caloriesPer100g:Number(C),calories:K},t),d("calories");break}}}function A(){const k=V.getQuantityStepPerUnit(e.unit);e.quantity-k<1||n({...e,quantity:e.quantity-k},t)}function w(){const k=V.getQuantityStepPerUnit(e.unit);n({...e,quantity:e.quantity+k},t)}function P(k){k.preventDefault();const C=V.units.indexOf(e.unit),E=C===V.units.length-1?V.units[0]:V.units[C+1],D=V.getUnitDefaultQuantity(E);n({...e,unit:E,quantity:D},t)}function _(){const k={...e};s&&(delete k.calories,delete k.caloriesPer100g,d("")),o(C=>!C),n(k,t)}async function N(){if(e.name.length)try{f("pending");const k=await Sr.getCaloriesForItem(e);f("resolved"),n({...e,calories:k},t),o(!0)}catch(k){console.error(k),f("error")}}function x(){const{name:k,unit:C,quantity:E}=e;k==="water"&&C===me.MILLILITER&&E===750||n({...e,name:"water",unit:me.MILLILITER,quantity:750},t)}function I(k,C){const E=e.name.replace(k,C),D=y.filter(K=>K.original!==k);h(D),n({...e,name:E},t)}function T(k){const C=y.filter(E=>E.original!==k);h(C)}return L.useEffect(()=>{Promise.all([fetch("/assets/dictionaries/en_US.aff").then(k=>k.text()),fetch("/assets/dictionaries/en_US.dic").then(k=>k.text())]).then(([k,C])=>{const E=new wr(k,C);v(E)}).catch(k=>{console.error("Failed to load dictionaries:",k)})},[]),L.useEffect(()=>{function k(C){if(!b)return;const E=new Set(["nes"]),K=C.split(" ").filter(z=>!E.has(z)).map(z=>({original:z,suggestions:b.suggest(z)}));h(K)}m.current=Mt(k,1e3).debouncedFunc},[b]),L.useEffect(()=>{c==="error"&&setTimeout(()=>f("idle"),3e3)},[c]),S("section",{className:"intake-item-edit",children:[u("input",{type:"text",name:"name",className:"intake-item-input",value:e.name,onChange:g,spellCheck:!0,autoComplete:"off",placeholder:"Enter food name"}),p&&u(Ar,{suggestions:y,handleSuggestionClick:I,handleIgnoreSuggestionClick:T}),(a||!r)&&u("div",{onClick:()=>i(!1),children:u(Te,{msg:"intake name cannot be empty!"})}),S("div",{className:"intake-item-edit-inputs-container",children:[S("div",{className:"quantity-input-container",children:[u($,{onClickFn:A,children:u(bn,{})}),u("input",{type:"number",name:"quantity",className:"intake-item-input quantity-input",value:e.quantity,onChange:g}),u($,{onClickFn:w,children:u(kn,{})})]}),u($,{onClickFn:P,className:"intake-item-edit__btn",children:u("span",{children:e.unit})}),u($,{onClickFn:x,className:"intake-item-edit__btn"+(e.name==="water"?" active":""),children:u("span",{children:"water"})}),u($,{onClickFn:_,className:"intake-item-edit__btn",children:u("span",{children:s?"Manual":"Auto"})}),u($,{onClickFn:N,className:"intake-item-edit__btn calc-calories-btn",children:c==="pending"?u(ee,{withContainer:!0,containerSize:{width:"100%"}}):u("span",{children:"calc"})})]}),s&&S("div",{className:"intake-item-edit__manuall-calorie-edit",children:[u("input",{type:"number",name:"calories",className:"intake-item-input"+(l==="calories"?" faded":""),value:e.calories||"",placeholder:"Calories",onChange:g,onClick:()=>d("")}),u("input",{type:"number",name:"caloriesPer100g",className:"intake-item-input"+(l==="caloriesPer100g"?" faded":""),value:e.caloriesPer100g||"",placeholder:"Calories per 100g",onChange:g,onClick:()=>d("")})]}),c==="error"&&u(Te,{msg:"Failed to calculate calories!"})]})};const Pr=()=>{const{dailyData:e,isLoading:t,isLoadingUpdate:n,intake:r,updateDailyData:a,setIntake:i,backgroundColor:s,setCurrIsValidIntake:o}=te(),[l,d]=L.useState(!1),c=!l&&!t&&!n;function f(){i(p=>({...p,items:[...p.items,V.getDefaultIntakeItem()]}))}function y(p){r.items.length!==1&&i(g=>({...g,items:g.items.filter((A,w)=>w!==p)}))}function h(){i(p=>({...p,recordedAt:p.recordedAt?null:new Date,isRecorded:!p.isRecorded}))}function b(p){const{value:g}=p.target;i(A=>({...A,name:g}))}function v(p,g){i(A=>({...A,items:A.items.map((w,P)=>P===g?p:w)}))}function m(p){if(p.preventDefault(),!e)return;if(!r.items.every(P=>P.name.length&&P.quantity>0))return o(!1);r.recordedAt=new Date;const w=!e.intakes.some(P=>P.id===r.id)?[...e.intakes,r]:e.intakes.map(P=>P.id===r.id?r:P);a({...e,intakes:w}),i(V.getDefaultIntake())}return S("form",{className:"intake-edit",onSubmit:m,children:[c&&S(he,{children:[u("input",{type:"text",id:"intake-name",className:"input-intake-name",onChange:b,autoComplete:"off",placeholder:"Name your intake!"}),u("div",{className:"intake-edit__list-container",children:u(ke,{items:r.items,render:(p,g,A)=>g===A.length-1?S("div",{className:"last-intake-edit-item-container",children:[u(it,{intakeItem:p,idx:g,handleChange:v}),S("div",{className:"last-intake-edit-item__btn-container",children:[A.length>1&&u($,{onClickFn:()=>y(g),children:"remove item"}),u($,{onClickFn:f,children:"add item"})]})]},g):u(it,{intakeItem:p,idx:g,handleChange:v},g)})})]}),(t||n)&&u(ee,{withContainer:!0,containerSize:{height:"75px",width:"100%"}}),l&&S(he,{children:[u("h3",{className:"intake-edit-review-title",children:r.name}),u(ke,{items:r.items,render:(p,g)=>S("p",{className:"intake-edit-review-list__item",children:[u("span",{children:`${g+1})`}),u("p",{children:`${p.name} - ${p.quantity} ${p.unit} ${p.calories?`- Calories ${p.calories}`:""}`})]}),className:"intake-edit-review-list"})]}),S("div",{className:"intake-edit-btns-container",style:{backgroundColor:s},children:[u($,{onClickFn:h,className:"intake-edit-btn btn-toggle-save-later"+(r.isRecorded?"":" clicked"),children:"Save Later"}),u($,{onClickFn:()=>d(p=>!p),className:"intake-edit-btn",children:l?"Edit":"Review"}),u($,{onClickFn:p=>m(p),className:"intake-edit-btn",type:"submit",children:"Add Intake"})]})]})};const xr=()=>{const{dailyData:e,setOpenedElement:t}=te();if(!e)return null;const n=[{name:"add",value:F.IntakeEdit},{name:"intakes",value:F.IntakeList},{name:"unrecorded",value:F.UnRecordedIntakeList},{name:"weight",value:F.WeightWaistInput},{name:"workouts",value:F.Workouts,isShown:(e==null?void 0:e.workouts.length)>0}];return u("ul",{className:"filter",children:n.map(r=>r.isShown===!1?null:u("li",{className:"filter__item",children:u($,{className:"btn",onClickFn:()=>t(r.value),children:r.name})},r.value))})};var Cr=["points","className","baseLinePoints","connectNulls"];function se(){return se=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},se.apply(this,arguments)}function Nr(e,t){if(e==null)return{};var n=Ir(e,t),r,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)r=i[a],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function Ir(e,t){if(e==null)return{};var n={},r=Object.keys(e),a,i;for(i=0;i<r.length;i++)a=r[i],!(t.indexOf(a)>=0)&&(n[a]=e[a]);return n}function st(e){return Tr(e)||Lr(e)||Rr(e)||Er()}function Er(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Rr(e,t){if(e){if(typeof e=="string")return je(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return je(e,t)}}function Lr(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function Tr(e){if(Array.isArray(e))return je(e)}function je(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var ot=function(t){return t&&t.x===+t.x&&t.y===+t.y},Dr=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],n=[[]];return t.forEach(function(r){ot(r)?n[n.length-1].push(r):n[n.length-1].length>0&&n.push([])}),ot(t[0])&&n[n.length-1].push(t[0]),n[n.length-1].length<=0&&(n=n.slice(0,-1)),n},fe=function(t,n){var r=Dr(t);n&&(r=[r.reduce(function(i,s){return[].concat(st(i),st(s))},[])]);var a=r.map(function(i){return i.reduce(function(s,o,l){return"".concat(s).concat(l===0?"M":"L").concat(o.x,",").concat(o.y)},"")}).join("");return r.length===1?"".concat(a,"Z"):a},$r=function(t,n,r){var a=fe(t,r);return"".concat(a.slice(-1)==="Z"?a.slice(0,-1):a,"L").concat(fe(n.reverse(),r).slice(1))},jr=function(t){var n=t.points,r=t.className,a=t.baseLinePoints,i=t.connectNulls,s=Nr(t,Cr);if(!n||!n.length)return null;var o=Ot("recharts-polygon",r);if(a&&a.length){var l=s.stroke&&s.stroke!=="none",d=$r(n,a,i);return O.createElement("g",{className:o},O.createElement("path",se({},j(s,!0),{fill:d.slice(-1)==="Z"?s.fill:"none",stroke:"none",d})),l?O.createElement("path",se({},j(s,!0),{fill:"none",d:fe(n,i)})):null,l?O.createElement("path",se({},j(s,!0),{fill:"none",d:fe(a,i)})):null)}var c=fe(n,i);return O.createElement("path",se({},j(s,!0),{fill:c.slice(-1)==="Z"?s.fill:"none",className:o,d:c}))},Fr=kt,Br=wt,Mr=Gt;function Wr(e,t){return e&&e.length?Fr(e,Br(t),Mr):void 0}var Kr=Wr;const Ur=Se(Kr);var qr=kt,Vr=Yt,zr=wt;function Gr(e,t){return e&&e.length?qr(e,zr(t),Vr):void 0}var Yr=Gr;const Hr=Se(Yr);var Qr=["cx","cy","angle","ticks","axisLine"],Xr=["ticks","tick","angle","tickFormatter","stroke"];function ce(e){"@babel/helpers - typeof";return ce=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ce(e)}function pe(){return pe=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},pe.apply(this,arguments)}function ct(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function H(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?ct(Object(n),!0).forEach(function(r){xe(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ct(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function lt(e,t){if(e==null)return{};var n=Zr(e,t),r,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)r=i[a],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function Zr(e,t){if(e==null)return{};var n={},r=Object.keys(e),a,i;for(i=0;i<r.length;i++)a=r[i],!(t.indexOf(a)>=0)&&(n[a]=e[a]);return n}function Jr(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ut(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Et(r.key),r)}}function ea(e,t,n){return t&&ut(e.prototype,t),n&&ut(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function ta(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Fe(e,t)}function Fe(e,t){return Fe=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,a){return r.__proto__=a,r},Fe(e,t)}function na(e){var t=ia();return function(){var r=Ae(e),a;if(t){var i=Ae(this).constructor;a=Reflect.construct(r,arguments,i)}else a=r.apply(this,arguments);return ra(this,a)}}function ra(e,t){if(t&&(ce(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return aa(e)}function aa(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ia(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Ae(e){return Ae=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Ae(e)}function xe(e,t,n){return t=Et(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Et(e){var t=sa(e,"string");return ce(t)==="symbol"?t:String(t)}function sa(e,t){if(ce(e)!=="object"||e===null)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(ce(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Ce=function(e){ta(n,e);var t=na(n);function n(){return Jr(this,n),t.apply(this,arguments)}return ea(n,[{key:"getTickValueCoord",value:function(a){var i=a.coordinate,s=this.props,o=s.angle,l=s.cx,d=s.cy;return G(l,d,i,o)}},{key:"getTickTextAnchor",value:function(){var a=this.props.orientation,i;switch(a){case"left":i="end";break;case"right":i="start";break;default:i="middle";break}return i}},{key:"getViewBox",value:function(){var a=this.props,i=a.cx,s=a.cy,o=a.angle,l=a.ticks,d=Hr(l,function(f){return f.coordinate||0}),c=Ur(l,function(f){return f.coordinate||0});return{cx:i,cy:s,startAngle:o,endAngle:o,innerRadius:c.coordinate||0,outerRadius:d.coordinate||0}}},{key:"renderAxisLine",value:function(){var a=this.props,i=a.cx,s=a.cy,o=a.angle,l=a.ticks,d=a.axisLine,c=lt(a,Qr),f=l.reduce(function(v,m){return[Math.min(v[0],m.coordinate),Math.max(v[1],m.coordinate)]},[1/0,-1/0]),y=G(i,s,f[0],o),h=G(i,s,f[1],o),b=H(H(H({},j(c)),{},{fill:"none"},j(d)),{},{x1:y.x,y1:y.y,x2:h.x,y2:h.y});return O.createElement("line",pe({className:"recharts-polar-radius-axis-line"},b))}},{key:"renderTicks",value:function(){var a=this,i=this.props,s=i.ticks,o=i.tick,l=i.angle,d=i.tickFormatter,c=i.stroke,f=lt(i,Xr),y=this.getTickTextAnchor(),h=j(f),b=j(o),v=s.map(function(m,p){var g=a.getTickValueCoord(m),A=H(H(H(H({textAnchor:y,transform:"rotate(".concat(90-l,", ").concat(g.x,", ").concat(g.y,")")},h),{},{stroke:"none",fill:c},b),{},{index:p},g),{},{payload:m});return O.createElement(M,pe({className:"recharts-polar-radius-axis-tick",key:"tick-".concat(p)},Ke(a.props,m,p)),n.renderTickItem(o,A,d?d(m.value,p):m.value))});return O.createElement(M,{className:"recharts-polar-radius-axis-ticks"},v)}},{key:"render",value:function(){var a=this.props,i=a.ticks,s=a.axisLine,o=a.tick;return!i||!i.length?null:O.createElement(M,{className:"recharts-polar-radius-axis"},s&&this.renderAxisLine(),o&&this.renderTicks(),At.renderCallByParent(this.props,this.getViewBox()))}}],[{key:"renderTickItem",value:function(a,i,s){var o;return O.isValidElement(a)?o=O.cloneElement(a,i):X(a)?o=a(i):o=O.createElement(We,pe({},i,{className:"recharts-polar-radius-axis-tick-value"}),s),o}}]),n}(L.PureComponent);xe(Ce,"displayName","PolarRadiusAxis");xe(Ce,"axisType","radiusAxis");xe(Ce,"defaultProps",{type:"number",radiusAxisId:0,cx:0,cy:0,angle:0,orientation:"right",stroke:"#ccc",axisLine:!0,tick:!0,tickCount:5,allowDataOverflow:!1,scale:"auto",allowDuplicatedCategory:!0});function le(e){"@babel/helpers - typeof";return le=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},le(e)}function Z(){return Z=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Z.apply(this,arguments)}function dt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function Q(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?dt(Object(n),!0).forEach(function(r){Ne(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):dt(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function oa(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ft(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Rt(r.key),r)}}function ca(e,t,n){return t&&ft(e.prototype,t),n&&ft(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function la(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Be(e,t)}function Be(e,t){return Be=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,a){return r.__proto__=a,r},Be(e,t)}function ua(e){var t=pa();return function(){var r=_e(e),a;if(t){var i=_e(this).constructor;a=Reflect.construct(r,arguments,i)}else a=r.apply(this,arguments);return da(this,a)}}function da(e,t){if(t&&(le(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return fa(e)}function fa(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function pa(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function _e(e){return _e=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},_e(e)}function Ne(e,t,n){return t=Rt(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Rt(e){var t=ha(e,"string");return le(t)==="symbol"?t:String(t)}function ha(e,t){if(le(e)!=="object"||e===null)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(le(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var ma=Math.PI/180,pt=1e-5,Ie=function(e){la(n,e);var t=ua(n);function n(){return oa(this,n),t.apply(this,arguments)}return ca(n,[{key:"getTickLineCoord",value:function(a){var i=this.props,s=i.cx,o=i.cy,l=i.radius,d=i.orientation,c=i.tickSize,f=c||8,y=G(s,o,l,a.coordinate),h=G(s,o,l+(d==="inner"?-1:1)*f,a.coordinate);return{x1:y.x,y1:y.y,x2:h.x,y2:h.y}}},{key:"getTickTextAnchor",value:function(a){var i=this.props.orientation,s=Math.cos(-a.coordinate*ma),o;return s>pt?o=i==="outer"?"start":"end":s<-pt?o=i==="outer"?"end":"start":o="middle",o}},{key:"renderAxisLine",value:function(){var a=this.props,i=a.cx,s=a.cy,o=a.radius,l=a.axisLine,d=a.axisLineType,c=Q(Q({},j(this.props)),{},{fill:"none"},j(l));if(d==="circle")return O.createElement(Ht,Z({className:"recharts-polar-angle-axis-line"},c,{cx:i,cy:s,r:o}));var f=this.props.ticks,y=f.map(function(h){return G(i,s,o,h.coordinate)});return O.createElement(jr,Z({className:"recharts-polar-angle-axis-line"},c,{points:y}))}},{key:"renderTicks",value:function(){var a=this,i=this.props,s=i.ticks,o=i.tick,l=i.tickLine,d=i.tickFormatter,c=i.stroke,f=j(this.props),y=j(o),h=Q(Q({},f),{},{fill:"none"},j(l)),b=s.map(function(v,m){var p=a.getTickLineCoord(v),g=a.getTickTextAnchor(v),A=Q(Q(Q({textAnchor:g},f),{},{stroke:"none",fill:c},y),{},{index:m,payload:v,x:p.x2,y:p.y2});return O.createElement(M,Z({className:"recharts-polar-angle-axis-tick",key:"tick-".concat(m)},Ke(a.props,v,m)),l&&O.createElement("line",Z({className:"recharts-polar-angle-axis-tick-line"},h,p)),o&&n.renderTickItem(o,A,d?d(v.value,m):v.value))});return O.createElement(M,{className:"recharts-polar-angle-axis-ticks"},b)}},{key:"render",value:function(){var a=this.props,i=a.ticks,s=a.radius,o=a.axisLine;return s<=0||!i||!i.length?null:O.createElement(M,{className:"recharts-polar-angle-axis"},o&&this.renderAxisLine(),this.renderTicks())}}],[{key:"renderTickItem",value:function(a,i,s){var o;return O.isValidElement(a)?o=O.cloneElement(a,i):X(a)?o=a(i):o=O.createElement(We,Z({},i,{className:"recharts-polar-angle-axis-tick-value"}),s),o}}]),n}(L.PureComponent);Ne(Ie,"displayName","PolarAngleAxis");Ne(Ie,"axisType","angleAxis");Ne(Ie,"defaultProps",{type:"category",angleAxisId:0,scale:"auto",cx:0,cy:0,orientation:"outer",axisLine:!0,tickLine:!0,tickSize:8,tick:!0,hide:!1,allowDuplicatedCategory:!0});var va=Qt,ga=va(Object.getPrototypeOf,Object),ya=ga,ba=Xt,ka=ya,wa=Zt,Aa="[object Object]",_a=Function.prototype,Oa=Object.prototype,Lt=_a.toString,Sa=Oa.hasOwnProperty,Pa=Lt.call(Object);function xa(e){if(!wa(e)||ba(e)!=Aa)return!1;var t=ka(e);if(t===null)return!0;var n=Sa.call(t,"constructor")&&t.constructor;return typeof n=="function"&&n instanceof n&&Lt.call(n)==Pa}var Ca=xa;const Na=Se(Ca);function ue(e){"@babel/helpers - typeof";return ue=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ue(e)}function J(){return J=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},J.apply(this,arguments)}function ht(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function R(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?ht(Object(n),!0).forEach(function(r){B(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ht(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Ia(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function mt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Tt(r.key),r)}}function Ea(e,t,n){return t&&mt(e.prototype,t),n&&mt(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function Ra(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Me(e,t)}function Me(e,t){return Me=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,a){return r.__proto__=a,r},Me(e,t)}function La(e){var t=Da();return function(){var r=Oe(e),a;if(t){var i=Oe(this).constructor;a=Reflect.construct(r,arguments,i)}else a=r.apply(this,arguments);return Ta(this,a)}}function Ta(e,t){if(t&&(ue(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return re(e)}function re(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Da(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Oe(e){return Oe=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Oe(e)}function B(e,t,n){return t=Tt(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Tt(e){var t=$a(e,"string");return ue(t)==="symbol"?t:String(t)}function $a(e,t){if(ue(e)!=="object"||e===null)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(ue(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var W=function(e){Ra(n,e);var t=La(n);function n(r){var a;return Ia(this,n),a=t.call(this,r),B(re(a),"pieRef",null),B(re(a),"sectorRefs",[]),B(re(a),"id",en("recharts-pie-")),B(re(a),"handleAnimationEnd",function(){var i=a.props.onAnimationEnd;a.setState({isAnimationFinished:!0}),X(i)&&i()}),B(re(a),"handleAnimationStart",function(){var i=a.props.onAnimationStart;a.setState({isAnimationFinished:!1}),X(i)&&i()}),a.state={isAnimationFinished:!r.isAnimationActive,prevIsAnimationActive:r.isAnimationActive,prevAnimationId:r.animationId,sectorToFocus:0},a}return Ea(n,[{key:"isActiveIndex",value:function(a){var i=this.props.activeIndex;return Array.isArray(i)?i.indexOf(a)!==-1:a===i}},{key:"hasActiveIndex",value:function(){var a=this.props.activeIndex;return Array.isArray(a)?a.length!==0:a||a===0}},{key:"renderLabels",value:function(a){var i=this.props.isAnimationActive;if(i&&!this.state.isAnimationFinished)return null;var s=this.props,o=s.label,l=s.labelLine,d=s.dataKey,c=s.valueKey,f=j(this.props),y=j(o),h=j(l),b=o&&o.offsetRadius||20,v=a.map(function(m,p){var g=(m.startAngle+m.endAngle)/2,A=G(m.cx,m.cy,m.outerRadius+b,g),w=R(R(R(R({},f),m),{},{stroke:"none"},y),{},{index:p,textAnchor:n.getTextAnchor(A.x,m.cx)},A),P=R(R(R(R({},f),m),{},{fill:"none",stroke:m.fill},h),{},{index:p,points:[G(m.cx,m.cy,m.outerRadius,g),A],key:"line"}),_=d;return oe(d)&&oe(c)?_="value":oe(d)&&(_=c),O.createElement(M,{key:"label-".concat(p)},l&&n.renderLabelLineItem(l,P),n.renderLabelItem(o,w,ne(m,_)))});return O.createElement(M,{className:"recharts-pie-labels"},v)}},{key:"renderSectorsStatically",value:function(a){var i=this,s=this.props,o=s.activeShape,l=s.blendStroke,d=s.inactiveShape;return a.map(function(c,f){var y=d&&i.hasActiveIndex()?d:null,h=i.isActiveIndex(f)?o:y,b=R(R({},c),{},{stroke:l?c.fill:c.stroke});return O.createElement(M,J({ref:function(m){m&&!i.sectorRefs.includes(m)&&i.sectorRefs.push(m)},tabIndex:-1,className:"recharts-pie-sector"},Ke(i.props,c,f),{key:"sector-".concat(f)}),n.renderSectorItem(h,b))})}},{key:"renderSectorsWithAnimation",value:function(){var a=this,i=this.props,s=i.sectors,o=i.isAnimationActive,l=i.animationBegin,d=i.animationDuration,c=i.animationEasing,f=i.animationId,y=this.state,h=y.prevSectors,b=y.prevIsAnimationActive;return O.createElement(nn,{begin:l,duration:d,isActive:o,easing:c,from:{t:0},to:{t:1},key:"pie-".concat(f,"-").concat(b),onAnimationStart:this.handleAnimationStart,onAnimationEnd:this.handleAnimationEnd},function(v){var m=v.t,p=[],g=s&&s[0],A=g.startAngle;return s.forEach(function(w,P){var _=h&&h[P],N=P>0?rn(w,"paddingAngle",0):0;if(_){var x=Ge(_.endAngle-_.startAngle,w.endAngle-w.startAngle),I=R(R({},w),{},{startAngle:A+N,endAngle:A+x(m)+N});p.push(I),A=I.endAngle}else{var T=w.endAngle,k=w.startAngle,C=Ge(0,T-k),E=C(m),D=R(R({},w),{},{startAngle:A+N,endAngle:A+E+N});p.push(D),A=D.endAngle}}),O.createElement(M,null,a.renderSectorsStatically(p))})}},{key:"attachKeyboardHandlers",value:function(a){var i=this;a.onkeydown=function(s){if(!s.altKey)switch(s.key){case"ArrowLeft":{var o=++i.state.sectorToFocus%i.sectorRefs.length;i.sectorRefs[o].focus(),i.setState({sectorToFocus:o});break}case"ArrowRight":{var l=--i.state.sectorToFocus<0?i.sectorRefs.length-1:i.state.sectorToFocus%i.sectorRefs.length;i.sectorRefs[l].focus(),i.setState({sectorToFocus:l});break}case"Escape":{i.sectorRefs[i.state.sectorToFocus].blur(),i.setState({sectorToFocus:0});break}}}}},{key:"renderSectors",value:function(){var a=this.props,i=a.sectors,s=a.isAnimationActive,o=this.state.prevSectors;return s&&i&&i.length&&(!o||!an(o,i))?this.renderSectorsWithAnimation():this.renderSectorsStatically(i)}},{key:"componentDidMount",value:function(){this.pieRef&&this.attachKeyboardHandlers(this.pieRef)}},{key:"render",value:function(){var a=this,i=this.props,s=i.hide,o=i.sectors,l=i.className,d=i.label,c=i.cx,f=i.cy,y=i.innerRadius,h=i.outerRadius,b=i.isAnimationActive,v=this.state.isAnimationFinished;if(s||!o||!o.length||!ie(c)||!ie(f)||!ie(y)||!ie(h))return null;var m=Ot("recharts-pie",l);return O.createElement(M,{tabIndex:this.props.rootTabIndex,className:m,ref:function(g){a.pieRef=g}},this.renderSectors(),d&&this.renderLabels(o),At.renderCallByParent(this.props,null,!1),(!b||v)&&sn.renderCallByParent(this.props,o,!1))}}],[{key:"getDerivedStateFromProps",value:function(a,i){return i.prevIsAnimationActive!==a.isAnimationActive?{prevIsAnimationActive:a.isAnimationActive,prevAnimationId:a.animationId,curSectors:a.sectors,prevSectors:[],isAnimationFinished:!0}:a.isAnimationActive&&a.animationId!==i.prevAnimationId?{prevAnimationId:a.animationId,curSectors:a.sectors,prevSectors:i.curSectors,isAnimationFinished:!0}:a.sectors!==i.curSectors?{curSectors:a.sectors,isAnimationFinished:!0}:null}},{key:"getTextAnchor",value:function(a,i){return a>i?"start":a<i?"end":"middle"}},{key:"renderLabelLineItem",value:function(a,i){return O.isValidElement(a)?O.cloneElement(a,i):X(a)?a(i):O.createElement(tn,J({},i,{type:"linear",className:"recharts-pie-label-line"}))}},{key:"renderLabelItem",value:function(a,i,s){if(O.isValidElement(a))return O.cloneElement(a,i);var o=s;return X(a)&&(o=a(i),O.isValidElement(o))?o:O.createElement(We,J({},i,{alignmentBaseline:"middle",className:"recharts-pie-label-text"}),o)}},{key:"renderSectorItem",value:function(a,i){return O.isValidElement(a)?O.cloneElement(a,i):X(a)?a(i):Na(a)?O.createElement(ze,J({tabIndex:-1},i,a)):O.createElement(ze,J({tabIndex:-1},i))}}]),n}(L.PureComponent);B(W,"displayName","Pie");B(W,"defaultProps",{stroke:"#fff",fill:"#808080",legendType:"rect",cx:"50%",cy:"50%",startAngle:0,endAngle:360,innerRadius:0,outerRadius:"80%",paddingAngle:0,labelLine:!0,hide:!1,minAngle:0,isAnimationActive:!Jt.isSsr,animationBegin:400,animationDuration:1500,animationEasing:"ease",nameKey:"name",blendStroke:!1,rootTabIndex:0});B(W,"parseDeltaAngle",function(e,t){var n=ye(t-e),r=Math.min(Math.abs(t-e),360);return n*r});B(W,"getRealPieData",function(e){var t=e.props,n=t.data,r=t.children,a=j(e.props),i=on(r,_t);return n&&n.length?n.map(function(s,o){return R(R(R({payload:s},a),s),i&&i[o]&&i[o].props)}):i&&i.length?i.map(function(s){return R(R({},a),s.props)}):[]});B(W,"parseCoordinateOfPie",function(e,t){var n=t.top,r=t.left,a=t.width,i=t.height,s=cn(a,i),o=r+ve(e.props.cx,a,a/2),l=n+ve(e.props.cy,i,i/2),d=ve(e.props.innerRadius,s,0),c=ve(e.props.outerRadius,s,s*.8),f=e.props.maxRadius||Math.sqrt(a*a+i*i)/2;return{cx:o,cy:l,innerRadius:d,outerRadius:c,maxRadius:f}});B(W,"getComposedData",function(e){var t=e.item,n=e.offset,r=W.getRealPieData(t);if(!r||!r.length)return null;var a=t.props,i=a.cornerRadius,s=a.startAngle,o=a.endAngle,l=a.paddingAngle,d=a.dataKey,c=a.nameKey,f=a.valueKey,y=a.tooltipType,h=Math.abs(t.props.minAngle),b=W.parseCoordinateOfPie(t,n),v=W.parseDeltaAngle(s,o),m=Math.abs(v),p=d;oe(d)&&oe(f)?(Ye(!1,`Use "dataKey" to specify the value of pie,
      the props "valueKey" will be deprecated in 1.1.0`),p="value"):oe(d)&&(Ye(!1,`Use "dataKey" to specify the value of pie,
      the props "valueKey" will be deprecated in 1.1.0`),p=f);var g=r.filter(function(x){return ne(x,p,0)!==0}).length,A=(m>=360?g:g-1)*l,w=m-g*h-A,P=r.reduce(function(x,I){var T=ne(I,p,0);return x+(ie(T)?T:0)},0),_;if(P>0){var N;_=r.map(function(x,I){var T=ne(x,p,0),k=ne(x,c,I),C=(ie(T)?T:0)/P,E;I?E=N.endAngle+ye(v)*l*(T!==0?1:0):E=s;var D=E+ye(v)*((T!==0?h:0)+C*w),K=(E+D)/2,z=(b.innerRadius+b.outerRadius)/2,Ee=[{name:k,value:T,payload:x,dataKey:p,type:y}],Re=G(b.cx,b.cy,z,K);return N=R(R(R({percent:C,cornerRadius:i,name:k,tooltipPayload:Ee,midAngle:K,middleRadius:z,tooltipPosition:Re},x),b),{},{value:ne(x,p),startAngle:E,endAngle:D,payload:x,paddingAngle:ye(v)*l}),N})}return R(R({},b),{},{sectors:_,data:r})});var ja=ln({chartName:"PieChart",GraphicalChild:W,validateTooltipEventTypes:["item"],defaultTooltipEventType:"item",legendContent:"children",axisComponents:[{axisType:"angleAxis",AxisComp:Ie},{axisType:"radiusAxis",AxisComp:Ce}],formatAxisMap:un,defaultProps:{layout:"centric",startAngle:0,endAngle:360,cx:"50%",cy:"50%",innerRadius:0,outerRadius:"80%"}});const Fa=({intakes:e,remainingCalories:t})=>{const n=[...e.map(a=>({name:a.name||"unnamed",value:a.items.reduce((i,s)=>i+s.calories,0)})),{name:"remaining",value:t}],r=["#0088FE","#00C49F","#FFBB28","#FF8042","#FF5733","#33FF57","#8333FF","#FF33A1","#33A4FF","#FF8333","#33FFA1","#A133FF"];return S(ja,{width:250,height:250,children:[u(W,{dataKey:"value",isAnimationActive:!1,data:n,cx:125,cy:125,innerRadius:80,outerRadius:110,children:n.map((a,i)=>{const s=a.name==="remaining"?"#a7a7a7":r[i%r.length];return u(_t,{fill:s},`cell-${i}`)})}),u(dn,{})]})},Ba=()=>{const{dailyData:e,recordedIntakes:t,remainingCalories:n,consumedCalories:r,estimatedKGChange:a,recommendedWaterIntake:i}=te();if(!e)return null;const{date:s}=e,o=new Intl.DateTimeFormat("en-GB",{weekday:"long",month:"numeric",day:"numeric",year:"numeric"}).format(new Date(s));return S("header",{className:"today-details__header",children:[u("div",{className:"today-details__header__date-container",children:u("h2",{className:"today-details__header__date",children:o})}),u(Fa,{intakes:t,remainingCalories:n}),S("div",{className:"today-details__header__titles",children:[n>0?S("p",{className:"today-details__title",children:[u("strong",{children:Math.round(n)})," calories remaining"]}):S("p",{className:"today-details__title",children:[u("strong",{children:Math.abs(Math.round(n))})," calories over your limit"]}),u("hr",{}),r>0&&S("p",{className:"today-details__title",children:[u("strong",{children:Math.round(r)})," calories consumed"]}),a>0?S("p",{className:"today-details__title",children:["estimated to gain ",S("strong",{children:[a,"kg"]})]}):S("p",{className:"today-details__title",children:["estimated to lose ",u("strong",{children:Math.abs(a)})," kg"]}),i&&S("p",{className:"today-details__title",children:[u("strong",{children:i})," ml of water remaining"]})]})]})};const Ma=({intake:e})=>S("ol",{className:"intake-preview",children:[e.name&&u("h3",{className:"intake-preview__name",children:e.name}),e.items.map(t=>u("li",{className:"intake-item-preview-container",children:u("section",{className:"intake-item-preview",children:u("p",{className:"intake-item-preview__details",children:`${t.name} - ${t.quantity} ${t.unit} - caolries: ${Math.round(t.calories)}`})})},t.id))]}),Wa=()=>{const{dailyData:e,unrecordedIntakes:t,recordedIntakes:n,openedElement:r,setOpenedElement:a,setIntake:i,updateDailyData:s,isLoadingUpdate:o}=te();if(!e)return null;const l=r===F.IntakeList,c=(l?n:t).sort((v,m)=>!v.recordedAt||!m.recordedAt?0:new Date(v.recordedAt).getTime()-new Date(m.recordedAt).getTime()),f=ae.getTotalCaloriesFromDailyData({dailyData:e,isRecorded:l});function y(v){if(!e)return;const m={...e};m.intakes=e.intakes.map(p=>(p.id===v&&(p.isRecorded=!0,p.recordedAt=new Date),p)),s(m)}function h(v){if(!e)return;const m={...v};i(m),a(F.IntakeEdit)}function b(v){if(!e)return;const m={...e};m.intakes=e.intakes.filter(p=>p.id!==v),s(m)}return S(he,{children:[o&&u(ee,{}),S("header",{className:"intake-list__header",children:[S("h3",{className:"intake-list__title",children:[l?"Recorded":"Unrecorded"," Intakes"]}),S("h4",{className:"intake-list__total-calories",children:["total calories: ",f]})]}),u(ke,{className:"intake-list",items:c,render:(v,m)=>S("li",{className:"intake-preview-container",children:[u("h5",{className:"intake-list-item-title",children:`Intake ${m+1}# ${v.name?`- ${v.name}`:""} ${v.recordedAt?`- ${Wt(v.recordedAt)}`:""}`}),u(Ma,{intake:v}),u("p",{className:"intake-preview__total-calories",children:`Total Calories: ${ae.getTotalCalories(v)}`}),S("div",{className:"intake-list__btns-container",children:[u($,{className:"btn",onClickFn:()=>b(v.id),children:"Delete"}),l?u($,{className:"btn",onClickFn:()=>h(v),children:"Edit"}):u($,{className:"btn",onClickFn:()=>y(v.id),children:"Save"})]})]},v.id)})]})},Ka=()=>{const{dailyData:e,isLoading:t,updateDailyData:n}=te(),[r,a]=L.useState(),[i,s]=L.useState();function o(f){const{value:y}=f.target;a(Number(y))}function l(f){const{value:y}=f.target;s(Number(y))}function d(f){f.preventDefault(),!(!e||!r||!i)&&n({...e,weight:r,waist:i})}if(!e)return null;const c=!e.weight&&!e.waist&&!t;return S(he,{children:[t&&u(ee,{withContainer:!0,containerSize:{height:"75px"}}),c&&S("form",{className:"weight-waist-form",children:[u("input",{type:"number",name:"weight",className:"weight-waist-form__input",placeholder:"Enter your weight",value:r||"",onChange:o}),u("input",{type:"number",className:"weight-waist-form__input",name:"waist",placeholder:"Enter your waist size",value:i||"",onChange:l}),u($,{className:"btn",onClickFn:d,type:"submit",children:"update"})]}),!c&&S("div",{className:"weight-waist-details",children:[u("p",{className:"weight-waist-details__title",children:"weight:"}),S("p",{className:"weight-waist-details__text",children:[e.weight," kg"]}),u("p",{className:"weight-waist-details__title",children:"waist:"}),S("p",{className:"weight-waist-details__text",children:[e.waist," cm"]})]})]})},Ua=()=>{const{dailyData:e,isLoading:t,isSuccess:n,isError:r,isLoadingUpdate:a,openedElement:i,backgroundColor:s}=te(),o=n&&e&&!a,l=t||a,d=i===F.IntakeList||i===F.UnRecordedIntakeList;return S("section",{className:"today-details",style:{backgroundColor:s},children:[l&&u(ee,{}),r&&u(Te,{}),o&&S(he,{children:[u(Ba,{}),u(xr,{}),i===F.WeightWaistInput&&u(Ka,{}),i===F.IntakeEdit&&u(Pr,{}),i===F.Workouts&&u(ke,{items:e.workouts,render:c=>u(fn,{workout:c,isTodayDetails:!0},c.id)}),d&&u(Wa,{})]})]})};const qa=()=>{const e=Kt();return S("div",{className:"login-signup-msg",children:[u("div",{className:"login-signup-msg-text-container",children:u("h1",{children:"Start Your Journey Now!"})}),u("div",{className:"login-signup-msg-btn-container",children:[{title:"Log in",className:"btn-login",path:"/login"},{title:"Sign up",className:"btn-signup",path:"/signup"}].map(n=>u("button",{className:n.className,onClick:()=>{e(n.path)},children:n.title},n.title))})]})};function Va(){const e=Ut(),{mutate:t,isLoading:n}=qt({mutationFn:Vt.create,onSuccess:()=>{e.invalidateQueries(["today"])}});return{createDay:t,isLoading:n}}const ti=()=>{const{loggedInUser:e}=yt(o=>o.auth),{dailyData:t}=bt(),{createDay:n,isLoading:r}=Va(),a=e&&!r,i=t?!za(t):!0;hn({title:"Home / Kceli"});function s(){window.confirm("Are you sure you want to start a new day?")&&n({})}return S("main",{className:"home","data-testid":"home-page",children:[!e&&u(qa,{}),a&&u(wn,{children:u(Ua,{})}),r&&u(ee,{}),i&&u($,{className:"home__btn",onClickFn:s,children:"start a new day"}),u(L.Suspense,{fallback:u(ee,{}),children:u(zt,{})})]})};function za(e){const t=new Date().toDateString(),n=new Date(e.date).toDateString();return t===n}export{ti as default};
