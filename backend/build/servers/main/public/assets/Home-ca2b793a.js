import{r as T,u as Dt,s as $t,c as vt,G as gt,a as yt,b as bt,d as jt,j as d,g as Pe,e as A,h as Ft,f as Bt,i as Mt,S as ee,F as he,$ as O,k as Wt,l as Kt,m as Ut,n as qt,o as Vt,O as zt}from"./index-f7ecada1.js";import{L as _e}from"./List-f15f3a05.js";import{B as $}from"./Button-c551eed2.js";import{E as Le}from"./ErrorMsg-549ce38c.js";import{c as ae}from"./calorieUtilService-74544aa9.js";import{f as j,_ as _t,a as kt,b as Gt,c as Yt,d as X,T as We,p as G,L as M,e as Ke,g as wt,D as Ht,h as Qt,i as Xt,j as Zt,G as Jt,u as en,C as tn,S as ze,k as oe,l as ne,A as nn,m as rn,n as Ge,o as an,q as ie,r as sn,s as on,t as At,v as cn,w as ve,x as Ye,y as ye,z as ln,B as un,E as dn}from"./generateCategoricalChart-afe57775.js";import{c as Ot}from"./index-071b4459.js";import{W as fn}from"./WorkoutPreview-2ccaf1e8.js";function pn(e){T.useEffect(()=>{const t=document.title;return document.title=e||"Kceli",()=>{document.title=t}},[e])}function hn({title:e}){const t=Dt();pn(e),T.useEffect(()=>{t($t(!1))},[t])}var me=(e=>(e.UNIT="unit",e.GRAM="g",e.CUP="cup",e.TABLE_SPOON="tbsp",e.TEA_SPOON="tsp",e.MILLILITER="ml",e))(me||{});const mn=Object.values(me);function vn(){return{id:vt(),items:[Pt()],isRecorded:!0,recordedAt:null}}function Pt(){return{id:vt(),unit:me.UNIT,quantity:1,name:""}}function gn(e){switch(e){case"g":return 100;case"ml":return 100;case"unit":return 1;case"cup":return 1;case"tbsp":return 1;case"tsp":return 1;default:return 1}}function yn(e){switch(e){case"g":return 25;case"ml":return 25;case"unit":return 1;case"cup":return 1;case"tbsp":return 1;case"tsp":return 1;default:return 1}}const V={getDefaultIntake:vn,getDefaultIntakeItem:Pt,getUnitDefaultQuantity:gn,getQuantityStepPerUnit:yn,units:mn};function bn(e){return gt({tag:"svg",attr:{viewBox:"0 0 1024 1024"},child:[{tag:"path",attr:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm192 472c0 4.4-3.6 8-8 8H328c-4.4 0-8-3.6-8-8v-48c0-4.4 3.6-8 8-8h368c4.4 0 8 3.6 8 8v48z"}}]})(e)}function _n(e){return gt({tag:"svg",attr:{viewBox:"0 0 1024 1024"},child:[{tag:"path",attr:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm192 472c0 4.4-3.6 8-8 8H544v152c0 4.4-3.6 8-8 8h-48c-4.4 0-8-3.6-8-8V544H328c-4.4 0-8-3.6-8-8v-48c0-4.4 3.6-8 8-8h152V328c0-4.4 3.6-8 8-8h48c4.4 0 8 3.6 8 8v152h152c4.4 0 8 3.6 8 8v48z"}}]})(e)}var F=(e=>(e.IntakeEdit="IntakeEdit",e.IntakeList="IntakeList",e.UnRecordedIntakeList="UnRecordedIntakeList",e.WeightWaistInput="WeightWaistInput",e.Workouts="Workouts",e))(F||{});const St=T.createContext(void 0);function kn({children:e}){const{loggedInUser:t}=yt(),{dailyData:n,isLoading:r,isSuccess:a,isError:i}=bt(),{updateDailyData:s,isLoading:o}=jt(),[c,f]=T.useState(n!=null&&n.weight?"WeightWaistInput":"IntakeEdit"),[l,p]=T.useState(V.getDefaultIntake()),[g,h]=T.useState(!0),y=(n==null?void 0:n.intakes.filter(x=>x.isRecorded))||[],v=(n==null?void 0:n.intakes.filter(x=>!x.isRecorded))||[],u=ae.calcRemainingCalories(t,n),m=ae.getTotalCalories(n),b=(n==null?void 0:n.targetCaloricIntake)??(t==null?void 0:t.targetCaloricIntakePerDay)??0,P=ae.calcEstimatedBodyFatStatusPerDay(t,n),_=Math.round(m/b*100),R=Math.round(u/b*100),w=wn(t,n),E=ae.getBcgByCosumedCalories({consumedCalories:m,targetCalorie:b}),S={dailyData:n,isLoading:r,isSuccess:a,isError:i,updateDailyData:s,isLoadingUpdate:o,recordedIntakes:y,unrecordedIntakes:v,remainingCalories:u,consumedCalories:m,targetCaloricIntakePerDay:b,estimatedKGChange:P,backgroundColor:E,openedElement:c,setOpenedElement:f,isCurrValidIntake:g,setCurrIsValidIntake:h,recommendedWaterIntake:w,intake:l,setIntake:p,calConsumedPct:_,calRemainingPct:R};return d(St.Provider,{value:S,children:e})}function te(){const e=T.useContext(St);if(e===void 0)throw new Error("useTodayData must be used within a TodayDataProvider");return e}function wn(e,t){if(!e||!t)return 0;const n=t.weight||e.weight,r=Number((n*33).toFixed(2)),a=t.intakes.filter(i=>i.isRecorded).reduce((i,s)=>s.items.reduce((o,c)=>{if(c.name.toLocaleLowerCase()==="water")switch(c.unit){case"ml":return o+c.quantity;case"cup":return o+c.quantity*250;default:return o}return o},i),0)||0;return Number(((r-a)/1e3).toFixed(2))}/*!
 * Determine if an object is a Buffer
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */var An=function(t){return t!=null&&t.constructor!=null&&typeof t.constructor.isBuffer=="function"&&t.constructor.isBuffer(t)},xt=Pn,On=[];function Pn(e,t){var n=0,r;if(!t)return On;if(e.FLAG==="long"){for(r=new Array(Math.ceil(t.length/2));n<t.length;)r[n/2]=t.slice(n,n+2),n+=2;return r}return t.split(e.FLAG==="num"?",":"")}var Sn=xt,xn=En,Cn=[].push,ge="etaoinshrdlcumwfgypbvkjxqz".split(""),de=/\s+/,Nn=["qwertzuop","yxcvbnm","qaw","say","wse","dsx","sy","edr","fdc","dx","rft","gfv","fc","tgz","hgb","gv","zhu","jhn","hb","uji","kjm","jn","iko","lkm"];function En(e){var t=Object.create(null),n=Object.create(null),r=Object.create(null),a=[],i={in:[],out:[]},s=[],o=e.toString("utf8"),c=[],f=0,l=o.indexOf(`
`),p,g,h,y,v,u,m,b,P,_,R,w,E;for(r.KEY=[];l>-1;)S(o.slice(f,l)),f=l+1,l=o.indexOf(`
`,f);for(S(o.slice(f)),l=-1;++l<c.length;)if(g=c[l],p=g.split(de),h=p[0],h==="REP"){for(y=l+parseInt(p[1],10);++l<=y;)p=c[l].split(de),a.push([p[1],p[2]]);l--}else if(h==="ICONV"||h==="OCONV"){for(y=l+parseInt(p[1],10),b=i[h==="ICONV"?"in":"out"];++l<=y;)p=c[l].split(de),b.push([new RegExp(p[1],"g"),p[2]]);l--}else if(h==="COMPOUNDRULE"){for(y=l+parseInt(p[1],10);++l<=y;)for(_=c[l].split(de)[1],P=-1,s.push(_);++P<_.length;)n[_.charAt(P)]=[];l--}else if(h==="PFX"||h==="SFX"){for(y=l+parseInt(p[3],10),_={type:h,combineable:p[2]==="Y",entries:[]},t[p[1]]=_;++l<=y;){p=c[l].split(de),v=p[2],u=p[3].split("/"),m=p[4],b={add:"",remove:"",match:"",continuation:Sn(r,u[1])},u&&u[0]!=="0"&&(b.add=u[0]);try{v!=="0"&&(b.remove=h==="SFX"?He(v):v),m&&m!=="."&&(b.match=h==="SFX"?He(m):Rn(m))}catch{b=null}b&&_.entries.push(b)}l--}else if(h==="TRY"){for(m=p[1],w=-1,R=[];++w<m.length;)E=m.charAt(w),E.toLowerCase()===E&&R.push(E);for(w=-1;++w<ge.length;)m.indexOf(ge[w])<0&&R.push(ge[w]);r[h]=R}else h==="KEY"?Cn.apply(r[h],p[1].split("|")):h==="COMPOUNDMIN"?r[h]=Number(p[1]):h==="ONLYINCOMPOUND"?(r[h]=p[1],n[p[1]]=[]):r[h]=p[1];return isNaN(r.COMPOUNDMIN)&&(r.COMPOUNDMIN=3),r.KEY.length||(r.KEY=Nn),r.TRY||(r.TRY=ge.concat()),r.KEEPCASE||(r.KEEPCASE=!1),{compoundRuleCodes:n,replacementTable:a,conversion:i,compoundRules:s,rules:t,flags:r};function S(x){x=x.trim(),x&&x.charCodeAt(0)!==35&&c.push(x)}}function He(e){return new RegExp(e+"$")}function Rn(e){return new RegExp("^"+e)}var Ct=In;function In(e,t){for(var n=-1;++n<t.length;)e=e.replace(t[n][0],t[n][1]);return e}var Se=Tn;function Tn(e,t,n){return n&&t in e&&n.indexOf(e[t])>-1}var Ln=Se,Dn=$n;function $n(e,t){var n=-1;if(e.data[t])return!Ln(e.flags,"ONLYINCOMPOUND",e.data[t]);if(t.length>=e.flags.COMPOUNDMIN){for(;++n<e.compoundRules.length;)if(e.compoundRules[n].test(t))return!0}return!1}var jn=Ct,Te=Dn,De=Se,Ue=Fn;function Fn(e,t,n){var r=t.trim(),a;if(!r)return null;if(r=jn(r,e.conversion.in),Te(e,r))return!n&&De(e.flags,"FORBIDDENWORD",e.data[r])?null:r;if(r.toUpperCase()===r){if(a=r.charAt(0)+r.slice(1).toLowerCase(),Qe(e.flags,e.data[a],n))return null;if(Te(e,a))return a}if(a=r.toLowerCase(),a!==r){if(Qe(e.flags,e.data[a],n))return null;if(Te(e,a))return a}return null}function Qe(e,t,n){return De(e,"KEEPCASE",t)||n||De(e,"FORBIDDENWORD",t)}var Bn=Ue,Mn=Wn;function Wn(e){return!!Bn(this,e)}var Kn=Un;function Un(e){var t=Xe(e.charAt(0)),n=e.slice(1);return!n||(n=Xe(n),t===n)?t:t==="u"&&n==="l"?"s":null}function Xe(e){return e===e.toLowerCase()?"l":e===e.toUpperCase()?"u":null}var be=Kn,Ze=Ct,qn=Se,Vn=Ue,zn=Yn,Gn=[].push;function Yn(e){var t=this,n={},r=[],a={},i,s,o=[],c,f,l,p,g,h,y,v,u,m,b,P,_,R,w,E,S,x,L,k,C,N,D;if(e=Ze(e.trim(),t.conversion.in),!e||t.correct(e))return[];for(D=be(e),f=-1;++f<t.replacementTable.length;)for(s=t.replacementTable[f],l=e.indexOf(s[0]);l>-1;)o.push(e.replace(s[0],s[1])),l=e.indexOf(s[0],l+1);for(f=-1;++f<e.length;)for(v=e.charAt(f),m=e.slice(0,f),b=e.slice(f+1),_=v.toLowerCase(),P=_!==v,n={},l=-1;++l<t.flags.KEY.length;)if(u=t.flags.KEY[l],p=u.indexOf(_),!(p<0)){for(h=-1;++h<u.length;)if(h!==p){if(y=u.charAt(h),n[y])continue;n[y]=!0,P&&(y=y.toUpperCase()),o.push(m+y+b)}}for(f=-1,S=e.charAt(0),c=[""],x=1,L=0;++f<e.length;){for(v=S,S=e.charAt(f+1),m=e.slice(0,f),s=v===S?"":v+v,l=-1,g=c.length;++l<g;)l<=x&&c.push(c[l]+s),c[l]+=v;++L<3&&(x=c.length)}for(Gn.apply(o,c),c=[e],s=e.toLowerCase(),(e===s||D===null)&&c.push(e.charAt(0).toUpperCase()+s.slice(1)),s=e.toUpperCase(),e!==s&&c.push(s),i={state:{},weighted:a,suggestions:r},R=Je(t,i,c,o),w=0,x=Math.min(R.length,Math.pow(Math.max(15-e.length,3),3)),k=Math.max(Math.pow(10-e.length,3),1);!r.length&&w<x;)E=w+k,Je(t,i,R.slice(w,E)),w=E;for(r.sort(K),c=[],C=[],f=-1;++f<r.length;)N=Ze(r[f],t.conversion.out),s=N.toLowerCase(),C.indexOf(s)<0&&(c.push(N),C.push(s));return c;function K(U,q){return z(U,q)||Re(U,q)||Ie(U,q)}function z(U,q){return a[U]===a[q]?0:a[U]>a[q]?-1:1}function Re(U,q){var qe=be(U),Ve=be(q);return qe===Ve?0:qe===D?-1:Ve===D?1:void 0}function Ie(U,q){return U.localeCompare(q)}}function Je(e,t,n,r){var a=e.flags.TRY,i=e.data,s=e.flags,o=[],c=-1,f,l,p,g,h,y,v,u,m,b,P,_,R;if(r)for(;++c<r.length;)w(r[c],!0);for(c=-1;++c<n.length;)for(f=n[c],l="",p="",g=f.charAt(0),h=f,y=f.slice(1),v=g.toLowerCase()!==g,u=be(f),m=-1;++m<=f.length;)for(l+=p,b=h,h=y,y=h.slice(1),p=g,g=f.charAt(m+1),P=v,g&&(v=g.toLowerCase()!==g),h&&P!==v&&(w(l+E(h)),w(l+E(g)+E(p)+y)),w(l+h),h&&w(l+g+p+y),R=-1;++R<a.length;)_=a[R],P&&_!==_.toUpperCase()?(u!=="s"&&(w(l+_+b),w(l+_+h)),_=_.toUpperCase(),w(l+_+b),w(l+_+h)):(w(l+_+b),w(l+_+h));return o;function w(S,x){var L=t.state[S],k;L!==!!L&&(o.push(S),k=Vn(e,S),L=k&&!qn(s,"NOSUGGEST",i[k]),t.state[S]=L,L&&(t.weighted[S]=x?10:0,t.suggestions.push(S))),L&&t.weighted[S]++}function E(S){var x=S.charAt(0);return(x.toLowerCase()===x?x.toUpperCase():x.toLowerCase())+S.slice(1)}}var Hn=Ue,et=Se,Qn=Xn;function Xn(e){var t=this,n=Hn(t,e,!0);return{correct:t.correct(e),forbidden:!!(n&&et(t.flags,"FORBIDDENWORD",t.data[n])),warn:!!(n&&et(t.flags,"WARN",t.data[n]))}}var Zn=Nt;function Nt(e,t,n,r){for(var a=-1,i,s,o,c,f;++a<t.entries.length;)if(i=t.entries[a],c=i.continuation,f=-1,(!i.match||i.match.test(e))&&(s=i.remove?e.replace(i.remove,""):e,s=t.type==="SFX"?s+i.add:i.add+s,r.push(s),c&&c.length))for(;++f<c.length;)o=n[c[f]],o&&Nt(s,o,n,r);return r}var tt=Zn,Et=tr,Jn=[].push,$e=[];function er(e,t,n){var r=e[t];t in e?r===$e?e[t]=n.concat():Jn.apply(r,n):e[t]=n.concat()}function tr(e,t,n,r){var a=-1,i,s,o,c,f,l,p;for((!("NEEDAFFIX"in r.flags)||n.indexOf(r.flags.NEEDAFFIX)<0)&&er(e,t,n);++a<n.length;)if(i=r.rules[n[a]],n[a]in r.compoundRuleCodes&&r.compoundRuleCodes[n[a]].push(t),i){for(l=tt(t,i,r.rules,[]),s=-1;++s<l.length;)if(l[s]in e||(e[l[s]]=$e),i.combineable){for(o=a;++o<n.length;)if(f=r.rules[n[o]],f&&f.combineable&&i.type!==f.type)for(p=tt(l[s],f,r.rules,[]),c=-1;++c<p.length;)p[c]in e||(e[p[c]]=$e)}}}var nr=Et,rr=ir,ar=[];function ir(e,t){var n=this;return nr(n.data,e,n.data[t]||ar,n),n}var sr=or;function or(e){var t=this;return delete t.data[e],t}var cr=lr;function lr(){return this.flags.WORDCHARS||null}var ur=xt,dr=Et,fr=pr,nt=/\s/g;function pr(e,t,n){for(var r=e.toString("utf8"),a=r.indexOf(`
`)+1,i=r.indexOf(`
`,a);i>-1;)r.charCodeAt(a)!==9&&rt(r.slice(a,i),t,n),a=i+1,i=r.indexOf(`
`,a);rt(r.slice(a),t,n)}function rt(e,t,n){for(var r=e.indexOf("/"),a=e.indexOf("#"),i="",s,o;r>-1&&e.charCodeAt(r-1)===92;)e=e.slice(0,r-1)+e.slice(r),r=e.indexOf("/",r);a>-1?r>-1&&r<a?(s=e.slice(0,r),nt.lastIndex=r+1,o=nt.exec(e),i=e.slice(r+1,o?o.index:void 0)):s=e.slice(0,a):r>-1?(s=e.slice(0,r),i=e.slice(r+1)):s=e,s=s.trim(),s&&dr(n,s,ur(t.flags,i.trim()),t)}var hr=fr,mr=vr;function vr(e){var t=this,n=-1,r,a,i,s;for(hr(e,t,t.data);++n<t.compoundRules.length;){for(r=t.compoundRules[n],a="",s=-1;++s<r.length;)i=r.charAt(s),a+=t.compoundRuleCodes[i].length?"(?:"+t.compoundRuleCodes[i].join("|")+")":i;t.compoundRules[n]=new RegExp(a,"i")}return t}var gr=yr;function yr(e){var t=this,n=e.toString("utf8").split(`
`),r=-1,a,i,s,o;for(t.flags.FORBIDDENWORD===void 0&&(t.flags.FORBIDDENWORD=!1),o=t.flags.FORBIDDENWORD;++r<n.length;)a=n[r].trim(),a&&(a=a.split("/"),s=a[0],i=s.charAt(0)==="*",i&&(s=s.slice(1)),t.add(s,a[1]),i&&t.data[s].push(o));return t}var at=An,br=xn,_r=ke,Y=ke.prototype;Y.correct=Mn;Y.suggest=zn;Y.spell=Qn;Y.add=rr;Y.remove=sr;Y.wordCharacters=cr;Y.dictionary=mr;Y.personal=gr;function ke(e,t){var n=-1,r;if(!(this instanceof ke))return new ke(e,t);if(typeof e=="string"||at(e)?(typeof t=="string"||at(t))&&(r=[{dic:t}]):e&&("length"in e?(r=e,e=e[0]&&e[0].aff):(e.dic&&(r=[e]),e=e.aff)),!e)throw new Error("Missing `aff` in dictionary");if(e=br(e),this.data=Object.create(null),this.compoundRuleCodes=e.compoundRuleCodes,this.replacementTable=e.replacementTable,this.conversion=e.conversion,this.compoundRules=e.compoundRules,this.rules=e.rules,this.flags=e.flags,r)for(;++n<r.length;)r[n].dic&&this.dictionary(r[n].dic)}const kr=Pe(_r),wr=({suggestions:e,handleSuggestionClick:t,handleIgnoreSuggestionClick:n})=>d("ul",{className:"spelling-suggestion-list",children:e.map(r=>A("li",{className:"spelling-suggestion-list__item",children:[r.suggestions.map(a=>d($,{className:"intake-item-edit__btn spelling-suggestion-list__btn",onClickFn:()=>t(r.original,a),children:d("span",{children:a})},a)),d($,{className:"intake-item-edit__btn spelling-suggestion-list__btn",onClickFn:()=>n(r.original),children:d("span",{children:"ignore"})})]},r.original))}),Ar="calorie";async function Or(e){const t=await Ft.post(`${Ar}/item`,e);return Bt(t)}const Pr={getCaloriesForItem:Or},it=({intakeItem:e,idx:t,handleChange:n})=>{const{isCurrValidIntake:r}=te(),[a,i]=T.useState(!1),[s,o]=T.useState(!1),[c,f]=T.useState(""),[l,p]=T.useState("idle"),[g,h]=T.useState([]),[y,v]=T.useState(null),u=T.useRef(null),m=g.length>0&&g[0].suggestions.length>0&&!a&&y;function b(k){k.preventDefault();const{value:C,name:N}=k.target;switch(N){case"name":if(n({...e,name:C},t),i(!C.length),C.length||h([]),!u.current)return;u.current(C);break;case"quantity":n({...e,quantity:Number(C)},t);break;case"calories":{const D={...e,calories:Number(C)};delete D.caloriesPer100g,n(D,t),f("caloriesPer100g");break}case"caloriesPer100g":{const K=Number(C)*(e.quantity/100);n({...e,caloriesPer100g:Number(C),calories:K},t),f("calories");break}}}function P(){const k=V.getQuantityStepPerUnit(e.unit);e.quantity-k<1||n({...e,quantity:e.quantity-k},t)}function _(){const k=V.getQuantityStepPerUnit(e.unit);n({...e,quantity:e.quantity+k},t)}function R(k){k.preventDefault();const C=V.units.indexOf(e.unit),N=C===V.units.length-1?V.units[0]:V.units[C+1],D=V.getUnitDefaultQuantity(N);n({...e,unit:N,quantity:D},t)}function w(){const k={...e};s&&(delete k.calories,delete k.caloriesPer100g,f("")),o(C=>!C),n(k,t)}async function E(){if(e.name.length)try{p("pending");const k=await Pr.getCaloriesForItem(e);p("resolved"),n({...e,calories:k},t),o(!0)}catch(k){console.error(k),p("error")}}function S(){const{name:k,unit:C,quantity:N}=e;k==="water"&&C===me.MILLILITER&&N===750||n({...e,name:"water",unit:me.MILLILITER,quantity:750},t)}function x(k,C){const N=e.name.replace(k,C),D=g.filter(K=>K.original!==k);h(D),n({...e,name:N},t)}function L(k){const C=g.filter(N=>N.original!==k);h(C)}return T.useEffect(()=>{Promise.all([fetch("/assets/dictionaries/en_US.aff").then(k=>k.text()),fetch("/assets/dictionaries/en_US.dic").then(k=>k.text())]).then(([k,C])=>{const N=new kr(k,C);v(N)}).catch(k=>{console.error("Failed to load dictionaries:",k)})},[]),T.useEffect(()=>{function k(C){if(!y)return;const N=new Set(["nes"]),K=C.split(" ").filter(z=>!N.has(z)).map(z=>({original:z,suggestions:y.suggest(z)}));h(K)}u.current=Mt(k,1e3).debouncedFunc},[y]),T.useEffect(()=>{l==="error"&&setTimeout(()=>p("idle"),3e3)},[l]),A("section",{className:"intake-item-edit",children:[d("input",{type:"text",name:"name",className:"intake-item-input",value:e.name,onChange:b,spellCheck:!0,autoComplete:"off",placeholder:"Enter food name"}),m&&d(wr,{suggestions:g,handleSuggestionClick:x,handleIgnoreSuggestionClick:L}),(a||!r)&&d("div",{onClick:()=>i(!1),children:d(Le,{msg:"intake name cannot be empty!"})}),A("div",{className:"intake-item-edit-inputs-container",children:[A("div",{className:"quantity-input-container",children:[d($,{onClickFn:P,children:d(bn,{})}),d("input",{type:"number",name:"quantity",className:"intake-item-input quantity-input",value:e.quantity,onChange:b}),d($,{onClickFn:_,children:d(_n,{})})]}),d($,{onClickFn:R,className:"intake-item-edit__btn",children:d("span",{children:e.unit})}),d($,{onClickFn:S,className:"intake-item-edit__btn"+(e.name==="water"?" active":""),children:d("span",{children:"water"})}),d($,{onClickFn:w,className:"intake-item-edit__btn",children:d("span",{children:s?"Manual":"Auto"})}),d($,{onClickFn:E,className:"intake-item-edit__btn calc-calories-btn",children:l==="pending"?d(ee,{withContainer:!0,containerSize:{width:"100%"}}):d("span",{children:"calc"})})]}),s&&A("div",{className:"intake-item-edit__manuall-calorie-edit",children:[d("input",{type:"number",name:"calories",className:"intake-item-input"+(c==="calories"?" faded":""),value:e.calories||"",placeholder:"Calories",onChange:b,onClick:()=>f("")}),d("input",{type:"number",name:"caloriesPer100g",className:"intake-item-input"+(c==="caloriesPer100g"?" faded":""),value:e.caloriesPer100g||"",placeholder:"Calories per 100g",onChange:b,onClick:()=>f("")})]}),l==="error"&&d(Le,{msg:"Failed to calculate calories!"})]})};const Sr=()=>{const{dailyData:e,isLoading:t,isLoadingUpdate:n,intake:r,updateDailyData:a,setIntake:i,backgroundColor:s,setCurrIsValidIntake:o}=te(),[c,f]=T.useState(!1),l=!c&&!t&&!n;function p(){i(u=>({...u,items:[...u.items,V.getDefaultIntakeItem()]}))}function g(u){r.items.length!==1&&i(m=>({...m,items:m.items.filter((b,P)=>P!==u)}))}function h(){i(u=>({...u,recordedAt:u.recordedAt?null:new Date,isRecorded:!u.isRecorded}))}function y(u,m){i(b=>({...b,items:b.items.map((P,_)=>_===m?u:P)}))}function v(u){if(u.preventDefault(),!e)return;if(!r.items.every(_=>_.name.length&&_.quantity>0))return o(!1);r.recordedAt=new Date;const P=!e.intakes.some(_=>_.id===r.id)?[...e.intakes,r]:e.intakes.map(_=>_.id===r.id?r:_);a({...e,intakes:P}),i(V.getDefaultIntake())}return A("form",{className:"intake-edit",onSubmit:v,children:[l&&d(he,{children:d("div",{className:"intake-edit__list-container",children:d(_e,{items:r.items,render:(u,m,b)=>m===b.length-1?A("div",{className:"last-intake-edit-item-container",children:[d(it,{intakeItem:u,idx:m,handleChange:y}),A("div",{className:"last-intake-edit-item__btn-container",children:[b.length>1&&d($,{onClickFn:()=>g(m),children:"remove item"}),d($,{onClickFn:p,children:"add item"})]})]},m):d(it,{intakeItem:u,idx:m,handleChange:y},m)})})}),(t||n)&&d(ee,{withContainer:!0,containerSize:{height:"75px",width:"100%"}}),c&&d(he,{children:d(_e,{items:r.items,render:(u,m)=>A("p",{className:"intake-edit-review-list__item",children:[d("span",{children:`${m+1})`}),d("p",{children:`${u.name} - ${u.quantity} ${u.unit} ${u.calories?`- Calories ${u.calories}`:""}`})]}),className:"intake-edit-review-list"})}),A("div",{className:"intake-edit-btns-container",style:{backgroundColor:s},children:[d($,{onClickFn:h,className:"intake-edit-btn btn-toggle-save-later"+(r.isRecorded?"":" clicked"),children:"Save Later"}),d($,{onClickFn:()=>f(u=>!u),className:"intake-edit-btn",children:c?"Edit":"Review"}),d($,{onClickFn:u=>v(u),className:"intake-edit-btn",type:"submit",children:"Add Intake"})]})]})};const xr=()=>{const{dailyData:e,setOpenedElement:t}=te();if(!e)return null;const n=[{name:"add",value:F.IntakeEdit},{name:"intakes",value:F.IntakeList},{name:"unrecorded",value:F.UnRecordedIntakeList},{name:"weight",value:F.WeightWaistInput},{name:"workouts",value:F.Workouts,isShown:(e==null?void 0:e.workouts.length)>0}];return d("ul",{className:"filter",children:n.map(r=>r.isShown===!1?null:d("li",{className:"filter__item",children:d($,{className:"btn",onClickFn:()=>t(r.value),children:r.name})},r.value))})};var Cr=["points","className","baseLinePoints","connectNulls"];function se(){return se=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},se.apply(this,arguments)}function Nr(e,t){if(e==null)return{};var n=Er(e,t),r,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)r=i[a],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function Er(e,t){if(e==null)return{};var n={},r=Object.keys(e),a,i;for(i=0;i<r.length;i++)a=r[i],!(t.indexOf(a)>=0)&&(n[a]=e[a]);return n}function st(e){return Lr(e)||Tr(e)||Ir(e)||Rr()}function Rr(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Ir(e,t){if(e){if(typeof e=="string")return je(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return je(e,t)}}function Tr(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function Lr(e){if(Array.isArray(e))return je(e)}function je(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var ot=function(t){return t&&t.x===+t.x&&t.y===+t.y},Dr=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],n=[[]];return t.forEach(function(r){ot(r)?n[n.length-1].push(r):n[n.length-1].length>0&&n.push([])}),ot(t[0])&&n[n.length-1].push(t[0]),n[n.length-1].length<=0&&(n=n.slice(0,-1)),n},fe=function(t,n){var r=Dr(t);n&&(r=[r.reduce(function(i,s){return[].concat(st(i),st(s))},[])]);var a=r.map(function(i){return i.reduce(function(s,o,c){return"".concat(s).concat(c===0?"M":"L").concat(o.x,",").concat(o.y)},"")}).join("");return r.length===1?"".concat(a,"Z"):a},$r=function(t,n,r){var a=fe(t,r);return"".concat(a.slice(-1)==="Z"?a.slice(0,-1):a,"L").concat(fe(n.reverse(),r).slice(1))},jr=function(t){var n=t.points,r=t.className,a=t.baseLinePoints,i=t.connectNulls,s=Nr(t,Cr);if(!n||!n.length)return null;var o=Ot("recharts-polygon",r);if(a&&a.length){var c=s.stroke&&s.stroke!=="none",f=$r(n,a,i);return O.createElement("g",{className:o},O.createElement("path",se({},j(s,!0),{fill:f.slice(-1)==="Z"?s.fill:"none",stroke:"none",d:f})),c?O.createElement("path",se({},j(s,!0),{fill:"none",d:fe(n,i)})):null,c?O.createElement("path",se({},j(s,!0),{fill:"none",d:fe(a,i)})):null)}var l=fe(n,i);return O.createElement("path",se({},j(s,!0),{fill:l.slice(-1)==="Z"?s.fill:"none",className:o,d:l}))},Fr=_t,Br=kt,Mr=Gt;function Wr(e,t){return e&&e.length?Fr(e,Br(t),Mr):void 0}var Kr=Wr;const Ur=Pe(Kr);var qr=_t,Vr=Yt,zr=kt;function Gr(e,t){return e&&e.length?qr(e,zr(t),Vr):void 0}var Yr=Gr;const Hr=Pe(Yr);var Qr=["cx","cy","angle","ticks","axisLine"],Xr=["ticks","tick","angle","tickFormatter","stroke"];function ce(e){"@babel/helpers - typeof";return ce=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ce(e)}function pe(){return pe=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},pe.apply(this,arguments)}function ct(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function H(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?ct(Object(n),!0).forEach(function(r){xe(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ct(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function lt(e,t){if(e==null)return{};var n=Zr(e,t),r,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)r=i[a],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function Zr(e,t){if(e==null)return{};var n={},r=Object.keys(e),a,i;for(i=0;i<r.length;i++)a=r[i],!(t.indexOf(a)>=0)&&(n[a]=e[a]);return n}function Jr(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ut(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Rt(r.key),r)}}function ea(e,t,n){return t&&ut(e.prototype,t),n&&ut(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function ta(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Fe(e,t)}function Fe(e,t){return Fe=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,a){return r.__proto__=a,r},Fe(e,t)}function na(e){var t=ia();return function(){var r=we(e),a;if(t){var i=we(this).constructor;a=Reflect.construct(r,arguments,i)}else a=r.apply(this,arguments);return ra(this,a)}}function ra(e,t){if(t&&(ce(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return aa(e)}function aa(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ia(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function we(e){return we=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},we(e)}function xe(e,t,n){return t=Rt(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Rt(e){var t=sa(e,"string");return ce(t)==="symbol"?t:String(t)}function sa(e,t){if(ce(e)!=="object"||e===null)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(ce(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Ce=function(e){ta(n,e);var t=na(n);function n(){return Jr(this,n),t.apply(this,arguments)}return ea(n,[{key:"getTickValueCoord",value:function(a){var i=a.coordinate,s=this.props,o=s.angle,c=s.cx,f=s.cy;return G(c,f,i,o)}},{key:"getTickTextAnchor",value:function(){var a=this.props.orientation,i;switch(a){case"left":i="end";break;case"right":i="start";break;default:i="middle";break}return i}},{key:"getViewBox",value:function(){var a=this.props,i=a.cx,s=a.cy,o=a.angle,c=a.ticks,f=Hr(c,function(p){return p.coordinate||0}),l=Ur(c,function(p){return p.coordinate||0});return{cx:i,cy:s,startAngle:o,endAngle:o,innerRadius:l.coordinate||0,outerRadius:f.coordinate||0}}},{key:"renderAxisLine",value:function(){var a=this.props,i=a.cx,s=a.cy,o=a.angle,c=a.ticks,f=a.axisLine,l=lt(a,Qr),p=c.reduce(function(v,u){return[Math.min(v[0],u.coordinate),Math.max(v[1],u.coordinate)]},[1/0,-1/0]),g=G(i,s,p[0],o),h=G(i,s,p[1],o),y=H(H(H({},j(l)),{},{fill:"none"},j(f)),{},{x1:g.x,y1:g.y,x2:h.x,y2:h.y});return O.createElement("line",pe({className:"recharts-polar-radius-axis-line"},y))}},{key:"renderTicks",value:function(){var a=this,i=this.props,s=i.ticks,o=i.tick,c=i.angle,f=i.tickFormatter,l=i.stroke,p=lt(i,Xr),g=this.getTickTextAnchor(),h=j(p),y=j(o),v=s.map(function(u,m){var b=a.getTickValueCoord(u),P=H(H(H(H({textAnchor:g,transform:"rotate(".concat(90-c,", ").concat(b.x,", ").concat(b.y,")")},h),{},{stroke:"none",fill:l},y),{},{index:m},b),{},{payload:u});return O.createElement(M,pe({className:"recharts-polar-radius-axis-tick",key:"tick-".concat(m)},Ke(a.props,u,m)),n.renderTickItem(o,P,f?f(u.value,m):u.value))});return O.createElement(M,{className:"recharts-polar-radius-axis-ticks"},v)}},{key:"render",value:function(){var a=this.props,i=a.ticks,s=a.axisLine,o=a.tick;return!i||!i.length?null:O.createElement(M,{className:"recharts-polar-radius-axis"},s&&this.renderAxisLine(),o&&this.renderTicks(),wt.renderCallByParent(this.props,this.getViewBox()))}}],[{key:"renderTickItem",value:function(a,i,s){var o;return O.isValidElement(a)?o=O.cloneElement(a,i):X(a)?o=a(i):o=O.createElement(We,pe({},i,{className:"recharts-polar-radius-axis-tick-value"}),s),o}}]),n}(T.PureComponent);xe(Ce,"displayName","PolarRadiusAxis");xe(Ce,"axisType","radiusAxis");xe(Ce,"defaultProps",{type:"number",radiusAxisId:0,cx:0,cy:0,angle:0,orientation:"right",stroke:"#ccc",axisLine:!0,tick:!0,tickCount:5,allowDataOverflow:!1,scale:"auto",allowDuplicatedCategory:!0});function le(e){"@babel/helpers - typeof";return le=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},le(e)}function Z(){return Z=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Z.apply(this,arguments)}function dt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function Q(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?dt(Object(n),!0).forEach(function(r){Ne(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):dt(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function oa(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ft(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,It(r.key),r)}}function ca(e,t,n){return t&&ft(e.prototype,t),n&&ft(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function la(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Be(e,t)}function Be(e,t){return Be=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,a){return r.__proto__=a,r},Be(e,t)}function ua(e){var t=pa();return function(){var r=Ae(e),a;if(t){var i=Ae(this).constructor;a=Reflect.construct(r,arguments,i)}else a=r.apply(this,arguments);return da(this,a)}}function da(e,t){if(t&&(le(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return fa(e)}function fa(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function pa(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Ae(e){return Ae=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Ae(e)}function Ne(e,t,n){return t=It(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function It(e){var t=ha(e,"string");return le(t)==="symbol"?t:String(t)}function ha(e,t){if(le(e)!=="object"||e===null)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(le(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var ma=Math.PI/180,pt=1e-5,Ee=function(e){la(n,e);var t=ua(n);function n(){return oa(this,n),t.apply(this,arguments)}return ca(n,[{key:"getTickLineCoord",value:function(a){var i=this.props,s=i.cx,o=i.cy,c=i.radius,f=i.orientation,l=i.tickSize,p=l||8,g=G(s,o,c,a.coordinate),h=G(s,o,c+(f==="inner"?-1:1)*p,a.coordinate);return{x1:g.x,y1:g.y,x2:h.x,y2:h.y}}},{key:"getTickTextAnchor",value:function(a){var i=this.props.orientation,s=Math.cos(-a.coordinate*ma),o;return s>pt?o=i==="outer"?"start":"end":s<-pt?o=i==="outer"?"end":"start":o="middle",o}},{key:"renderAxisLine",value:function(){var a=this.props,i=a.cx,s=a.cy,o=a.radius,c=a.axisLine,f=a.axisLineType,l=Q(Q({},j(this.props)),{},{fill:"none"},j(c));if(f==="circle")return O.createElement(Ht,Z({className:"recharts-polar-angle-axis-line"},l,{cx:i,cy:s,r:o}));var p=this.props.ticks,g=p.map(function(h){return G(i,s,o,h.coordinate)});return O.createElement(jr,Z({className:"recharts-polar-angle-axis-line"},l,{points:g}))}},{key:"renderTicks",value:function(){var a=this,i=this.props,s=i.ticks,o=i.tick,c=i.tickLine,f=i.tickFormatter,l=i.stroke,p=j(this.props),g=j(o),h=Q(Q({},p),{},{fill:"none"},j(c)),y=s.map(function(v,u){var m=a.getTickLineCoord(v),b=a.getTickTextAnchor(v),P=Q(Q(Q({textAnchor:b},p),{},{stroke:"none",fill:l},g),{},{index:u,payload:v,x:m.x2,y:m.y2});return O.createElement(M,Z({className:"recharts-polar-angle-axis-tick",key:"tick-".concat(u)},Ke(a.props,v,u)),c&&O.createElement("line",Z({className:"recharts-polar-angle-axis-tick-line"},h,m)),o&&n.renderTickItem(o,P,f?f(v.value,u):v.value))});return O.createElement(M,{className:"recharts-polar-angle-axis-ticks"},y)}},{key:"render",value:function(){var a=this.props,i=a.ticks,s=a.radius,o=a.axisLine;return s<=0||!i||!i.length?null:O.createElement(M,{className:"recharts-polar-angle-axis"},o&&this.renderAxisLine(),this.renderTicks())}}],[{key:"renderTickItem",value:function(a,i,s){var o;return O.isValidElement(a)?o=O.cloneElement(a,i):X(a)?o=a(i):o=O.createElement(We,Z({},i,{className:"recharts-polar-angle-axis-tick-value"}),s),o}}]),n}(T.PureComponent);Ne(Ee,"displayName","PolarAngleAxis");Ne(Ee,"axisType","angleAxis");Ne(Ee,"defaultProps",{type:"category",angleAxisId:0,scale:"auto",cx:0,cy:0,orientation:"outer",axisLine:!0,tickLine:!0,tickSize:8,tick:!0,hide:!1,allowDuplicatedCategory:!0});var va=Qt,ga=va(Object.getPrototypeOf,Object),ya=ga,ba=Xt,_a=ya,ka=Zt,wa="[object Object]",Aa=Function.prototype,Oa=Object.prototype,Tt=Aa.toString,Pa=Oa.hasOwnProperty,Sa=Tt.call(Object);function xa(e){if(!ka(e)||ba(e)!=wa)return!1;var t=_a(e);if(t===null)return!0;var n=Pa.call(t,"constructor")&&t.constructor;return typeof n=="function"&&n instanceof n&&Tt.call(n)==Sa}var Ca=xa;const Na=Pe(Ca);function ue(e){"@babel/helpers - typeof";return ue=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ue(e)}function J(){return J=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},J.apply(this,arguments)}function ht(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function I(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?ht(Object(n),!0).forEach(function(r){B(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ht(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Ea(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function mt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Lt(r.key),r)}}function Ra(e,t,n){return t&&mt(e.prototype,t),n&&mt(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function Ia(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Me(e,t)}function Me(e,t){return Me=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,a){return r.__proto__=a,r},Me(e,t)}function Ta(e){var t=Da();return function(){var r=Oe(e),a;if(t){var i=Oe(this).constructor;a=Reflect.construct(r,arguments,i)}else a=r.apply(this,arguments);return La(this,a)}}function La(e,t){if(t&&(ue(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return re(e)}function re(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Da(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Oe(e){return Oe=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Oe(e)}function B(e,t,n){return t=Lt(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Lt(e){var t=$a(e,"string");return ue(t)==="symbol"?t:String(t)}function $a(e,t){if(ue(e)!=="object"||e===null)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(ue(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var W=function(e){Ia(n,e);var t=Ta(n);function n(r){var a;return Ea(this,n),a=t.call(this,r),B(re(a),"pieRef",null),B(re(a),"sectorRefs",[]),B(re(a),"id",en("recharts-pie-")),B(re(a),"handleAnimationEnd",function(){var i=a.props.onAnimationEnd;a.setState({isAnimationFinished:!0}),X(i)&&i()}),B(re(a),"handleAnimationStart",function(){var i=a.props.onAnimationStart;a.setState({isAnimationFinished:!1}),X(i)&&i()}),a.state={isAnimationFinished:!r.isAnimationActive,prevIsAnimationActive:r.isAnimationActive,prevAnimationId:r.animationId,sectorToFocus:0},a}return Ra(n,[{key:"isActiveIndex",value:function(a){var i=this.props.activeIndex;return Array.isArray(i)?i.indexOf(a)!==-1:a===i}},{key:"hasActiveIndex",value:function(){var a=this.props.activeIndex;return Array.isArray(a)?a.length!==0:a||a===0}},{key:"renderLabels",value:function(a){var i=this.props.isAnimationActive;if(i&&!this.state.isAnimationFinished)return null;var s=this.props,o=s.label,c=s.labelLine,f=s.dataKey,l=s.valueKey,p=j(this.props),g=j(o),h=j(c),y=o&&o.offsetRadius||20,v=a.map(function(u,m){var b=(u.startAngle+u.endAngle)/2,P=G(u.cx,u.cy,u.outerRadius+y,b),_=I(I(I(I({},p),u),{},{stroke:"none"},g),{},{index:m,textAnchor:n.getTextAnchor(P.x,u.cx)},P),R=I(I(I(I({},p),u),{},{fill:"none",stroke:u.fill},h),{},{index:m,points:[G(u.cx,u.cy,u.outerRadius,b),P],key:"line"}),w=f;return oe(f)&&oe(l)?w="value":oe(f)&&(w=l),O.createElement(M,{key:"label-".concat(m)},c&&n.renderLabelLineItem(c,R),n.renderLabelItem(o,_,ne(u,w)))});return O.createElement(M,{className:"recharts-pie-labels"},v)}},{key:"renderSectorsStatically",value:function(a){var i=this,s=this.props,o=s.activeShape,c=s.blendStroke,f=s.inactiveShape;return a.map(function(l,p){var g=f&&i.hasActiveIndex()?f:null,h=i.isActiveIndex(p)?o:g,y=I(I({},l),{},{stroke:c?l.fill:l.stroke});return O.createElement(M,J({ref:function(u){u&&!i.sectorRefs.includes(u)&&i.sectorRefs.push(u)},tabIndex:-1,className:"recharts-pie-sector"},Ke(i.props,l,p),{key:"sector-".concat(p)}),n.renderSectorItem(h,y))})}},{key:"renderSectorsWithAnimation",value:function(){var a=this,i=this.props,s=i.sectors,o=i.isAnimationActive,c=i.animationBegin,f=i.animationDuration,l=i.animationEasing,p=i.animationId,g=this.state,h=g.prevSectors,y=g.prevIsAnimationActive;return O.createElement(nn,{begin:c,duration:f,isActive:o,easing:l,from:{t:0},to:{t:1},key:"pie-".concat(p,"-").concat(y),onAnimationStart:this.handleAnimationStart,onAnimationEnd:this.handleAnimationEnd},function(v){var u=v.t,m=[],b=s&&s[0],P=b.startAngle;return s.forEach(function(_,R){var w=h&&h[R],E=R>0?rn(_,"paddingAngle",0):0;if(w){var S=Ge(w.endAngle-w.startAngle,_.endAngle-_.startAngle),x=I(I({},_),{},{startAngle:P+E,endAngle:P+S(u)+E});m.push(x),P=x.endAngle}else{var L=_.endAngle,k=_.startAngle,C=Ge(0,L-k),N=C(u),D=I(I({},_),{},{startAngle:P+E,endAngle:P+N+E});m.push(D),P=D.endAngle}}),O.createElement(M,null,a.renderSectorsStatically(m))})}},{key:"attachKeyboardHandlers",value:function(a){var i=this;a.onkeydown=function(s){if(!s.altKey)switch(s.key){case"ArrowLeft":{var o=++i.state.sectorToFocus%i.sectorRefs.length;i.sectorRefs[o].focus(),i.setState({sectorToFocus:o});break}case"ArrowRight":{var c=--i.state.sectorToFocus<0?i.sectorRefs.length-1:i.state.sectorToFocus%i.sectorRefs.length;i.sectorRefs[c].focus(),i.setState({sectorToFocus:c});break}case"Escape":{i.sectorRefs[i.state.sectorToFocus].blur(),i.setState({sectorToFocus:0});break}}}}},{key:"renderSectors",value:function(){var a=this.props,i=a.sectors,s=a.isAnimationActive,o=this.state.prevSectors;return s&&i&&i.length&&(!o||!an(o,i))?this.renderSectorsWithAnimation():this.renderSectorsStatically(i)}},{key:"componentDidMount",value:function(){this.pieRef&&this.attachKeyboardHandlers(this.pieRef)}},{key:"render",value:function(){var a=this,i=this.props,s=i.hide,o=i.sectors,c=i.className,f=i.label,l=i.cx,p=i.cy,g=i.innerRadius,h=i.outerRadius,y=i.isAnimationActive,v=this.state.isAnimationFinished;if(s||!o||!o.length||!ie(l)||!ie(p)||!ie(g)||!ie(h))return null;var u=Ot("recharts-pie",c);return O.createElement(M,{tabIndex:this.props.rootTabIndex,className:u,ref:function(b){a.pieRef=b}},this.renderSectors(),f&&this.renderLabels(o),wt.renderCallByParent(this.props,null,!1),(!y||v)&&sn.renderCallByParent(this.props,o,!1))}}],[{key:"getDerivedStateFromProps",value:function(a,i){return i.prevIsAnimationActive!==a.isAnimationActive?{prevIsAnimationActive:a.isAnimationActive,prevAnimationId:a.animationId,curSectors:a.sectors,prevSectors:[],isAnimationFinished:!0}:a.isAnimationActive&&a.animationId!==i.prevAnimationId?{prevAnimationId:a.animationId,curSectors:a.sectors,prevSectors:i.curSectors,isAnimationFinished:!0}:a.sectors!==i.curSectors?{curSectors:a.sectors,isAnimationFinished:!0}:null}},{key:"getTextAnchor",value:function(a,i){return a>i?"start":a<i?"end":"middle"}},{key:"renderLabelLineItem",value:function(a,i){return O.isValidElement(a)?O.cloneElement(a,i):X(a)?a(i):O.createElement(tn,J({},i,{type:"linear",className:"recharts-pie-label-line"}))}},{key:"renderLabelItem",value:function(a,i,s){if(O.isValidElement(a))return O.cloneElement(a,i);var o=s;return X(a)&&(o=a(i),O.isValidElement(o))?o:O.createElement(We,J({},i,{alignmentBaseline:"middle",className:"recharts-pie-label-text"}),o)}},{key:"renderSectorItem",value:function(a,i){return O.isValidElement(a)?O.cloneElement(a,i):X(a)?a(i):Na(a)?O.createElement(ze,J({tabIndex:-1},i,a)):O.createElement(ze,J({tabIndex:-1},i))}}]),n}(T.PureComponent);B(W,"displayName","Pie");B(W,"defaultProps",{stroke:"#fff",fill:"#808080",legendType:"rect",cx:"50%",cy:"50%",startAngle:0,endAngle:360,innerRadius:0,outerRadius:"80%",paddingAngle:0,labelLine:!0,hide:!1,minAngle:0,isAnimationActive:!Jt.isSsr,animationBegin:400,animationDuration:1500,animationEasing:"ease",nameKey:"name",blendStroke:!1,rootTabIndex:0});B(W,"parseDeltaAngle",function(e,t){var n=ye(t-e),r=Math.min(Math.abs(t-e),360);return n*r});B(W,"getRealPieData",function(e){var t=e.props,n=t.data,r=t.children,a=j(e.props),i=on(r,At);return n&&n.length?n.map(function(s,o){return I(I(I({payload:s},a),s),i&&i[o]&&i[o].props)}):i&&i.length?i.map(function(s){return I(I({},a),s.props)}):[]});B(W,"parseCoordinateOfPie",function(e,t){var n=t.top,r=t.left,a=t.width,i=t.height,s=cn(a,i),o=r+ve(e.props.cx,a,a/2),c=n+ve(e.props.cy,i,i/2),f=ve(e.props.innerRadius,s,0),l=ve(e.props.outerRadius,s,s*.8),p=e.props.maxRadius||Math.sqrt(a*a+i*i)/2;return{cx:o,cy:c,innerRadius:f,outerRadius:l,maxRadius:p}});B(W,"getComposedData",function(e){var t=e.item,n=e.offset,r=W.getRealPieData(t);if(!r||!r.length)return null;var a=t.props,i=a.cornerRadius,s=a.startAngle,o=a.endAngle,c=a.paddingAngle,f=a.dataKey,l=a.nameKey,p=a.valueKey,g=a.tooltipType,h=Math.abs(t.props.minAngle),y=W.parseCoordinateOfPie(t,n),v=W.parseDeltaAngle(s,o),u=Math.abs(v),m=f;oe(f)&&oe(p)?(Ye(!1,`Use "dataKey" to specify the value of pie,
      the props "valueKey" will be deprecated in 1.1.0`),m="value"):oe(f)&&(Ye(!1,`Use "dataKey" to specify the value of pie,
      the props "valueKey" will be deprecated in 1.1.0`),m=p);var b=r.filter(function(S){return ne(S,m,0)!==0}).length,P=(u>=360?b:b-1)*c,_=u-b*h-P,R=r.reduce(function(S,x){var L=ne(x,m,0);return S+(ie(L)?L:0)},0),w;if(R>0){var E;w=r.map(function(S,x){var L=ne(S,m,0),k=ne(S,l,x),C=(ie(L)?L:0)/R,N;x?N=E.endAngle+ye(v)*c*(L!==0?1:0):N=s;var D=N+ye(v)*((L!==0?h:0)+C*_),K=(N+D)/2,z=(y.innerRadius+y.outerRadius)/2,Re=[{name:k,value:L,payload:S,dataKey:m,type:g}],Ie=G(y.cx,y.cy,z,K);return E=I(I(I({percent:C,cornerRadius:i,name:k,tooltipPayload:Re,midAngle:K,middleRadius:z,tooltipPosition:Ie},S),y),{},{value:ne(S,m),startAngle:N,endAngle:D,payload:S,paddingAngle:ye(v)*c}),E})}return I(I({},y),{},{sectors:w,data:r})});var ja=ln({chartName:"PieChart",GraphicalChild:W,validateTooltipEventTypes:["item"],defaultTooltipEventType:"item",legendContent:"children",axisComponents:[{axisType:"angleAxis",AxisComp:Ee},{axisType:"radiusAxis",AxisComp:Ce}],formatAxisMap:un,defaultProps:{layout:"centric",startAngle:0,endAngle:360,cx:"50%",cy:"50%",innerRadius:0,outerRadius:"80%"}});const Fa=({intakes:e,remainingCalories:t})=>{const n=[...e.map(a=>({name:a.items.reduce((i,s,o,c)=>o===0?i+`${s.name}, `:o===c.length-1?i+`and ${s.name}`:i+` ${s.name}, `,""),value:a.items.reduce((i,s)=>i+s.calories,0)})),{name:"remaining",value:t}],r=["#0088FE","#00C49F","#FFBB28","#FF8042","#FF5733","#33FF57","#8333FF","#FF33A1","#33A4FF","#FF8333","#33FFA1","#A133FF"];return A(ja,{width:250,height:250,children:[d(W,{dataKey:"value",isAnimationActive:!1,data:n,cx:125,cy:125,innerRadius:80,outerRadius:110,children:n.map((a,i)=>{const s=a.name==="remaining"?"#a7a7a7":r[i%r.length];return d(At,{fill:s},`cell-${i}`)})}),d(dn,{})]})},Ba=()=>{const{dailyData:e,recordedIntakes:t,calConsumedPct:n,calRemainingPct:r,remainingCalories:a,consumedCalories:i,estimatedKGChange:s}=te();if(!e)return null;const{date:o}=e,c=new Intl.DateTimeFormat("en-GB",{weekday:"long",month:"numeric",day:"numeric",year:"numeric"}).format(new Date(o)),f=a>0?"remaining":"over your limit";return A("header",{className:"today-details__header",children:[d("div",{className:"today-details__header__date-container",children:d("h2",{className:"today-details__header__date",children:c})}),d(Fa,{intakes:t,remainingCalories:a}),A("div",{className:"today-details__header__titles",children:[A("p",{className:"today-details__header__titles__title",children:[A("strong",{children:[a," "]}),"calories ",f]}),i>0&&A("p",{className:"today-details__header__titles__title",children:[d("strong",{children:Math.round(i)})," calories consumed"]}),A("div",{className:"today-details__header__percentages-container",children:[A("div",{className:"today-details__header__percentage",children:[d("p",{className:"today-details__header__percentage__title",children:"consumed:"}),A("p",{className:"today-details__header__percentage__value",children:[n,"%"]})]}),A("div",{className:"today-details__header__percentage",children:[d("p",{className:"today-details__header__percentage__title",children:"remaining:"}),A("p",{className:"today-details__header__percentage__value",children:[r,"%"]})]})]}),s>0?A("p",{className:"today-details__header__titles__title",children:["estimated to gain ",A("strong",{children:[s,"kg"]})]}):A("p",{className:"today-details__header__titles__title",children:["estimated to lose ",d("strong",{children:Math.abs(s)})," kg"]})]})]})};const Ma=({intake:e})=>d("ol",{className:"intake-preview",children:e.items.map(t=>d("li",{className:"intake-item-preview-container",children:d("section",{className:"intake-item-preview",children:d("p",{className:"intake-item-preview__details",children:`${t.name} - ${t.quantity} ${t.unit} - caolries: ${Math.round(t.calories)}`})})},t.id))}),Wa=()=>{const{dailyData:e,unrecordedIntakes:t,recordedIntakes:n,openedElement:r,setOpenedElement:a,setIntake:i,updateDailyData:s,isLoadingUpdate:o}=te();if(!e)return null;const c=r===F.IntakeList,l=(c?n:t).sort((v,u)=>!v.recordedAt||!u.recordedAt?0:new Date(v.recordedAt).getTime()-new Date(u.recordedAt).getTime()),p=ae.getTotalCaloriesFromDailyData({dailyData:e,isRecorded:c});function g(v){if(!e)return;const u={...e};u.intakes=e.intakes.map(m=>(m.id===v&&(m.isRecorded=!0,m.recordedAt=new Date),m)),s(u)}function h(v){if(!e)return;const u={...v};i(u),a(F.IntakeEdit)}function y(v){if(!e)return;const u={...e};u.intakes=e.intakes.filter(m=>m.id!==v),s(u)}return A(he,{children:[o&&d(ee,{}),A("header",{className:"intake-list__header",children:[A("h3",{className:"intake-list__title",children:[c?"Recorded":"Unrecorded"," Intakes"]}),A("h4",{className:"intake-list__total-calories",children:["total calories: ",p]})]}),d(_e,{className:"intake-list",items:l,render:(v,u)=>A("li",{className:"intake-preview-container",children:[d("h5",{className:"intake-list-item-title",children:`Intake ${u+1}#  ${v.recordedAt?`- ${Wt(v.recordedAt)}`:""}`}),d(Ma,{intake:v}),d("p",{className:"intake-preview__total-calories",children:`Total Calories: ${ae.getTotalCalories(v)}`}),A("div",{className:"intake-list__btns-container",children:[d($,{className:"btn",onClickFn:()=>y(v.id),children:"Delete"}),c?d($,{className:"btn",onClickFn:()=>h(v),children:"Edit"}):d($,{className:"btn",onClickFn:()=>g(v.id),children:"Save"})]})]},v.id)})]})},Ka=()=>{const{dailyData:e,isLoading:t,updateDailyData:n}=te(),[r,a]=T.useState(),[i,s]=T.useState();function o(p){const{value:g}=p.target;a(Number(g))}function c(p){const{value:g}=p.target;s(Number(g))}function f(p){p.preventDefault(),!(!e||!r||!i)&&n({...e,weight:r,waist:i})}if(!e)return null;const l=!e.weight&&!e.waist&&!t;return A(he,{children:[t&&d(ee,{withContainer:!0,containerSize:{height:"75px"}}),l&&A("form",{className:"weight-waist-form",children:[d("input",{type:"number",name:"weight",className:"weight-waist-form__input",placeholder:"Enter your weight",value:r||"",onChange:o}),d("input",{type:"number",className:"weight-waist-form__input",name:"waist",placeholder:"Enter your waist size",value:i||"",onChange:c}),d($,{className:"btn",onClickFn:f,type:"submit",children:"update"})]}),!l&&A("div",{className:"weight-waist-details",children:[d("p",{className:"weight-waist-details__title",children:"weight:"}),A("p",{className:"weight-waist-details__text",children:[e.weight," kg"]}),d("p",{className:"weight-waist-details__title",children:"waist:"}),A("p",{className:"weight-waist-details__text",children:[e.waist," cm"]})]})]})},Ua=()=>{const{dailyData:e,isLoading:t,isSuccess:n,isError:r,isLoadingUpdate:a,openedElement:i,backgroundColor:s}=te(),o=n&&e&&!a,c=t||a,f=i===F.IntakeList||i===F.UnRecordedIntakeList;return A("section",{className:"today-details",style:{backgroundColor:s},children:[c&&d(ee,{}),r&&d(Le,{}),o&&A(he,{children:[d(Ba,{}),d(xr,{}),i===F.WeightWaistInput&&d(Ka,{}),i===F.IntakeEdit&&d(Sr,{}),i===F.Workouts&&d(_e,{items:e.workouts,render:l=>d(fn,{workout:l,isTodayDetails:!0},l.id)}),f&&d(Wa,{})]})]})};const qa=()=>{const e=Kt();return A("div",{className:"login-signup-msg",children:[d("div",{className:"login-signup-msg-text-container",children:d("h1",{children:"Start Your Journey Now!"})}),d("div",{className:"login-signup-msg-btn-container",children:[{title:"Log in",className:"btn-login",path:"/login"},{title:"Sign up",className:"btn-signup",path:"/signup"}].map(n=>d("button",{className:n.className,onClick:()=>{e(n.path)},children:n.title},n.title))})]})};function Va(){const e=Ut(),{mutate:t,isLoading:n}=qt({mutationFn:Vt.create,onSuccess:()=>{e.invalidateQueries(["today"])}});return{createDay:t,isLoading:n}}const ti=()=>{const{loggedInUser:e}=yt(),{dailyData:t}=bt(),{createDay:n,isLoading:r}=Va(),a=e&&!r,i=t?!za(t):!0;hn({title:"Home / Kceli"});function s(){window.confirm("Are you sure you want to start a new day?")&&n({})}return A("main",{className:"home","data-testid":"home-page",children:[!e&&d(qa,{}),a&&d(kn,{children:d(Ua,{})}),r&&d(ee,{}),i&&d($,{className:"home__btn",onClickFn:s,children:"start a new day"}),d(T.Suspense,{fallback:d(ee,{}),children:d(zt,{})})]})};function za(e){const t=new Date().toDateString(),n=new Date(e.date).toDateString();return t===n}export{ti as default};
