import{a8 as f,r as m,j as e,x as R,k as l,B as _,a9 as F,aa as M,z as W,S as x,F as b}from"./index-4a049eae.js";import{E as w}from"./ErrorMsg-1de596b1.js";import{L as v}from"./List-e2955c25.js";import{b as B,c as E}from"./index.esm-09d5b1c3.js";import{c as U}from"./index-44e7ac83.js";const L=({children:t})=>{const{isRunning:n}=f(),s=m.useRef(null),r=m.useRef(0),[o,d]=m.useState(N(1));return m.useEffect(()=>{const{current:a}=s;if(n){const c=setInterval(()=>{d(N(r.current)),r.current=r.current===100?0:r.current+1},10);s.current=c}else a&&clearInterval(a),d(N(0));return()=>{a&&clearInterval(a)}},[n]),e("div",{className:"seconds-circle","data-testid":"seconds-circle",style:{background:o},children:t})};function N(t){return`radial-gradient(closest-side,  var(--color-background) 85%, transparent 87%),
        conic-gradient(var(--color-text-gray) ${t}%, var(--color-background-light) 0)`}const P=({children:t})=>{const{initialTime:n,time:s,isRunning:r}=f(),o=m.useRef(null),[d,a]=m.useState(S(1));return m.useEffect(()=>{const{current:c}=o;if(r){const h=setInterval(()=>{const i=Math.abs((s-n)*60)/(n*60)*100;a(S(i))},10);o.current=h}else c&&clearInterval(c);return()=>{c&&clearInterval(c)}},[r,n,s]),m.useEffect(()=>{const h=Math.abs((s-n)*60)/(n*60)*100;a(S(h))},[n,s]),e("div",{className:"item-duration-circle","data-testid":"item-duration-circle",style:{background:d},children:e("div",{className:"item-duration-circle__border",children:t})})};function S(t){return`conic-gradient(var(--color-info) ${Math.max(t,.25)}%, var(--color-background-light) 0)`}const z=({children:t})=>{const{duration:n,completedDuration:s}=f(),r=s/n*100,[o,d]=m.useState(I(r||1));return m.useEffect(()=>{const a=s/n*100;d(I(a))},[s,n]),e("div",{className:"total-duration-circle","data-testid":"total-duration-circle",style:{background:o},children:e("div",{className:"total-duration-circle__border",children:t})})};function I(t){return`conic-gradient(#6A0DAD ${Math.max(t,.25)}%, var(--color-background-light) 0)`}function A(t){return R({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"}},{tag:"path",attr:{d:"M13 8v8h-3V8h3m0-3h-3C8.34 5 7 6.34 7 8v8c0 1.66 1.34 3 3 3h3c1.66 0 3-1.34 3-3V8c0-1.66-1.34-3-3-3zM1 8h2v11h3V5H1v3zm17.5 3c-.83 0-1.5.68-1.5 1.5v2c0 .82.67 1.5 1.5 1.5H21v1h-4v2h4.5c.83 0 1.5-.67 1.5-1.5v-2c0-.83-.67-1.5-1.5-1.5H19v-1h4v-2h-4.5z"}}]})(t)}const G=new Audio("/assets/sounds/SamsungRingtoneSoundEffect.mp3");function H(t){const n=Math.floor(t/60),s=Math.floor(t%60),r=Math.floor(t%1*100),o=n.toString().padStart(2,"0"),d=s.toString().padStart(2,"0"),a=r.toString().padStart(2,"0").slice(-2);return`${o}:${d}.${a}`}const V=()=>{const{time:t,setTime:n,isRunning:s,setIsRunning:r,onResetTimer:o,setInitialTime:d}=f(),a=m.useRef(null);function c(){r(i=>!i)}function h(){n(0),d(0),r(!1)}function p(){n(i=>i+10),d(i=>i+10)}return m.useEffect(()=>{const{current:i}=a;if(s){const g=setInterval(()=>{n(k=>k>=0?k-.01:(r(!1),G.play(),clearInterval(g),0))},10);a.current=g}else i&&clearInterval(i);return()=>{i&&clearInterval(i)}},[s,n,r]),l("section",{className:"timer","data-testid":"timer",children:[e(z,{children:e(P,{children:e(L,{children:e("div",{className:"clock-wrapper",children:e("span",{className:"timer__count",children:H(t)})})})})}),l("div",{className:"timer__controls",children:[e(_,{className:"timer__controls__btn",onClickFn:h,children:e(B,{"data-testid":"clear-icon"})}),e(_,{className:"timer__controls__btn",onClickFn:p,children:e(A,{"data-testid":"increment-icon"})}),e(_,{className:"timer__controls__btn",onClickFn:c,children:s?e(F,{"data-testid":"pause-icon"}):e(M,{"data-testid":"play-icon"})}),e(_,{className:"timer__controls__btn",onClickFn:o,children:e(E,{"data-testid":"reset-icon"})})]})]})};const y=({item:t})=>{const{currItem:n,setCurrItem:s,isWorkoutStarted:r,onCompleteItem:o,onResetTimer:d}=f(),[a,c]=m.useState(t.type!=="aerobic"?t.sets:null),h=(n==null?void 0:n.id)===t.id;function p(){if(!(h||t.isCompleted)){if(s(t),t.type==="aerobic")return;c(t.sets)}}function i(){t.type==="anaerobic"&&(c(u=>u===0||typeof u!="number"?u:u-1),d(),a===1&&(o(t),c(null)))}function g(){return!h||!r||t.isCompleted?null:l("div",{className:"workout-item-display__btns-container "+U({aerobic:(n==null?void 0:n.type)==="aerobic"}),"data-testid":"workout-item-display-btns-container",children:[(n==null?void 0:n.type)!=="aerobic"&&e(_,{className:"workout-item-display__btns-container__btn-set-num",isDisabled:!r,onClickFn:i,children:e("span",{children:a})}),e(_,{className:"workout-item-display__btns-container__btn",isDisabled:!r,onClickFn:()=>o(t),children:"complete"})]})}function k(){return t.type!=="superset"?null:e("ul",{className:"workout-item-display__info__superset-set-list","data-testid":"workout-item-display-info-superset-set-list",children:t.items.map((u,$)=>{const D=u.weightUnit==="kg"||u.weightUnit==="lbs"?`${u.weight} ${u.weightUnit}`:u.weightUnit;return e("li",{className:"workout-item-display__info__superset-set-list__item",children:`${u.name} - ${u.reps} reps - ${D}`},$)})})}function T(){const u=`${t.name} - ${W.calcItemDuration(t)} min`;switch(t.type){case"anaerobic":{const C=t.weightUnit==="kg"||t.weightUnit==="lbs"?`${t.weight} ${t.weightUnit}`:t.weightUnit;return`${u} - ${t.sets} * ${t.reps} - ${C} - ${t.restInSec}s rest`}case"superset":return`${u} - ${t.sets} sets - ${t.items.length} items - ${t.restInSec}s rest`;default:return u}}return l("section",{className:"workout-item-display",onClick:p,children:[l("div",{className:"workout-item-display__info","data-testid":"workout-item-display-info",children:[e("h4",{className:"workout-item-display__info__title","data-testid":"workout-item-display-info-title",children:T()}),k()]}),g()]})},Q=()=>{const{workout:t,unCompletedItems:n,completedItems:s,isLoading:r,isSuccess:o,isError:d,duration:a,isWorkoutStarted:c,isLoadingUpdateDailyData:h,onStart:p}=f();return d?e(w,{}):!o||!t?null:l("main",{className:"page workout-details","data-testid":"workout-details",children:[(r||h)&&e(x,{containerSize:{height:"100px"}}),d&&e(w,{}),o&&!t&&e(w,{msg:"Workout not found"}),o&&t&&l("div",{className:"workout-details__wrapper",children:[l("section",{className:"workout-details__info",children:[l("div",{className:"workout-details__info__item",children:[e("h2",{children:"description:"}),l("h3",{children:[" ",t.description]})]}),l("div",{className:"workout-details__info__item",children:[e("h2",{children:"duration: "}),l("h3",{children:[a," min"]})]}),l("div",{className:"workout-details__info__item",children:[e("h2",{children:"type: "}),e("h3",{children:t.type})]}),"split"in t&&l("div",{className:"workout-details__info__item",children:[e("h2",{children:"split: "})," ",e("h3",{children:t.split})]}),!c&&e(_,{onClickFn:p,children:"Start"})]}),!c&&l(b,{children:[e("h2",{className:"workout-details__title",children:"items:"}),e(v,{items:t.items,className:"workout-details__list",render:i=>e(y,{item:i},i.id),dataTestId:"workout-items-list"})]}),c&&l(b,{children:[e(V,{}),e(v,{items:n,className:"workout-details__list",render:i=>e(y,{item:i},i.id),dataTestId:"workout-uncompleted-items-list"}),s.length>0&&l("div",{className:"workout-details__completed-list-container",children:[e("h2",{className:"workout-details__completed-list-container__title",children:"Completed Items:"}),e("hr",{className:"workout-details__completed-list-container__hr"}),e(v,{items:s,className:"workout-details__list",render:i=>e(y,{item:i},i.id),dataTestId:"workout-completed-items-list"})]})]})]})]})};export{Q as default};
