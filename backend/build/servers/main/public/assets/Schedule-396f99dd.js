import{d as B,b as L,L as R,M as N,k as f,H as U,j as e,m as s,C as M,D as b,N as w,r as p,P as k,Q as W,T as P,G as x,S as Y,F as X,B as A,U as z}from"./index-10ec463a.js";import{E as G}from"./ErrorMsg-b51964b2.js";import{X as I,Y as F,R as H,C as j}from"./YAxis-8b623a02.js";import{B as K,N as $,K as q,F as O,v as Q,c as J}from"./generateCategoricalChart-4b296356.js";import{L as V}from"./List-958a1728.js";var Z=K({chartName:"BarChart",GraphicalChild:$,defaultTooltipEventType:"axis",validateTooltipEventTypes:["axis","item"],axisComponents:[{axisType:"xAxis",AxisComp:I},{axisType:"yAxis",AxisComp:F}],formatAxisMap:q});function ee(t){const{loggedInUser:i}=B(),{data:a,error:o,isLoading:n,isSuccess:l,isError:r}=L({queryKey:["calenderData",t],queryFn:()=>{const u=t.getMonth()+1,g=t.getFullYear();return U.getCalenderData(u,g)}}),c=!!a&&a.length===0;return{days:te({date:t,data:a,loggedInUser:i}),error:o,isLoading:n,isSuccess:l,isError:r,isEmpty:c}}function te({date:t,data:i,loggedInUser:a}){return ae(t).map(o=>re({date:o,data:i,loggedInUser:a}))}function ae(t){const i=R({month:t.getMonth(),year:t.getFullYear()}),a=Array.from({length:i},(c,h)=>new Date(t.getFullYear(),t.getMonth(),h+1)),o=a[0].getDay(),n=a[a.length-1].getDay(),l=Array.from({length:o},(c,h)=>new Date(t.getFullYear(),t.getMonth(),h-o+1)),r=Array.from({length:6-n},(c,h)=>new Date(t.getFullYear(),t.getMonth()+1,h+1));return[...l,...a,...r]}function re({date:t,data:i,loggedInUser:a}){const o=ne(t);if(!i)return o;const n=i.find(h=>N(new Date(h.date),t));if(!n)return o;const l=f.getTotalCalories(n),r=se(n,a,l),c=n.workouts.some(h=>h.items.some(u=>u.isCompleted));return{...o,id:n.id,data:n,backgroundColor:r,isBorder:c}}function ne(t){return{id:null,data:null,backgroundColor:"",isBorder:!1,date:t,day:t.getDate(),consumedCalories:0}}function se(t,i,a){return t&&i?f.getBcgByCosumedCalories({consumedCalories:a,targetCalorie:i.targetCaloricIntakePerDay}):""}const oe=({intakes:t})=>{const a=t.sort((o,n)=>{const l=new Date(o.recordedAt).getTime(),r=new Date(n.recordedAt).getTime();return l-r}).map(o=>({name:o.items.reduce((n,l,r,c)=>c.length===1?l.name:r===0?n+`${l.name}, `:r===c.length-1?n+`and ${l.name}`:n+` ${l.name}, `,""),calories:o.items.reduce((n,l)=>n+l.calories,0)}));return e("div",{style:{width:"100%",maxWidth:1200,height:300},children:e(H,{children:s(Z,{data:a,children:[e(j,{strokeDasharray:"3 3"}),e(I,{dataKey:"name"}),e(F,{}),e(O,{}),e($,{dataKey:"calories",barSize:25,children:a.map((o,n)=>e(Q,{fill:M[n%M.length]},`cell-${n}`))})]})})})};function ie(t){if(!t||t.intakes.length===0)return"No data";let i=0,a=0,o;for(const r of t.intakes){if(!r.recordedAt||r.type!=="food")continue;const c=new Date(r.recordedAt).getTime();o!==void 0&&(i+=c-o,a++),o=c}if(a===0)return"No data";const l=i/a/1e3/60/60;return l>=1?`${Math.round(l)} hours`:`${Math.round(l*60)} minutes`}const le={calcAverageTimeBetweenMeals:ie};const ce=({workout:t})=>{const{description:i,type:a,items:o}=t,n=b.calcWorkoutDuration({workout:t})+" min",l=Math.round(o.filter(r=>r.isCompleted).length/o.length*100);return s("article",{className:"day-report__workout-preview",children:[e(w,{className:"day-report__workout-preview__header",children:s("h3",{children:[i," - ",a," - ",n," - ",l,"% completed"]})}),s("table",{className:"day-report__workout-preview__table",children:[e("thead",{className:"day-report__workout-preview__table__header",children:s("tr",{children:[e("th",{children:"Exercise"}),e("th",{children:"Duration"}),e("th",{children:"Reps"}),e("th",{children:"Sets"}),e("th",{children:"Weight"}),e("th",{className:"day-report__workout-preview__table__header__completed",children:"Completed"})]})}),e("tbody",{className:"day-report__workout-preview__table__body",children:o.map((r,c)=>{const h=b.calcItemDuration(r)+" min";return r.type==="superset"?s(p.Fragment,{children:[s("tr",{children:[e("td",{children:r.name}),e("td",{children:h}),e("td",{}),e("td",{children:r.sets}),e("td",{}),e("td",{className:"completed",children:r.isCompleted?e(k,{}):""})]}),r.items.map((u,g)=>s("tr",{children:[e("td",{children:u.name}),e("td",{}),e("td",{children:u.reps}),e("td",{}),s("td",{children:[u.weight," ",u.weightUnit]}),e("td",{className:"completed"})]},`superset-${c}-subitem-${g}`))]},`superset-${c}`):r.type==="anaerobic"?s("tr",{children:[e("td",{children:r.name}),e("td",{children:h}),e("td",{children:r.reps}),e("td",{children:r.sets}),s("td",{children:[r.weight," ",r.weightUnit]}),e("td",{className:"completed",children:r.isCompleted?e(k,{}):""})]},c):s("tr",{children:[e("td",{children:r.name}),e("td",{children:h}),e("td",{}),e("td",{}),e("td",{}),e("td",{className:"completed",children:r.isCompleted?e(k,{}):""})]},c)})})]})]})};const de=({intake:t})=>{const[i,a]=p.useState(!1),o=t.name||t.items.map(r=>r.name).join(", "),n=f.getTotalCalories(t);function l(){a(!i)}return s("article",{className:"day-report__intake-preview",children:[s(w,{className:"day-report__intake-preview__header",onClickFn:l,children:[s("h3",{className:"day-report__intake-preview__header__title",children:[o," ",n," kcal"]}),e("div",{children:i?e(W,{}):e(P,{})})]}),i&&s("table",{className:"day-report__intake-preview__table",children:[e("thead",{className:"day-report__intake-preview__table__head",children:s("tr",{children:[e("th",{children:"Item"}),e("th",{children:"Calories"}),e("th",{children:"Weight"})]})}),e("tbody",{className:"day-report__intake-preview__table__body",children:t.items.map(r=>s("tr",{children:[e("td",{children:r.name}),e("td",{children:r.calories}),s("td",{children:[r.quantity," ",r.unit]})]},r.id))})]})]})},he=({day:t})=>{const{loggedInUser:i}=B(),{data:a}=t;if(!a)return e("section",{className:"day-report",children:e("p",{children:"No data for this day"})});const o=f.getTotalCalories(a),n=f.calcRemainingCalories(i,a),l=n>0?"remaining":"over your limit",r=`${n} calories ${l}`,c=new Intl.DateTimeFormat("en-US",{dateStyle:"full"}).format(t.date),h=le.calcAverageTimeBetweenMeals(a),{targetCaloricIntake:u}=a,g=u?f.getBcgByCosumedCalories({consumedCalories:o,targetCalorie:u}):"gray";return s("section",{className:"day-report",children:[s(w,{className:"day-report__header",children:[e("h1",{children:c}),e("div",{className:"day-report__header__color-circle",style:{background:g}})]}),s("div",{className:"day-report__weight",children:[e("p",{children:`Weight: ${a.weight}`}),e("p",{children:`Waist: ${a.waist}`})]}),s("div",{className:"day-report__calories",children:[e("p",{children:`Consumed Calories: ${o}`}),e("p",{children:r}),e("p",{children:`Target Caloric Intake: ${a.targetCaloricIntake}`})]}),a.intakes.length>0&&s("div",{className:"day-report__intakes",children:[e("h2",{className:"day-report__intakes__title",children:"Intakes"}),s("h4",{children:["Number of Intakes: ",a.intakes.length]}),s("h4",{children:["Average time between meals: ",h]}),e(V,{className:"day-report__intakes__list",items:a.intakes,render:y=>e(de,{intake:y})}),e(oe,{intakes:a.intakes})]}),a.workouts.length>0&&s("div",{className:"day-report__workouts",children:[e("h1",{className:"day-report__workouts__title",children:"Workouts"}),e("ul",{children:a.workouts.map((y,d)=>e("li",{children:e(ce,{workout:y})},d))})]})]})};function ue(t){return x({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M256 48C141.13 48 48 141.13 48 256s93.13 208 208 208 208-93.13 208-208S370.87 48 256 48zm62.63 304L296 374.63 177.37 256 296 137.37 318.63 160l-96 96z"}}]})(t)}function me(t){return x({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M256 48C141.13 48 48 141.13 48 256s93.13 208 208 208 208-93.13 208-208S370.87 48 256 48zm-40 326.63L193.37 352l96-96-96-96L216 137.37 334.63 256z"}}]})(t)}const ve=()=>{const[t,i]=p.useState(new Date),[a,o]=p.useState(null),{days:n,isLoading:l,isSuccess:r,isError:c}=ee(t),h=p.useRef(null),u=p.useRef(0);function g(d){o(d)}function y(d){const m=new Date(t);m.setMonth(t.getMonth()+d),i(m)}return p.useEffect(()=>{const d=v=>{const C=v.touches[0];u.current=C.clientX},m=v=>{const C=E=>{const T=new Date(t);T.setMonth(t.getMonth()+E),i(T)},D=v.changedTouches[0].clientX,S=50;D-u.current>S&&C(-1),u.current-D>S&&C(1)},_=h.current;if(_)return _.addEventListener("touchstart",d,!1),_.addEventListener("touchend",m,!1),()=>{_&&(_.removeEventListener("touchstart",d),_.removeEventListener("touchend",m))}},[t,r]),p.useEffect(()=>{if(!r||a)return;const d=new Date,m=n.find(_=>N(_.date,d));m&&o(m)},[n,r,a]),s("main",{className:"page schedule-page",children:[l&&e(Y,{}),c&&e(G,{}),r&&s(X,{children:[s(w,{className:"schedule-page__header",children:[s("h2",{className:"schedule-page__header__title",children:[t.toLocaleString("en-US",{month:"long"})," ",t.getFullYear()]}),s("div",{className:"schedule-page__header__btns-container",children:[e(A,{onClickFn:()=>y(-1),children:e(ue,{className:"schedule-page__header__btns-container__btn__icon"})}),e(A,{onClickFn:()=>y(1),children:e(me,{className:"schedule-page__header__btns-container__btn__icon"})})]})]}),s("ul",{className:"schedule-grid",ref:h,children:[z.map(d=>e("li",{className:"schedule-grid__item weekday-item",children:e("h3",{className:"schedule-grid__item__title",children:d.short})},d.short)),n.map(d=>{const{backgroundColor:m,date:_}=d,v=d.backgroundColor?"white":"",C=d.isBorder?"4px solid var(--color-success)":"none";return e("li",{className:J("schedule-grid__item",{active:a&&N(d.date,a.date)}),onClick:()=>g(d),style:{backgroundColor:m,color:v},children:e("div",{className:"schedule-grid__item__wrapper",style:{border:C},children:e("h3",{children:d.day})})},_.toISOString())})]}),a&&e(he,{day:a})]})]})};export{ve as default};
