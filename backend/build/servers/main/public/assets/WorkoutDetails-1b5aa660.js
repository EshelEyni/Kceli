import{a8 as f,r as h,j as e,x as y,k as a,B as p,a9 as T,aa as b,z as R,S as D,F as I}from"./index-c64035b7.js";import{E as F}from"./ErrorMsg-f30ad68c.js";import{L as k}from"./List-4cf535de.js";import{b as M,c as W}from"./index.esm-76b29a80.js";const B=({children:t})=>{const{isRunning:n}=f(),r=h.useRef(null),i=h.useRef(0),[l,o]=h.useState(w(1));return h.useEffect(()=>{const{current:s}=r;if(n){const c=setInterval(()=>{o(w(i.current)),i.current=i.current===100?0:i.current+1},10);r.current=c}else s&&clearInterval(s),o(w(0));return()=>{s&&clearInterval(s)}},[n]),e("div",{className:"seconds-circle","data-testid":"seconds-circle",style:{background:l},children:t})};function w(t){return`radial-gradient(closest-side,  var(--color-background) 85%, transparent 87%),
        conic-gradient(var(--color-text-gray) ${t}%, var(--color-background-light) 0)`}const E=({children:t})=>{const{initialTime:n,time:r,isRunning:i}=f(),l=h.useRef(null),[o,s]=h.useState(v(1));return h.useEffect(()=>{const{current:c}=l;if(i){const _=setInterval(()=>{const d=Math.abs((r-n)*60)/(n*60)*100;s(v(d))},10);l.current=_}else c&&clearInterval(c);return()=>{c&&clearInterval(c)}},[i,n,r]),h.useEffect(()=>{const _=Math.abs((r-n)*60)/(n*60)*100;s(v(_))},[n,r]),e("div",{className:"item-duration-circle","data-testid":"item-duration-circle",style:{background:o},children:e("div",{className:"item-duration-circle__border",children:t})})};function v(t){return`conic-gradient(var(--color-info) ${Math.max(t,.25)}%, var(--color-background-light) 0)`}const x=({children:t})=>{const{duration:n,completedDuration:r}=f(),i=r/n*100,[l,o]=h.useState($(i||1));return h.useEffect(()=>{const s=r/n*100;o($(s))},[r,n]),e("div",{className:"total-duration-circle","data-testid":"total-duration-circle",style:{background:l},children:e("div",{className:"total-duration-circle__border",children:t})})};function $(t){return`conic-gradient(#6A0DAD ${Math.max(t,.25)}%, var(--color-background-light) 0)`}function U(t){return y({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"}},{tag:"path",attr:{d:"M13 8v8h-3V8h3m0-3h-3C8.34 5 7 6.34 7 8v8c0 1.66 1.34 3 3 3h3c1.66 0 3-1.34 3-3V8c0-1.66-1.34-3-3-3zM1 8h2v11h3V5H1v3zm17.5 3c-.83 0-1.5.68-1.5 1.5v2c0 .82.67 1.5 1.5 1.5H21v1h-4v2h4.5c.83 0 1.5-.67 1.5-1.5v-2c0-.83-.67-1.5-1.5-1.5H19v-1h4v-2h-4.5z"}}]})(t)}const L=new Audio("/assets/sounds/SamsungRingtoneSoundEffect.mp3");function P(t){const n=Math.floor(t/60),r=Math.floor(t%60),i=Math.floor(t%1*100),l=n.toString().padStart(2,"0"),o=r.toString().padStart(2,"0"),s=i.toString().padStart(2,"0").slice(-2);return`${l}:${o}.${s}`}const z=()=>{const{time:t,setTime:n,isRunning:r,setIsRunning:i,onResetTimer:l,setInitialTime:o}=f(),s=h.useRef(null);function c(){i(d=>!d)}function _(){n(0),o(0),i(!1)}function m(){n(d=>d+10),o(d=>d+10)}return h.useEffect(()=>{const{current:d}=s;if(r){const u=setInterval(()=>{n(g=>g>=0?g-.01:(i(!1),L.play(),clearInterval(u),0))},10);s.current=u}else d&&clearInterval(d);return()=>{d&&clearInterval(d)}},[r,n,i]),a("section",{className:"timer","data-testid":"timer",children:[e(x,{children:e(E,{children:e(B,{children:e("div",{className:"clock-wrapper",children:e("span",{className:"timer__count",children:P(t)})})})})}),a("div",{className:"timer__controls",children:[e(p,{className:"timer__controls__btn",onClickFn:_,children:e(M,{"data-testid":"clear-icon"})}),e(p,{className:"timer__controls__btn",onClickFn:m,children:e(U,{"data-testid":"increment-icon"})}),e(p,{className:"timer__controls__btn",onClickFn:c,children:r?e(T,{"data-testid":"pause-icon"}):e(b,{"data-testid":"play-icon"})}),e(p,{className:"timer__controls__btn",onClickFn:l,children:e(W,{"data-testid":"reset-icon"})})]})]})};const S=({item:t})=>{const{currItem:n,setCurrItem:r,isWorkoutStarted:i,onStartItem:l,onCompleteItem:o}=f(),s=(n==null?void 0:n.id)===t.id;function c(){r(s?null:t)}function _(){return!s||!i?null:a("div",{className:"workout-item-display__btns-container","data-testid":"workout-item-display-btns-container",children:[!t.isStarted&&e(p,{className:"workout-item-display__btn",isDisabled:!i,onClickFn:()=>l(t),children:"start"}),t.isStarted&&!t.isCompleted&&e(p,{className:"workout-item-display__btn",isDisabled:!i,onClickFn:()=>o(t),children:"complete"})]})}function m(){return t.type!=="superset"?null:e("ul",{className:"workout-item-display__info__superset-set-list","data-testid":"workout-item-display-info-superset-set-list",children:t.items.map((u,g)=>{const C=u.weightUnit==="kg"||u.weightUnit==="lbs"?`${u.weight} ${u.weightUnit}`:u.weightUnit;return e("li",{className:"workout-item-display__info__superset-set-list__item",children:`${u.name} - ${u.reps} reps - ${C}`},g)})})}function d(){const u=`${t.name} - ${R.calcItemDuration(t)} min`;switch(t.type){case"anaerobic":{const N=t.weightUnit==="kg"||t.weightUnit==="lbs"?`${t.weight} ${t.weightUnit}`:t.weightUnit;return`${u} - ${t.sets} * ${t.reps} - ${N} - ${t.restInSec}s rest`}case"superset":return`${u} - ${t.sets} sets - ${t.items.length} items - ${t.restInSec}s rest`;default:return u}}return a("section",{className:"workout-item-display",onClick:c,children:[a("div",{className:"workout-item-display__info","data-testid":"workout-item-display-info",children:[e("h4",{className:"workout-item-display__info__title","data-testid":"workout-item-display-info-title",children:d()}),m()]}),_()]})},j=()=>{const{workout:t,unCompletedItems:n,completedItems:r,isLoading:i,isSuccess:l,isError:o,duration:s,isWorkoutStarted:c,onStart:_}=f();return i?e(D,{}):o?e(F,{}):!l||!t?null:e("main",{className:"page workout-details","data-testid":"workout-details",children:a("div",{className:"workout-details__wrapper",children:[a("section",{className:"workout-details__info",children:[a("div",{className:"workout-details__info__item",children:[e("h2",{children:"description:"}),a("h3",{children:[" ",t.description]})]}),a("div",{className:"workout-details__info__item",children:[e("h2",{children:"duration: "}),a("h3",{children:[s," min"]})]}),a("div",{className:"workout-details__info__item",children:[e("h2",{children:"type: "}),e("h3",{children:t.type})]}),"split"in t&&a("div",{className:"workout-details__info__item",children:[e("h2",{children:"split: "})," ",e("h3",{children:t.split})]}),!c&&e(p,{onClickFn:_,children:"Start"})]}),!c&&a(I,{children:[e("h2",{className:"workout-details__title",children:"items:"}),e(k,{items:t.items,className:"workout-details__list",render:m=>e(S,{item:m},m.id),dataTestId:"workout-items-list"})]}),c&&a(I,{children:[e(z,{}),e(k,{items:n,className:"workout-details__list",render:m=>e(S,{item:m},m.id),dataTestId:"workout-uncompleted-items-list"}),r.length>0&&a("div",{className:"workout-details__completed-list-container",children:[e("h2",{className:"workout-details__completed-list-container__title",children:"Completed Items:"}),e("hr",{className:"workout-details__completed-list-container__hr"}),e(k,{items:r,className:"workout-details__list",render:m=>e(S,{item:m},m.id),dataTestId:"workout-completed-items-list"})]})]})]})})};export{j as default};
