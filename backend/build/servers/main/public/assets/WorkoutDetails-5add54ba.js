import{a8 as f,r as m,j as e,x as D,k as o,B as _,a9 as R,aa as F,z as M,S as W,F as b}from"./index-5fdddba7.js";import{E as w}from"./ErrorMsg-9cfbfdba.js";import{L as v}from"./List-1ec78d4c.js";import{b as x,c as B}from"./index.esm-20a8bc65.js";import{c as E}from"./index-5fe2b831.js";const U=({children:t})=>{const{isRunning:n}=f(),s=m.useRef(null),r=m.useRef(0),[c,l]=m.useState(N(1));return m.useEffect(()=>{const{current:a}=s;if(n){const d=setInterval(()=>{l(N(r.current)),r.current=r.current===100?0:r.current+1},10);s.current=d}else a&&clearInterval(a),l(N(0));return()=>{a&&clearInterval(a)}},[n]),e("div",{className:"seconds-circle","data-testid":"seconds-circle",style:{background:c},children:t})};function N(t){return`radial-gradient(closest-side,  var(--color-background) 85%, transparent 87%),
        conic-gradient(var(--color-text-gray) ${t}%, var(--color-background-light) 0)`}const L=({children:t})=>{const{initialTime:n,time:s,isRunning:r}=f(),c=m.useRef(null),[l,a]=m.useState(S(1));return m.useEffect(()=>{const{current:d}=c;if(r){const h=setInterval(()=>{const i=Math.abs((s-n)*60)/(n*60)*100;a(S(i))},10);c.current=h}else d&&clearInterval(d);return()=>{d&&clearInterval(d)}},[r,n,s]),m.useEffect(()=>{const h=Math.abs((s-n)*60)/(n*60)*100;a(S(h))},[n,s]),e("div",{className:"item-duration-circle","data-testid":"item-duration-circle",style:{background:l},children:e("div",{className:"item-duration-circle__border",children:t})})};function S(t){return`conic-gradient(var(--color-info) ${Math.max(t,.25)}%, var(--color-background-light) 0)`}const P=({children:t})=>{const{duration:n,completedDuration:s}=f(),r=s/n*100,[c,l]=m.useState(I(r||1));return m.useEffect(()=>{const a=s/n*100;l(I(a))},[s,n]),e("div",{className:"total-duration-circle","data-testid":"total-duration-circle",style:{background:c},children:e("div",{className:"total-duration-circle__border",children:t})})};function I(t){return`conic-gradient(#6A0DAD ${Math.max(t,.25)}%, var(--color-background-light) 0)`}function z(t){return D({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"}},{tag:"path",attr:{d:"M13 8v8h-3V8h3m0-3h-3C8.34 5 7 6.34 7 8v8c0 1.66 1.34 3 3 3h3c1.66 0 3-1.34 3-3V8c0-1.66-1.34-3-3-3zM1 8h2v11h3V5H1v3zm17.5 3c-.83 0-1.5.68-1.5 1.5v2c0 .82.67 1.5 1.5 1.5H21v1h-4v2h4.5c.83 0 1.5-.67 1.5-1.5v-2c0-.83-.67-1.5-1.5-1.5H19v-1h4v-2h-4.5z"}}]})(t)}const A=new Audio("/assets/sounds/SamsungRingtoneSoundEffect.mp3");function G(t){const n=Math.floor(t/60),s=Math.floor(t%60),r=Math.floor(t%1*100),c=n.toString().padStart(2,"0"),l=s.toString().padStart(2,"0"),a=r.toString().padStart(2,"0").slice(-2);return`${c}:${l}.${a}`}const H=()=>{const{time:t,setTime:n,isRunning:s,setIsRunning:r,onResetTimer:c,setInitialTime:l}=f(),a=m.useRef(null);function d(){r(i=>!i)}function h(){n(0),l(0),r(!1)}function p(){n(i=>i+10),l(i=>i+10)}return m.useEffect(()=>{const{current:i}=a;if(s){const g=setInterval(()=>{n(k=>k>=0?k-.01:(r(!1),A.play(),clearInterval(g),0))},10);a.current=g}else i&&clearInterval(i);return()=>{i&&clearInterval(i)}},[s,n,r]),o("section",{className:"timer","data-testid":"timer",children:[e(P,{children:e(L,{children:e(U,{children:e("div",{className:"clock-wrapper",children:e("span",{className:"timer__count",children:G(t)})})})})}),o("div",{className:"timer__controls",children:[e(_,{className:"timer__controls__btn",onClickFn:h,children:e(x,{"data-testid":"clear-icon"})}),e(_,{className:"timer__controls__btn",onClickFn:p,children:e(z,{"data-testid":"increment-icon"})}),e(_,{className:"timer__controls__btn",onClickFn:d,children:s?e(R,{"data-testid":"pause-icon"}):e(F,{"data-testid":"play-icon"})}),e(_,{className:"timer__controls__btn",onClickFn:c,children:e(B,{"data-testid":"reset-icon"})})]})]})};const y=({item:t})=>{const{currItem:n,setCurrItem:s,isWorkoutStarted:r,onCompleteItem:c}=f(),[l,a]=m.useState(t.type!=="aerobic"?t.sets:null),d=(n==null?void 0:n.id)===t.id;function h(){if(!(d||t.isCompleted)){if(s(t),t.type==="aerobic")return;a(t.sets)}}function p(){t.type==="anaerobic"&&a(u=>u===0||typeof u!="number"?u:u-1)}function i(){return!d||!r||t.isCompleted?null:o("div",{className:"workout-item-display__btns-container "+E({aerobic:(n==null?void 0:n.type)==="aerobic"}),"data-testid":"workout-item-display-btns-container",children:[(n==null?void 0:n.type)!=="aerobic"&&e(_,{className:"workout-item-display__btns-container__btn-set-num",isDisabled:!r,onClickFn:p,children:e("span",{children:l})}),e(_,{className:"workout-item-display__btns-container__btn",isDisabled:!r,onClickFn:()=>c(t),children:"complete"})]})}function g(){return t.type!=="superset"?null:e("ul",{className:"workout-item-display__info__superset-set-list","data-testid":"workout-item-display-info-superset-set-list",children:t.items.map((u,$)=>{const T=u.weightUnit==="kg"||u.weightUnit==="lbs"?`${u.weight} ${u.weightUnit}`:u.weightUnit;return e("li",{className:"workout-item-display__info__superset-set-list__item",children:`${u.name} - ${u.reps} reps - ${T}`},$)})})}function k(){const u=`${t.name} - ${M.calcItemDuration(t)} min`;switch(t.type){case"anaerobic":{const C=t.weightUnit==="kg"||t.weightUnit==="lbs"?`${t.weight} ${t.weightUnit}`:t.weightUnit;return`${u} - ${t.sets} * ${t.reps} - ${C} - ${t.restInSec}s rest`}case"superset":return`${u} - ${t.sets} sets - ${t.items.length} items - ${t.restInSec}s rest`;default:return u}}return o("section",{className:"workout-item-display",onClick:h,children:[o("div",{className:"workout-item-display__info","data-testid":"workout-item-display-info",children:[e("h4",{className:"workout-item-display__info__title","data-testid":"workout-item-display-info-title",children:k()}),g()]}),i()]})},K=()=>{const{workout:t,unCompletedItems:n,completedItems:s,isLoading:r,isSuccess:c,isError:l,duration:a,isWorkoutStarted:d,isLoadingUpdateDailyData:h,onStart:p}=f();return l?e(w,{}):!c||!t?null:o("main",{className:"page workout-details","data-testid":"workout-details",children:[(r||h)&&e(W,{containerSize:{height:"100px"}}),l&&e(w,{}),c&&!t&&e(w,{msg:"Workout not found"}),c&&t&&o("div",{className:"workout-details__wrapper",children:[o("section",{className:"workout-details__info",children:[o("div",{className:"workout-details__info__item",children:[e("h2",{children:"description:"}),o("h3",{children:[" ",t.description]})]}),o("div",{className:"workout-details__info__item",children:[e("h2",{children:"duration: "}),o("h3",{children:[a," min"]})]}),o("div",{className:"workout-details__info__item",children:[e("h2",{children:"type: "}),e("h3",{children:t.type})]}),"split"in t&&o("div",{className:"workout-details__info__item",children:[e("h2",{children:"split: "})," ",e("h3",{children:t.split})]}),!d&&e(_,{onClickFn:p,children:"Start"})]}),!d&&o(b,{children:[e("h2",{className:"workout-details__title",children:"items:"}),e(v,{items:t.items,className:"workout-details__list",render:i=>e(y,{item:i},i.id),dataTestId:"workout-items-list"})]}),d&&o(b,{children:[e(H,{}),e(v,{items:n,className:"workout-details__list",render:i=>e(y,{item:i},i.id),dataTestId:"workout-uncompleted-items-list"}),s.length>0&&o("div",{className:"workout-details__completed-list-container",children:[e("h2",{className:"workout-details__completed-list-container__title",children:"Completed Items:"}),e("hr",{className:"workout-details__completed-list-container__hr"}),e(v,{items:s,className:"workout-details__list",render:i=>e(y,{item:i},i.id),dataTestId:"workout-completed-items-list"})]})]})]})]})};export{K as default};
