import{g as $e,h as re,a as fe,u as gn,r as S,b as je,c as Ut,d as vn,e as yn,f as Wt,i as kn,k as de,j as o,l as st,n as mt,m,B as L,S as Y,o as Me,p as Be,q as bn,F as he,_ as Je,R as O,C as pt,s as _n,t as gt,v as wn,w as In,x as Cn,y as An,G as Sn,z as ot,A as Pn,D as Nn,E as On,H as xn,I as En,J as Rn,K as Ln}from"./index-8703e784.js";import{i as W,M as Dn,u as Tn}from"./intakeUtilService-33dad420.js";import{c as ke}from"./index-a60e8904.js";import{L as Ue}from"./List-e42b0759.js";import{F as qt,a as Gt}from"./index.esm-eb41f9d7.js";import{E as ct}from"./ErrorMsg-29aab1ee.js";import{f as M,_ as Qt,a as Vt,b as Fn,c as $n,d as ce,T as lt,p as X,L as z,e as ut,g as Ht,D as jn,h as Mn,i as Bn,j as Un,G as Wn,u as qn,C as Gn,S as vt,k as ye,l as me,A as Qn,m as Vn,n as yt,o as Hn,q as ge,r as Kn,s as zn,t as Kt,v as Zn,w as Oe,x as kt,y as Ee,z as Yn,B as Xn,E as Jn}from"./generateCategoricalChart-4e3df464.js";import{u as er,W as tr}from"./WorkoutEditMainInputs-d305ecd1.js";import{u as zt,C as Ae}from"./index.esm-76c447ab.js";import{D as nr,S as rr,P as ar}from"./StrictModeDroppable-bfd393df.js";import{E as ir}from"./Empty-d82376b4.js";import{W as sr}from"./WorkoutPreview-cd300aae.js";import{G as or}from"./GoalEdit-918f9db3.js";import{A as cr,G as lr}from"./GoalDisplay-5b3d737f.js";/*!
 * Determine if an object is a Buffer
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */var ur=function(t){return t!=null&&t.constructor!=null&&typeof t.constructor.isBuffer=="function"&&t.constructor.isBuffer(t)},Zt=fr,dr=[];function fr(e,t){var n=0,r;if(!t)return dr;if(e.FLAG==="long"){for(r=new Array(Math.ceil(t.length/2));n<t.length;)r[n/2]=t.slice(n,n+2),n+=2;return r}return t.split(e.FLAG==="num"?",":"")}var hr=Zt,mr=vr,pr=[].push,xe="etaoinshrdlcumwfgypbvkjxqz".split(""),Ce=/\s+/,gr=["qwertzuop","yxcvbnm","qaw","say","wse","dsx","sy","edr","fdc","dx","rft","gfv","fc","tgz","hgb","gv","zhu","jhn","hb","uji","kjm","jn","iko","lkm"];function vr(e){var t=Object.create(null),n=Object.create(null),r=Object.create(null),a=[],i={in:[],out:[]},s=[],c=e.toString("utf8"),l=[],d=0,u=c.indexOf(`
`),f,v,h,p,y,g,_,A,N,b,x,k,w;for(r.KEY=[];u>-1;)P(c.slice(d,u)),d=u+1,u=c.indexOf(`
`,d);for(P(c.slice(d)),u=-1;++u<l.length;)if(v=l[u],f=v.split(Ce),h=f[0],h==="REP"){for(p=u+parseInt(f[1],10);++u<=p;)f=l[u].split(Ce),a.push([f[1],f[2]]);u--}else if(h==="ICONV"||h==="OCONV"){for(p=u+parseInt(f[1],10),A=i[h==="ICONV"?"in":"out"];++u<=p;)f=l[u].split(Ce),A.push([new RegExp(f[1],"g"),f[2]]);u--}else if(h==="COMPOUNDRULE"){for(p=u+parseInt(f[1],10);++u<=p;)for(b=l[u].split(Ce)[1],N=-1,s.push(b);++N<b.length;)n[b.charAt(N)]=[];u--}else if(h==="PFX"||h==="SFX"){for(p=u+parseInt(f[3],10),b={type:h,combineable:f[2]==="Y",entries:[]},t[f[1]]=b;++u<=p;){f=l[u].split(Ce),y=f[2],g=f[3].split("/"),_=f[4],A={add:"",remove:"",match:"",continuation:hr(r,g[1])},g&&g[0]!=="0"&&(A.add=g[0]);try{y!=="0"&&(A.remove=h==="SFX"?bt(y):y),_&&_!=="."&&(A.match=h==="SFX"?bt(_):yr(_))}catch{A=null}A&&b.entries.push(A)}u--}else if(h==="TRY"){for(_=f[1],k=-1,x=[];++k<_.length;)w=_.charAt(k),w.toLowerCase()===w&&x.push(w);for(k=-1;++k<xe.length;)_.indexOf(xe[k])<0&&x.push(xe[k]);r[h]=x}else h==="KEY"?pr.apply(r[h],f[1].split("|")):h==="COMPOUNDMIN"?r[h]=Number(f[1]):h==="ONLYINCOMPOUND"?(r[h]=f[1],n[f[1]]=[]):r[h]=f[1];return isNaN(r.COMPOUNDMIN)&&(r.COMPOUNDMIN=3),r.KEY.length||(r.KEY=gr),r.TRY||(r.TRY=xe.concat()),r.KEEPCASE||(r.KEEPCASE=!1),{compoundRuleCodes:n,replacementTable:a,conversion:i,compoundRules:s,rules:t,flags:r};function P(E){E=E.trim(),E&&E.charCodeAt(0)!==35&&l.push(E)}}function bt(e){return new RegExp(e+"$")}function yr(e){return new RegExp("^"+e)}var Yt=kr;function kr(e,t){for(var n=-1;++n<t.length;)e=e.replace(t[n][0],t[n][1]);return e}var We=br;function br(e,t,n){return n&&t in e&&n.indexOf(e[t])>-1}var _r=We,wr=Ir;function Ir(e,t){var n=-1;if(e.data[t])return!_r(e.flags,"ONLYINCOMPOUND",e.data[t]);if(t.length>=e.flags.COMPOUNDMIN){for(;++n<e.compoundRules.length;)if(e.compoundRules[n].test(t))return!0}return!1}var Cr=Yt,Ke=wr,et=We,dt=Ar;function Ar(e,t,n){var r=t.trim(),a;if(!r)return null;if(r=Cr(r,e.conversion.in),Ke(e,r))return!n&&et(e.flags,"FORBIDDENWORD",e.data[r])?null:r;if(r.toUpperCase()===r){if(a=r.charAt(0)+r.slice(1).toLowerCase(),_t(e.flags,e.data[a],n))return null;if(Ke(e,a))return a}if(a=r.toLowerCase(),a!==r){if(_t(e.flags,e.data[a],n))return null;if(Ke(e,a))return a}return null}function _t(e,t,n){return et(e,"KEEPCASE",t)||n||et(e,"FORBIDDENWORD",t)}var Sr=dt,Pr=Nr;function Nr(e){return!!Sr(this,e)}var Or=xr;function xr(e){var t=wt(e.charAt(0)),n=e.slice(1);return!n||(n=wt(n),t===n)?t:t==="u"&&n==="l"?"s":null}function wt(e){return e===e.toLowerCase()?"l":e===e.toUpperCase()?"u":null}var Re=Or,It=Yt,Er=We,Rr=dt,Lr=Tr,Dr=[].push;function Tr(e){var t=this,n={},r=[],a={},i,s,c=[],l,d,u,f,v,h,p,y,g,_,A,N,b,x,k,w,P,E,R,j,V,U,q;if(e=It(e.trim(),t.conversion.in),!e||t.correct(e))return[];for(q=Re(e),d=-1;++d<t.replacementTable.length;)for(s=t.replacementTable[d],u=e.indexOf(s[0]);u>-1;)c.push(e.replace(s[0],s[1])),u=e.indexOf(s[0],u+1);for(d=-1;++d<e.length;)for(y=e.charAt(d),_=e.slice(0,d),A=e.slice(d+1),b=y.toLowerCase(),N=b!==y,n={},u=-1;++u<t.flags.KEY.length;)if(g=t.flags.KEY[u],f=g.indexOf(b),!(f<0)){for(h=-1;++h<g.length;)if(h!==f){if(p=g.charAt(h),n[p])continue;n[p]=!0,N&&(p=p.toUpperCase()),c.push(_+p+A)}}for(d=-1,P=e.charAt(0),l=[""],E=1,R=0;++d<e.length;){for(y=P,P=e.charAt(d+1),_=e.slice(0,d),s=y===P?"":y+y,u=-1,v=l.length;++u<v;)u<=E&&l.push(l[u]+s),l[u]+=y;++R<3&&(E=l.length)}for(Dr.apply(c,l),l=[e],s=e.toLowerCase(),(e===s||q===null)&&l.push(e.charAt(0).toUpperCase()+s.slice(1)),s=e.toUpperCase(),e!==s&&l.push(s),i={state:{},weighted:a,suggestions:r},x=Ct(t,i,l,c),k=0,E=Math.min(x.length,Math.pow(Math.max(15-e.length,3),3)),j=Math.max(Math.pow(10-e.length,3),1);!r.length&&k<E;)w=k+j,Ct(t,i,x.slice(k,w)),k=w;for(r.sort(J),l=[],V=[],d=-1;++d<r.length;)U=It(r[d],t.conversion.out),s=U.toLowerCase(),V.indexOf(s)<0&&(l.push(U),V.push(s));return l;function J(I,D){return ee(I,D)||ie(I,D)||C(I,D)}function ee(I,D){return a[I]===a[D]?0:a[I]>a[D]?-1:1}function ie(I,D){var $=Re(I),Q=Re(D);return $===Q?0:$===q?-1:Q===q?1:void 0}function C(I,D){return I.localeCompare(D)}}function Ct(e,t,n,r){var a=e.flags.TRY,i=e.data,s=e.flags,c=[],l=-1,d,u,f,v,h,p,y,g,_,A,N,b,x;if(r)for(;++l<r.length;)k(r[l],!0);for(l=-1;++l<n.length;)for(d=n[l],u="",f="",v=d.charAt(0),h=d,p=d.slice(1),y=v.toLowerCase()!==v,g=Re(d),_=-1;++_<=d.length;)for(u+=f,A=h,h=p,p=h.slice(1),f=v,v=d.charAt(_+1),N=y,v&&(y=v.toLowerCase()!==v),h&&N!==y&&(k(u+w(h)),k(u+w(v)+w(f)+p)),k(u+h),h&&k(u+v+f+p),x=-1;++x<a.length;)b=a[x],N&&b!==b.toUpperCase()?(g!=="s"&&(k(u+b+A),k(u+b+h)),b=b.toUpperCase(),k(u+b+A),k(u+b+h)):(k(u+b+A),k(u+b+h));return c;function k(P,E){var R=t.state[P],j;R!==!!R&&(c.push(P),j=Rr(e,P),R=j&&!Er(s,"NOSUGGEST",i[j]),t.state[P]=R,R&&(t.weighted[P]=E?10:0,t.suggestions.push(P))),R&&t.weighted[P]++}function w(P){var E=P.charAt(0);return(E.toLowerCase()===E?E.toUpperCase():E.toLowerCase())+P.slice(1)}}var Fr=dt,At=We,$r=jr;function jr(e){var t=this,n=Fr(t,e,!0);return{correct:t.correct(e),forbidden:!!(n&&At(t.flags,"FORBIDDENWORD",t.data[n])),warn:!!(n&&At(t.flags,"WARN",t.data[n]))}}var Mr=Xt;function Xt(e,t,n,r){for(var a=-1,i,s,c,l,d;++a<t.entries.length;)if(i=t.entries[a],l=i.continuation,d=-1,(!i.match||i.match.test(e))&&(s=i.remove?e.replace(i.remove,""):e,s=t.type==="SFX"?s+i.add:i.add+s,r.push(s),l&&l.length))for(;++d<l.length;)c=n[l[d]],c&&Xt(s,c,n,r);return r}var St=Mr,Jt=Wr,Br=[].push,tt=[];function Ur(e,t,n){var r=e[t];t in e?r===tt?e[t]=n.concat():Br.apply(r,n):e[t]=n.concat()}function Wr(e,t,n,r){var a=-1,i,s,c,l,d,u,f;for((!("NEEDAFFIX"in r.flags)||n.indexOf(r.flags.NEEDAFFIX)<0)&&Ur(e,t,n);++a<n.length;)if(i=r.rules[n[a]],n[a]in r.compoundRuleCodes&&r.compoundRuleCodes[n[a]].push(t),i){for(u=St(t,i,r.rules,[]),s=-1;++s<u.length;)if(u[s]in e||(e[u[s]]=tt),i.combineable){for(c=a;++c<n.length;)if(d=r.rules[n[c]],d&&d.combineable&&i.type!==d.type)for(f=St(u[s],d,r.rules,[]),l=-1;++l<f.length;)f[l]in e||(e[f[l]]=tt)}}}var qr=Jt,Gr=Vr,Qr=[];function Vr(e,t){var n=this;return qr(n.data,e,n.data[t]||Qr,n),n}var Hr=Kr;function Kr(e){var t=this;return delete t.data[e],t}var zr=Zr;function Zr(){return this.flags.WORDCHARS||null}var Yr=Zt,Xr=Jt,Jr=ea,Pt=/\s/g;function ea(e,t,n){for(var r=e.toString("utf8"),a=r.indexOf(`
`)+1,i=r.indexOf(`
`,a);i>-1;)r.charCodeAt(a)!==9&&Nt(r.slice(a,i),t,n),a=i+1,i=r.indexOf(`
`,a);Nt(r.slice(a),t,n)}function Nt(e,t,n){for(var r=e.indexOf("/"),a=e.indexOf("#"),i="",s,c;r>-1&&e.charCodeAt(r-1)===92;)e=e.slice(0,r-1)+e.slice(r),r=e.indexOf("/",r);a>-1?r>-1&&r<a?(s=e.slice(0,r),Pt.lastIndex=r+1,c=Pt.exec(e),i=e.slice(r+1,c?c.index:void 0)):s=e.slice(0,a):r>-1?(s=e.slice(0,r),i=e.slice(r+1)):s=e,s=s.trim(),s&&Xr(n,s,Yr(t.flags,i.trim()),t)}var ta=Jr,na=ra;function ra(e){var t=this,n=-1,r,a,i,s;for(ta(e,t,t.data);++n<t.compoundRules.length;){for(r=t.compoundRules[n],a="",s=-1;++s<r.length;)i=r.charAt(s),a+=t.compoundRuleCodes[i].length?"(?:"+t.compoundRuleCodes[i].join("|")+")":i;t.compoundRules[n]=new RegExp(a,"i")}return t}var aa=ia;function ia(e){var t=this,n=e.toString("utf8").split(`
`),r=-1,a,i,s,c;for(t.flags.FORBIDDENWORD===void 0&&(t.flags.FORBIDDENWORD=!1),c=t.flags.FORBIDDENWORD;++r<n.length;)a=n[r].trim(),a&&(a=a.split("/"),s=a[0],i=s.charAt(0)==="*",i&&(s=s.slice(1)),t.add(s,a[1]),i&&t.data[s].push(c));return t}var Ot=ur,sa=mr,oa=Le,ae=Le.prototype;ae.correct=Pr;ae.suggest=Lr;ae.spell=$r;ae.add=Gr;ae.remove=Hr;ae.wordCharacters=zr;ae.dictionary=na;ae.personal=aa;function Le(e,t){var n=-1,r;if(!(this instanceof Le))return new Le(e,t);if(typeof e=="string"||Ot(e)?(typeof t=="string"||Ot(t))&&(r=[{dic:t}]):e&&("length"in e?(r=e,e=e[0]&&e[0].aff):(e.dic&&(r=[e]),e=e.aff)),!e)throw new Error("Missing `aff` in dictionary");if(e=sa(e),this.data=Object.create(null),this.compoundRuleCodes=e.compoundRuleCodes,this.replacementTable=e.replacementTable,this.conversion=e.conversion,this.compoundRules=e.compoundRules,this.rules=e.rules,this.flags=e.flags,r)for(;++n<r.length;)r[n].dic&&this.dictionary(r[n].dic)}const ca=$e(oa);function la(e,t){if(!e||!t)return 0;const n=t.weight||e.weight,r=Number((n*33).toFixed(2)),a=t.intakes.filter(i=>i.isRecorded).reduce((i,s)=>s.items.reduce((c,l)=>{if(l.name.toLocaleLowerCase()==="water")switch(l.unit){case"ml":return c+l.quantity;case"cup":return c+l.quantity*250;default:return c}return c},i),0)||0;return Number(((r-a)/1e3).toFixed(2))}const ua={calcRecommendedWaterIntake:la};function da(e){return{type:e,response:null,status:"idle",error:null}}const ze={getDefaultNutritionQuery:da};async function fa(){const e=await re.get("intake/favorite");return fe(e)}async function ha(e){const t=await re.post("intake/favorite",e);return fe(t)}async function ma(e){const t=await re.patch(`intake/favorite/${e.id}`,e);return fe(t)}async function pa(e){await re.delete(`intake/favorite/${e}`)}const qe={getUserFavoriteIntakes:fa,addUserFavoriteIntake:ha,updateUserFavoriteIntake:ma,removeUserFavoriteIntake:pa};function ga(){const{data:e,error:t,isLoading:n,isSuccess:r,isError:a}=gn({queryKey:["favoriteIntakes"],queryFn:qe.getUserFavoriteIntakes}),i=!!e&&e.length===0;return{favoriteIntakes:e,error:t,isLoading:n,isSuccess:r,isError:a,isEmpty:i}}var T=(e=>(e.IntakeEdit="IntakeEdit",e.IntakeList="IntakeList",e.UnRecordedIntakeList="UnRecordedIntakeList",e.FavoriteIntake="FavoriteIntake",e.Water="Water",e.WeightWaistInput="WeightWaistInput",e.Workouts="Workouts",e.Query="Query",e.Goals="Goals",e.HungerMeter="HungerMeter",e))(T||{});const en=S.createContext(void 0);function va({children:e}){const{loggedInUser:t}=je(),{dailyData:n,isLoading:r,isSuccess:a,isError:i}=Ut(),{updateDailyData:s,isLoading:c}=vn(),{goals:l,isLoading:d,isSuccess:u,isError:f,isEmpty:v}=yn(mn()),{backgroundColor:h,color:p}=Wt(),y={color:p,border:`1px solid ${p}`},{favoriteIntakes:g,isLoading:_,isSuccess:A,isError:N,isEmpty:b}=ga(),[x,k]=kn(),[w,P]=S.useState(x.get("tab")||"IntakeEdit"),[E,R]=S.useState(W.getDefaultIntake()),[j,V]=S.useState(E.items[0].id),[U,q]=S.useState(ze.getDefaultNutritionQuery("chatGPT")),[J,ee]=S.useState(ze.getDefaultNutritionQuery("ninjaAPI")),[ie,C]=S.useState(ze.getDefaultNutritionQuery("usdaAPI")),I=(n==null?void 0:n.intakes.filter(ne=>ne.isRecorded))||[],D=(n==null?void 0:n.intakes.filter(ne=>!ne.isRecorded))||[],$=de.getTotalCalories(n),Q=de.calcRemainingCalories(t,n),te=(n==null?void 0:n.targetCaloricIntake)??(t==null?void 0:t.targetCaloricIntakePerDay)??0,K=de.calcEstimatedBodyFatStatusPerDay(t,n),dn=Math.round($/te*100),fn=Math.round(Q/te*100),hn=ua.calcRecommendedWaterIntake(t,n);function mn(){if(!n)return"";const ne=new Date(n.date);ne.setHours(0,0,0,0);const ht=new Date(n.date);return ht.setHours(23,59,59,999),`?type=day&date[gte]=${ne.toISOString()}&date[lte]=${ht.toISOString()}`}S.useEffect(()=>{if(!a||!n||n!=null&&n.weight||n!=null&&n.isWeightWaistIgnored)return;P("WeightWaistInput");const ne=new URLSearchParams({tab:"WeightWaistInput"});k(ne)},[n,a]);const pn={dailyData:n,isLoading:r,isSuccess:a,isError:i,updateDailyData:s,isLoadingUpdate:c,recordedIntakes:I,unrecordedIntakes:D,remainingCalories:Q,consumedCalories:$,targetCaloricIntakePerDay:te,estimatedKGChange:K,openedTab:w,setOpenedTab:P,recommendedWaterIntake:hn,intake:E,setIntake:R,calConsumedPct:dn,calRemainingPct:fn,chatGPTQuery:U,setChatGPTQuery:q,ninjaAPIQuery:J,setNinjaAPIQuery:ee,USDAAPIQuery:ie,setUSDAAPIQuery:C,currIntakeItemId:j,setCurrIntakeItemId:V,favoriteIntakes:g,isLoadingFavoriteIntakes:_,isSuccessFavoriteIntakes:A,isErrorFavoriteIntakes:N,isEmptyFavoriteIntakes:b,setSearchParams:k,backgroundColor:h,color:p,btnStyle:y,goals:l,isLoadingGoals:d,isSuccessGoals:u,isErrorGoals:f,isEmptyGoals:v};return o(en.Provider,{value:pn,children:e})}function B(){const e=S.useContext(en);if(e===void 0)throw new Error("useDayEdit must be used within a DayEditProvider");return e}const ya="calorie";async function ka(e){const t=await re.post(`${ya}/item`,e);return fe(t)}const ba={getCaloriesForItem:ka},tn=S.createContext(void 0);function _a({intakeItem:e,children:t}){const{intake:n,setIntake:r,currIntakeItemId:a,setCurrIntakeItemId:i,btnStyle:s}=B(),c=n.items.length===1,l=e.id===a,[d,u]=S.useState(!1),[f,v]=S.useState(""),[h,p]=S.useState(!1),[y,g]=S.useState([]),[_,A]=S.useState(null),N=S.useRef(null),b=y.length>0&&y[0].suggestions.length>0&&!!e.name.length&&!!_;function x(C){C!==a&&i(C)}function k(C){C.preventDefault();const{value:I,name:D}=C.target;switch(D){case"name":if(w({...e,name:I}),I.length||g([]),!N.current)return;N.current(I);break;case"quantity":{const $={...e,quantity:Number(I)};$.caloriesPer100g&&($.calories=$.caloriesPer100g*($.quantity/100)),w($);break}case"calories":{const $={...e,calories:Number(I)};delete $.caloriesPer100g,w($),v("caloriesPer100g");break}case"caloriesPer100g":{const Q=Number(I)*(e.quantity/100);w({...e,caloriesPer100g:Number(I),calories:Q}),v("calories");break}}}function w(C){r(I=>({...I,items:I.items.map(D=>D.id===C.id?C:D)}))}function P(){const C=W.getQuantityStepPerUnit(e.unit);if(e.quantity-C<1)return;const I={...e,quantity:e.quantity-C};I.caloriesPer100g&&(I.calories=I.caloriesPer100g*(I.quantity/100)),w(I)}function E(){const C=W.getQuantityStepPerUnit(e.unit),I={...e,quantity:e.quantity+C};I.caloriesPer100g&&(I.calories=I.caloriesPer100g*(I.quantity/100)),w(I)}function R(){const C=W.units.indexOf(e.unit),I=C===W.units.length-1?W.units[0]:W.units[C+1],D=W.getUnitDefaultQuantity(I);w({...e,unit:I,quantity:D})}function j(){const C={...e};d&&(delete C.calories,delete C.caloriesPer100g,v("")),u(I=>!I),w(C)}async function V(){if(!e.name.length)return mt.error("Please enter a food name!");try{p(!0);const C=await ba.getCaloriesForItem(e);w({...e,calories:C}),u(!0)}catch(C){console.error(C),mt.error("Failed to calculate calories!")}finally{p(!1)}}function U(C,I){const D=e.name.replace(C,I),$=y.filter(Q=>Q.original!==C);g($),w({...e,name:D})}function q(C){const I=y.filter(D=>D.original!==C);g(I)}function J(){const C=W.getDefaultIntakeItem();r(I=>({...I,items:[...I.items,C]})),i(C.id)}function ee(){var Q,te;if(n.items.length===1)return;const C=n.items.findIndex(K=>K.id===e.id),I=(Q=n.items[C-1])==null?void 0:Q.id,D=(te=n.items[C+1])==null?void 0:te.id,$=[...n.items];$.splice(C,1),r(K=>({...K,items:$})),i(D||I)}S.useEffect(()=>{Promise.all([fetch("/assets/dictionaries/en_US.aff").then(C=>C.text()),fetch("/assets/dictionaries/en_US.dic").then(C=>C.text())]).then(([C,I])=>{const D=new ca(C,I);A(D)}).catch(C=>{console.error("Failed to load dictionaries:",C)})},[]),S.useEffect(()=>{function C(I){if(!_)return;const D=new Set(["nes","ness"]),te=I.split(" ").filter(K=>!D.has(K)&&K.length>3).map(K=>({original:K,suggestions:_.suggest(K)}));g(te)}N.current=st(C,1e3).debouncedFunc},[_]);const ie={intakeItem:e,isOneItem:c,isCurrIntakeItem:l,isManual:d,inputFaded:f,setInputFaded:v,isLoadingCal:h,suggestions:y,setSuggestions:g,isSuggestionListShown:b,handleNameInputClick:x,handleInputChange:k,decreaseQuantity:P,increaseQuantity:E,handleUnitBtnClick:R,handleToggleManual:j,handleCalcBtnClick:V,handleSuggestionClick:U,handleIgnoreSuggestionClick:q,handleAddButtonClick:J,handleRemoveButtonClick:ee,btnStyle:s};return o(tn.Provider,{value:ie,children:t})}function Ie(){const e=S.useContext(tn);if(!e)throw new Error("useIntakeItemEdit must be used within an IntakeItemEditProvider");return e}const wa=()=>{const{suggestions:e,handleSuggestionClick:t,handleIgnoreSuggestionClick:n}=Ie();return o("ul",{className:"spelling-suggestion-list","data-testid":"spelling-suggestion-list",children:e.map((r,a)=>m("li",{className:"spelling-suggestion-list__item",children:[r.suggestions.map(i=>o(L,{className:"intake-item-edit__btn spelling-suggestion-list__btn",onClickFn:()=>t(r.original,i),dataTestId:"spelling-suggestion-list-btn",children:o("span",{children:i})},i)),o(L,{className:"intake-item-edit__btn spelling-suggestion-list__btn",dataTestId:"ignore-suggestion-btn",onClickFn:()=>n(r.original),children:o("span",{children:"ignore"})})]},a))})};const Ia=()=>{const{intakeItem:e,inputFaded:t,setInputFaded:n,handleInputChange:r}=Ie(),a=e.calories?Math.round(e.calories):"";function i(s){t===s&&n("")}return m("div",{className:"intake-item-edit__manuall-calorie-edit","data-testid":"intake-item-edit-manuall-calorie-edit",children:[o("input",{type:"number",name:"calories",className:ke("intake-item-input",{faded:t==="calories"}),value:a,placeholder:"Calories",onChange:r,onClick:()=>i("calories")}),o("input",{type:"number",name:"caloriesPer100g",className:ke("intake-item-input",{faded:t==="caloriesPer100g"}),value:e.caloriesPer100g||"",placeholder:"Calories per 100g",onChange:r,onClick:()=>i("caloriesPer100g")})]})};const Ca=()=>{const{intakeItem:e,isManual:t,isLoadingCal:n,handleInputChange:r,decreaseQuantity:a,increaseQuantity:i,handleUnitBtnClick:s,handleToggleManual:c,handleCalcBtnClick:l}=Ie();return m("section",{className:"intake-item-edit__inputs-btns","data-testid":"intake-item-edit-inputs-btns",children:[m("div",{className:"quantity-input-container",children:[o(L,{className:"quantity-input-btn",onClickFn:a,children:o(qt,{})}),o("input",{type:"number",name:"quantity",className:"intake-item-input quantity-input",value:e.quantity,onChange:r}),o(L,{className:"quantity-input-btn",onClickFn:i,children:o(Gt,{})})]}),o(L,{onClickFn:s,className:"intake-item-edit__btn",children:o("span",{children:e.unit})}),o(L,{onClickFn:c,className:"intake-item-edit__btn",children:o("span",{children:t?"Manual":"Auto"})}),o(L,{onClickFn:l,className:"intake-item-edit__btn calc-calories-btn",children:n?o(Y,{containerSize:{width:"100%"}}):o("span",{children:"calc"})})]})},Aa=()=>{const{isOneItem:e,handleAddButtonClick:t,handleRemoveButtonClick:n,btnStyle:r}=Ie();return m("section",{className:"intake-edit-item__btns-container","data-testid":"intake-item-edit-btns",children:[!e&&o(L,{onClickFn:n,children:"remove item"}),o(L,{style:r,onClickFn:t,children:"add item"})]})},Sa=()=>{const{intakeItem:e,handleNameInputClick:t,handleInputChange:n}=Ie();return o("input",{type:"text",name:"name",className:"intake-item-input",value:e.name,onChange:n,spellCheck:!0,autoComplete:"off",placeholder:"Enter food name",onClick:()=>t(e.id)})},Pa=()=>{const{isCurrIntakeItem:e,isManual:t,isSuggestionListShown:n}=Ie();return m("section",{className:"intake-item-edit","data-testid":"intake-item-edit",children:[o(Sa,{}),n&&o(wa,{}),o(Ca,{}),t&&o(Ia,{}),e&&o(Aa,{})]})};function nn(){const e=Me(),{mutate:t,isLoading:n}=Be({mutationFn:qe.addUserFavoriteIntake,onSuccess:()=>{e.invalidateQueries(["favoriteIntakes"])}});return{addFavoriteIntake:t,isLoading:n}}function rn(){const e=Me(),{mutate:t,isLoading:n}=Be({mutationFn:r=>qe.updateUserFavoriteIntake(r),onSuccess:()=>{e.invalidateQueries(["favoriteIntakes"])}});return{updateFavoriteIntake:t,isLoading:n}}const Na=()=>{const{dailyData:e,color:t}=B();if(!e)return null;const r=W.sortIntakesByRecordedAt(e.intakes).findLast(i=>i.isRecorded&&i.type==="food");if(!r)return null;const a=bn(r.recordedAt);return m("h5",{className:"last-time-you-ate-title",style:{color:t},children:["Last time you ate: ",a]})};const Oa=()=>{const{loggedInUser:e}=je(),{intake:t,dailyData:n,color:r}=B();if(!n||!t||!t.isRecorded)return null;const a=Math.round(t.items.reduce((u,f)=>f.calories===void 0?u:u+f.calories,0));if(a<=0)return null;const i={...n,intakes:n==null?void 0:n.intakes.filter(u=>u.id!==t.id)},s=de.getTotalCalories(i),c=de.calcRemainingCalories(e,i),l=s+a,d=c-a;return m("section",{className:"pre-save-calorie-count",style:{color:r},children:[m("p",{children:[o("strong",{children:"Total:"})," ",o("span",{children:a})]}),m("p",{children:[o("strong",{children:"Consumed:"})," ",o("span",{children:l})]}),m("p",{children:[o("strong",{children:"Remaining:"})," ",o("span",{children:d})]})]})};const xa=()=>{const{dailyData:e,isLoading:t,isLoadingUpdate:n,intake:r,updateDailyData:a,setIntake:i,backgroundColor:s,btnStyle:c}=B(),{addFavoriteIntake:l,isLoading:d}=nn(),{updateFavoriteIntake:u,isLoading:f}=rn(),v=t||n||d||f,h=r.recordedAt&&r.isRecorded;function p(k){k.preventDefault();const{value:w}=k.target;i(P=>({...P,name:w}))}function y(){const k=r.type==="food"?"drink":"food";i(w=>({...w,type:k}))}function g(k){k.preventDefault();const{value:w}=k.target,[P,E]=w.split(":"),R=new Date(r.recordedAt);R.setHours(+P),R.setMinutes(+E),i(j=>({...j,recordedAt:R}))}function _(){i(W.getDefaultIntake())}function A(k){if(k.preventDefault(),!r.items.every(P=>P.name.length&&P.quantity>0))return Je.error("Please fill all intake items");r.recordedAt=null,r.isRecorded=!1,"userId"in r?u(r):l(r),i(W.getDefaultIntake())}function N(){i(k=>({...k,recordedAt:k.isRecorded?new Date:null,isRecorded:!k.isRecorded}))}function b(k){if(k.preventDefault(),!e)return;if(!r.items.every(R=>R.name.length&&R.quantity>0))return Je.error("Please fill all intake items");r.isRecorded&&!r.recordedAt&&(r.recordedAt=new Date);const E=!e.intakes.some(R=>R.id===r.id)?[...e.intakes,r]:e.intakes.map(R=>R.id===r.id?r:R);a({id:e.id,data:{intakes:E}}),i(W.getDefaultIntake())}function x(k){const w=new Date(k),P=w.getTimezoneOffset();return w.setMinutes(w.getMinutes()-P),w.toISOString().slice(11,16)}return m("form",{className:"intake-edit",onSubmit:b,"data-testid":"intake-edit",children:[v&&o(Y,{containerSize:{height:"75px",width:"100%"}}),!v&&m(he,{children:[m("header",{className:"intake-edit__header","data-testid":"intake-edit-header",children:[m("div",{className:"intake-edit__header__input-name-btn-type",children:[o("input",{type:"text",placeholder:"Name your intake",autoComplete:"off",value:r.name||"",onChange:p,className:"intake-edit__header__name-input","data-testid":"intake-edit-name-input"}),o(L,{onClickFn:y,className:"intake-edit-btn",children:o("span",{children:r.type})})]}),h&&o("input",{className:"intake-edit__header__time-input",type:"time",value:x(r.recordedAt),onChange:g,"data-testid":"intake-edit-time-input"})]}),o(Ue,{items:r.items,render:k=>o(_a,{intakeItem:k,children:o(Pa,{})},k.id),className:"intake-edit-item-list",dataTestId:"intake-edit-item-list"})]}),m("div",{className:"intake-edit__info-container","data-testid":"intake-edit-info-container",children:[o(Na,{}),o(Oa,{})]}),m("div",{className:"intake-edit-btns-container","data-testid":"intake-edit-btns-container",style:{backgroundColor:s},children:[o(L,{style:c,onClickFn:_,className:"intake-edit-btn",children:"clear"}),o(L,{style:c,onClickFn:A,className:"intake-edit-btn",type:"submit",children:"Save To Fav"}),o(L,{style:c,onClickFn:N,className:"intake-edit-btn btn-toggle-save-later "+ke({clicked:!r.isRecorded}),children:"Save Later"}),o(L,{style:c,onClickFn:k=>b(k),className:"intake-edit-btn",type:"submit",children:"Save Intake"})]})]})};const Ea=()=>{const{dailyData:e,setOpenedTab:t,setSearchParams:n,color:r}=B();if(!e)return null;function a(s){t(s);const c=new URLSearchParams({tab:s});n(c)}const i=[{name:"add",value:T.IntakeEdit},{name:"intakes",value:T.IntakeList,isShown:e==null?void 0:e.intakes.some(s=>s.isRecorded===!0)},{name:"unrecorded",value:T.UnRecordedIntakeList,isShown:e==null?void 0:e.intakes.some(s=>s.isRecorded===!1)},{name:"favorites",value:T.FavoriteIntake},{name:"water",value:T.Water},{name:"weight",value:T.WeightWaistInput},{name:"workouts",value:T.Workouts},{name:"query",value:T.Query},{name:"goals",value:T.Goals},{name:"h-meter",value:T.HungerMeter}];return o("ul",{className:"day-edit__filter","data-testid":"day-edit-filter",children:i.map(s=>s.isShown===!1?null:o("li",{className:"filter__item",children:o(L,{style:{color:r,border:`1px solid ${r}`},onClickFn:()=>a(s.value),children:s.name})},s.value))})};var Ra=["points","className","baseLinePoints","connectNulls"];function ve(){return ve=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ve.apply(this,arguments)}function La(e,t){if(e==null)return{};var n=Da(e,t),r,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)r=i[a],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function Da(e,t){if(e==null)return{};var n={},r=Object.keys(e),a,i;for(i=0;i<r.length;i++)a=r[i],!(t.indexOf(a)>=0)&&(n[a]=e[a]);return n}function xt(e){return ja(e)||$a(e)||Fa(e)||Ta()}function Ta(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Fa(e,t){if(e){if(typeof e=="string")return nt(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return nt(e,t)}}function $a(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function ja(e){if(Array.isArray(e))return nt(e)}function nt(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Et=function(t){return t&&t.x===+t.x&&t.y===+t.y},Ma=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],n=[[]];return t.forEach(function(r){Et(r)?n[n.length-1].push(r):n[n.length-1].length>0&&n.push([])}),Et(t[0])&&n[n.length-1].push(t[0]),n[n.length-1].length<=0&&(n=n.slice(0,-1)),n},Se=function(t,n){var r=Ma(t);n&&(r=[r.reduce(function(i,s){return[].concat(xt(i),xt(s))},[])]);var a=r.map(function(i){return i.reduce(function(s,c,l){return"".concat(s).concat(l===0?"M":"L").concat(c.x,",").concat(c.y)},"")}).join("");return r.length===1?"".concat(a,"Z"):a},Ba=function(t,n,r){var a=Se(t,r);return"".concat(a.slice(-1)==="Z"?a.slice(0,-1):a,"L").concat(Se(n.reverse(),r).slice(1))},Ua=function(t){var n=t.points,r=t.className,a=t.baseLinePoints,i=t.connectNulls,s=La(t,Ra);if(!n||!n.length)return null;var c=ke("recharts-polygon",r);if(a&&a.length){var l=s.stroke&&s.stroke!=="none",d=Ba(n,a,i);return O.createElement("g",{className:c},O.createElement("path",ve({},M(s,!0),{fill:d.slice(-1)==="Z"?s.fill:"none",stroke:"none",d})),l?O.createElement("path",ve({},M(s,!0),{fill:"none",d:Se(n,i)})):null,l?O.createElement("path",ve({},M(s,!0),{fill:"none",d:Se(a,i)})):null)}var u=Se(n,i);return O.createElement("path",ve({},M(s,!0),{fill:u.slice(-1)==="Z"?s.fill:"none",className:c,d:u}))},Wa=Qt,qa=Vt,Ga=Fn;function Qa(e,t){return e&&e.length?Wa(e,qa(t),Ga):void 0}var Va=Qa;const Ha=$e(Va);var Ka=Qt,za=$n,Za=Vt;function Ya(e,t){return e&&e.length?Ka(e,Za(t),za):void 0}var Xa=Ya;const Ja=$e(Xa);var ei=["cx","cy","angle","ticks","axisLine"],ti=["ticks","tick","angle","tickFormatter","stroke"];function be(e){"@babel/helpers - typeof";return be=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},be(e)}function Pe(){return Pe=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Pe.apply(this,arguments)}function Rt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function se(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Rt(Object(n),!0).forEach(function(r){Ge(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Rt(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Lt(e,t){if(e==null)return{};var n=ni(e,t),r,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)r=i[a],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function ni(e,t){if(e==null)return{};var n={},r=Object.keys(e),a,i;for(i=0;i<r.length;i++)a=r[i],!(t.indexOf(a)>=0)&&(n[a]=e[a]);return n}function ri(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Dt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,an(r.key),r)}}function ai(e,t,n){return t&&Dt(e.prototype,t),n&&Dt(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function ii(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&rt(e,t)}function rt(e,t){return rt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,a){return r.__proto__=a,r},rt(e,t)}function si(e){var t=li();return function(){var r=De(e),a;if(t){var i=De(this).constructor;a=Reflect.construct(r,arguments,i)}else a=r.apply(this,arguments);return oi(this,a)}}function oi(e,t){if(t&&(be(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return ci(e)}function ci(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function li(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function De(e){return De=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},De(e)}function Ge(e,t,n){return t=an(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function an(e){var t=ui(e,"string");return be(t)==="symbol"?t:String(t)}function ui(e,t){if(be(e)!=="object"||e===null)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(be(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Qe=function(e){ii(n,e);var t=si(n);function n(){return ri(this,n),t.apply(this,arguments)}return ai(n,[{key:"getTickValueCoord",value:function(a){var i=a.coordinate,s=this.props,c=s.angle,l=s.cx,d=s.cy;return X(l,d,i,c)}},{key:"getTickTextAnchor",value:function(){var a=this.props.orientation,i;switch(a){case"left":i="end";break;case"right":i="start";break;default:i="middle";break}return i}},{key:"getViewBox",value:function(){var a=this.props,i=a.cx,s=a.cy,c=a.angle,l=a.ticks,d=Ja(l,function(f){return f.coordinate||0}),u=Ha(l,function(f){return f.coordinate||0});return{cx:i,cy:s,startAngle:c,endAngle:c,innerRadius:u.coordinate||0,outerRadius:d.coordinate||0}}},{key:"renderAxisLine",value:function(){var a=this.props,i=a.cx,s=a.cy,c=a.angle,l=a.ticks,d=a.axisLine,u=Lt(a,ei),f=l.reduce(function(y,g){return[Math.min(y[0],g.coordinate),Math.max(y[1],g.coordinate)]},[1/0,-1/0]),v=X(i,s,f[0],c),h=X(i,s,f[1],c),p=se(se(se({},M(u)),{},{fill:"none"},M(d)),{},{x1:v.x,y1:v.y,x2:h.x,y2:h.y});return O.createElement("line",Pe({className:"recharts-polar-radius-axis-line"},p))}},{key:"renderTicks",value:function(){var a=this,i=this.props,s=i.ticks,c=i.tick,l=i.angle,d=i.tickFormatter,u=i.stroke,f=Lt(i,ti),v=this.getTickTextAnchor(),h=M(f),p=M(c),y=s.map(function(g,_){var A=a.getTickValueCoord(g),N=se(se(se(se({textAnchor:v,transform:"rotate(".concat(90-l,", ").concat(A.x,", ").concat(A.y,")")},h),{},{stroke:"none",fill:u},p),{},{index:_},A),{},{payload:g});return O.createElement(z,Pe({className:"recharts-polar-radius-axis-tick",key:"tick-".concat(_)},ut(a.props,g,_)),n.renderTickItem(c,N,d?d(g.value,_):g.value))});return O.createElement(z,{className:"recharts-polar-radius-axis-ticks"},y)}},{key:"render",value:function(){var a=this.props,i=a.ticks,s=a.axisLine,c=a.tick;return!i||!i.length?null:O.createElement(z,{className:"recharts-polar-radius-axis"},s&&this.renderAxisLine(),c&&this.renderTicks(),Ht.renderCallByParent(this.props,this.getViewBox()))}}],[{key:"renderTickItem",value:function(a,i,s){var c;return O.isValidElement(a)?c=O.cloneElement(a,i):ce(a)?c=a(i):c=O.createElement(lt,Pe({},i,{className:"recharts-polar-radius-axis-tick-value"}),s),c}}]),n}(S.PureComponent);Ge(Qe,"displayName","PolarRadiusAxis");Ge(Qe,"axisType","radiusAxis");Ge(Qe,"defaultProps",{type:"number",radiusAxisId:0,cx:0,cy:0,angle:0,orientation:"right",stroke:"#ccc",axisLine:!0,tick:!0,tickCount:5,allowDataOverflow:!1,scale:"auto",allowDuplicatedCategory:!0});function _e(e){"@babel/helpers - typeof";return _e=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_e(e)}function le(){return le=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},le.apply(this,arguments)}function Tt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function oe(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Tt(Object(n),!0).forEach(function(r){Ve(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Tt(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function di(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ft(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,sn(r.key),r)}}function fi(e,t,n){return t&&Ft(e.prototype,t),n&&Ft(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function hi(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&at(e,t)}function at(e,t){return at=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,a){return r.__proto__=a,r},at(e,t)}function mi(e){var t=vi();return function(){var r=Te(e),a;if(t){var i=Te(this).constructor;a=Reflect.construct(r,arguments,i)}else a=r.apply(this,arguments);return pi(this,a)}}function pi(e,t){if(t&&(_e(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return gi(e)}function gi(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function vi(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Te(e){return Te=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Te(e)}function Ve(e,t,n){return t=sn(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function sn(e){var t=yi(e,"string");return _e(t)==="symbol"?t:String(t)}function yi(e,t){if(_e(e)!=="object"||e===null)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(_e(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var ki=Math.PI/180,$t=1e-5,He=function(e){hi(n,e);var t=mi(n);function n(){return di(this,n),t.apply(this,arguments)}return fi(n,[{key:"getTickLineCoord",value:function(a){var i=this.props,s=i.cx,c=i.cy,l=i.radius,d=i.orientation,u=i.tickSize,f=u||8,v=X(s,c,l,a.coordinate),h=X(s,c,l+(d==="inner"?-1:1)*f,a.coordinate);return{x1:v.x,y1:v.y,x2:h.x,y2:h.y}}},{key:"getTickTextAnchor",value:function(a){var i=this.props.orientation,s=Math.cos(-a.coordinate*ki),c;return s>$t?c=i==="outer"?"start":"end":s<-$t?c=i==="outer"?"end":"start":c="middle",c}},{key:"renderAxisLine",value:function(){var a=this.props,i=a.cx,s=a.cy,c=a.radius,l=a.axisLine,d=a.axisLineType,u=oe(oe({},M(this.props)),{},{fill:"none"},M(l));if(d==="circle")return O.createElement(jn,le({className:"recharts-polar-angle-axis-line"},u,{cx:i,cy:s,r:c}));var f=this.props.ticks,v=f.map(function(h){return X(i,s,c,h.coordinate)});return O.createElement(Ua,le({className:"recharts-polar-angle-axis-line"},u,{points:v}))}},{key:"renderTicks",value:function(){var a=this,i=this.props,s=i.ticks,c=i.tick,l=i.tickLine,d=i.tickFormatter,u=i.stroke,f=M(this.props),v=M(c),h=oe(oe({},f),{},{fill:"none"},M(l)),p=s.map(function(y,g){var _=a.getTickLineCoord(y),A=a.getTickTextAnchor(y),N=oe(oe(oe({textAnchor:A},f),{},{stroke:"none",fill:u},v),{},{index:g,payload:y,x:_.x2,y:_.y2});return O.createElement(z,le({className:"recharts-polar-angle-axis-tick",key:"tick-".concat(g)},ut(a.props,y,g)),l&&O.createElement("line",le({className:"recharts-polar-angle-axis-tick-line"},h,_)),c&&n.renderTickItem(c,N,d?d(y.value,g):y.value))});return O.createElement(z,{className:"recharts-polar-angle-axis-ticks"},p)}},{key:"render",value:function(){var a=this.props,i=a.ticks,s=a.radius,c=a.axisLine;return s<=0||!i||!i.length?null:O.createElement(z,{className:"recharts-polar-angle-axis"},c&&this.renderAxisLine(),this.renderTicks())}}],[{key:"renderTickItem",value:function(a,i,s){var c;return O.isValidElement(a)?c=O.cloneElement(a,i):ce(a)?c=a(i):c=O.createElement(lt,le({},i,{className:"recharts-polar-angle-axis-tick-value"}),s),c}}]),n}(S.PureComponent);Ve(He,"displayName","PolarAngleAxis");Ve(He,"axisType","angleAxis");Ve(He,"defaultProps",{type:"category",angleAxisId:0,scale:"auto",cx:0,cy:0,orientation:"outer",axisLine:!0,tickLine:!0,tickSize:8,tick:!0,hide:!1,allowDuplicatedCategory:!0});var bi=Mn,_i=bi(Object.getPrototypeOf,Object),wi=_i,Ii=Bn,Ci=wi,Ai=Un,Si="[object Object]",Pi=Function.prototype,Ni=Object.prototype,on=Pi.toString,Oi=Ni.hasOwnProperty,xi=on.call(Object);function Ei(e){if(!Ai(e)||Ii(e)!=Si)return!1;var t=Ci(e);if(t===null)return!0;var n=Oi.call(t,"constructor")&&t.constructor;return typeof n=="function"&&n instanceof n&&on.call(n)==xi}var Ri=Ei;const Li=$e(Ri);function we(e){"@babel/helpers - typeof";return we=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},we(e)}function ue(){return ue=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ue.apply(this,arguments)}function jt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function F(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?jt(Object(n),!0).forEach(function(r){H(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):jt(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Di(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Mt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,cn(r.key),r)}}function Ti(e,t,n){return t&&Mt(e.prototype,t),n&&Mt(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function Fi(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&it(e,t)}function it(e,t){return it=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,a){return r.__proto__=a,r},it(e,t)}function $i(e){var t=Mi();return function(){var r=Fe(e),a;if(t){var i=Fe(this).constructor;a=Reflect.construct(r,arguments,i)}else a=r.apply(this,arguments);return ji(this,a)}}function ji(e,t){if(t&&(we(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return pe(e)}function pe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Mi(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Fe(e){return Fe=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Fe(e)}function H(e,t,n){return t=cn(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function cn(e){var t=Bi(e,"string");return we(t)==="symbol"?t:String(t)}function Bi(e,t){if(we(e)!=="object"||e===null)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(we(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Z=function(e){Fi(n,e);var t=$i(n);function n(r){var a;return Di(this,n),a=t.call(this,r),H(pe(a),"pieRef",null),H(pe(a),"sectorRefs",[]),H(pe(a),"id",qn("recharts-pie-")),H(pe(a),"handleAnimationEnd",function(){var i=a.props.onAnimationEnd;a.setState({isAnimationFinished:!0}),ce(i)&&i()}),H(pe(a),"handleAnimationStart",function(){var i=a.props.onAnimationStart;a.setState({isAnimationFinished:!1}),ce(i)&&i()}),a.state={isAnimationFinished:!r.isAnimationActive,prevIsAnimationActive:r.isAnimationActive,prevAnimationId:r.animationId,sectorToFocus:0},a}return Ti(n,[{key:"isActiveIndex",value:function(a){var i=this.props.activeIndex;return Array.isArray(i)?i.indexOf(a)!==-1:a===i}},{key:"hasActiveIndex",value:function(){var a=this.props.activeIndex;return Array.isArray(a)?a.length!==0:a||a===0}},{key:"renderLabels",value:function(a){var i=this.props.isAnimationActive;if(i&&!this.state.isAnimationFinished)return null;var s=this.props,c=s.label,l=s.labelLine,d=s.dataKey,u=s.valueKey,f=M(this.props),v=M(c),h=M(l),p=c&&c.offsetRadius||20,y=a.map(function(g,_){var A=(g.startAngle+g.endAngle)/2,N=X(g.cx,g.cy,g.outerRadius+p,A),b=F(F(F(F({},f),g),{},{stroke:"none"},v),{},{index:_,textAnchor:n.getTextAnchor(N.x,g.cx)},N),x=F(F(F(F({},f),g),{},{fill:"none",stroke:g.fill},h),{},{index:_,points:[X(g.cx,g.cy,g.outerRadius,A),N],key:"line"}),k=d;return ye(d)&&ye(u)?k="value":ye(d)&&(k=u),O.createElement(z,{key:"label-".concat(_)},l&&n.renderLabelLineItem(l,x),n.renderLabelItem(c,b,me(g,k)))});return O.createElement(z,{className:"recharts-pie-labels"},y)}},{key:"renderSectorsStatically",value:function(a){var i=this,s=this.props,c=s.activeShape,l=s.blendStroke,d=s.inactiveShape;return a.map(function(u,f){var v=d&&i.hasActiveIndex()?d:null,h=i.isActiveIndex(f)?c:v,p=F(F({},u),{},{stroke:l?u.fill:u.stroke});return O.createElement(z,ue({ref:function(g){g&&!i.sectorRefs.includes(g)&&i.sectorRefs.push(g)},tabIndex:-1,className:"recharts-pie-sector"},ut(i.props,u,f),{key:"sector-".concat(f)}),n.renderSectorItem(h,p))})}},{key:"renderSectorsWithAnimation",value:function(){var a=this,i=this.props,s=i.sectors,c=i.isAnimationActive,l=i.animationBegin,d=i.animationDuration,u=i.animationEasing,f=i.animationId,v=this.state,h=v.prevSectors,p=v.prevIsAnimationActive;return O.createElement(Qn,{begin:l,duration:d,isActive:c,easing:u,from:{t:0},to:{t:1},key:"pie-".concat(f,"-").concat(p),onAnimationStart:this.handleAnimationStart,onAnimationEnd:this.handleAnimationEnd},function(y){var g=y.t,_=[],A=s&&s[0],N=A.startAngle;return s.forEach(function(b,x){var k=h&&h[x],w=x>0?Vn(b,"paddingAngle",0):0;if(k){var P=yt(k.endAngle-k.startAngle,b.endAngle-b.startAngle),E=F(F({},b),{},{startAngle:N+w,endAngle:N+P(g)+w});_.push(E),N=E.endAngle}else{var R=b.endAngle,j=b.startAngle,V=yt(0,R-j),U=V(g),q=F(F({},b),{},{startAngle:N+w,endAngle:N+U+w});_.push(q),N=q.endAngle}}),O.createElement(z,null,a.renderSectorsStatically(_))})}},{key:"attachKeyboardHandlers",value:function(a){var i=this;a.onkeydown=function(s){if(!s.altKey)switch(s.key){case"ArrowLeft":{var c=++i.state.sectorToFocus%i.sectorRefs.length;i.sectorRefs[c].focus(),i.setState({sectorToFocus:c});break}case"ArrowRight":{var l=--i.state.sectorToFocus<0?i.sectorRefs.length-1:i.state.sectorToFocus%i.sectorRefs.length;i.sectorRefs[l].focus(),i.setState({sectorToFocus:l});break}case"Escape":{i.sectorRefs[i.state.sectorToFocus].blur(),i.setState({sectorToFocus:0});break}}}}},{key:"renderSectors",value:function(){var a=this.props,i=a.sectors,s=a.isAnimationActive,c=this.state.prevSectors;return s&&i&&i.length&&(!c||!Hn(c,i))?this.renderSectorsWithAnimation():this.renderSectorsStatically(i)}},{key:"componentDidMount",value:function(){this.pieRef&&this.attachKeyboardHandlers(this.pieRef)}},{key:"render",value:function(){var a=this,i=this.props,s=i.hide,c=i.sectors,l=i.className,d=i.label,u=i.cx,f=i.cy,v=i.innerRadius,h=i.outerRadius,p=i.isAnimationActive,y=this.state.isAnimationFinished;if(s||!c||!c.length||!ge(u)||!ge(f)||!ge(v)||!ge(h))return null;var g=ke("recharts-pie",l);return O.createElement(z,{tabIndex:this.props.rootTabIndex,className:g,ref:function(A){a.pieRef=A}},this.renderSectors(),d&&this.renderLabels(c),Ht.renderCallByParent(this.props,null,!1),(!p||y)&&Kn.renderCallByParent(this.props,c,!1))}}],[{key:"getDerivedStateFromProps",value:function(a,i){return i.prevIsAnimationActive!==a.isAnimationActive?{prevIsAnimationActive:a.isAnimationActive,prevAnimationId:a.animationId,curSectors:a.sectors,prevSectors:[],isAnimationFinished:!0}:a.isAnimationActive&&a.animationId!==i.prevAnimationId?{prevAnimationId:a.animationId,curSectors:a.sectors,prevSectors:i.curSectors,isAnimationFinished:!0}:a.sectors!==i.curSectors?{curSectors:a.sectors,isAnimationFinished:!0}:null}},{key:"getTextAnchor",value:function(a,i){return a>i?"start":a<i?"end":"middle"}},{key:"renderLabelLineItem",value:function(a,i){return O.isValidElement(a)?O.cloneElement(a,i):ce(a)?a(i):O.createElement(Gn,ue({},i,{type:"linear",className:"recharts-pie-label-line"}))}},{key:"renderLabelItem",value:function(a,i,s){if(O.isValidElement(a))return O.cloneElement(a,i);var c=s;return ce(a)&&(c=a(i),O.isValidElement(c))?c:O.createElement(lt,ue({},i,{alignmentBaseline:"middle",className:"recharts-pie-label-text"}),c)}},{key:"renderSectorItem",value:function(a,i){return O.isValidElement(a)?O.cloneElement(a,i):ce(a)?a(i):Li(a)?O.createElement(vt,ue({tabIndex:-1},i,a)):O.createElement(vt,ue({tabIndex:-1},i))}}]),n}(S.PureComponent);H(Z,"displayName","Pie");H(Z,"defaultProps",{stroke:"#fff",fill:"#808080",legendType:"rect",cx:"50%",cy:"50%",startAngle:0,endAngle:360,innerRadius:0,outerRadius:"80%",paddingAngle:0,labelLine:!0,hide:!1,minAngle:0,isAnimationActive:!Wn.isSsr,animationBegin:400,animationDuration:1500,animationEasing:"ease",nameKey:"name",blendStroke:!1,rootTabIndex:0});H(Z,"parseDeltaAngle",function(e,t){var n=Ee(t-e),r=Math.min(Math.abs(t-e),360);return n*r});H(Z,"getRealPieData",function(e){var t=e.props,n=t.data,r=t.children,a=M(e.props),i=zn(r,Kt);return n&&n.length?n.map(function(s,c){return F(F(F({payload:s},a),s),i&&i[c]&&i[c].props)}):i&&i.length?i.map(function(s){return F(F({},a),s.props)}):[]});H(Z,"parseCoordinateOfPie",function(e,t){var n=t.top,r=t.left,a=t.width,i=t.height,s=Zn(a,i),c=r+Oe(e.props.cx,a,a/2),l=n+Oe(e.props.cy,i,i/2),d=Oe(e.props.innerRadius,s,0),u=Oe(e.props.outerRadius,s,s*.8),f=e.props.maxRadius||Math.sqrt(a*a+i*i)/2;return{cx:c,cy:l,innerRadius:d,outerRadius:u,maxRadius:f}});H(Z,"getComposedData",function(e){var t=e.item,n=e.offset,r=Z.getRealPieData(t);if(!r||!r.length)return null;var a=t.props,i=a.cornerRadius,s=a.startAngle,c=a.endAngle,l=a.paddingAngle,d=a.dataKey,u=a.nameKey,f=a.valueKey,v=a.tooltipType,h=Math.abs(t.props.minAngle),p=Z.parseCoordinateOfPie(t,n),y=Z.parseDeltaAngle(s,c),g=Math.abs(y),_=d;ye(d)&&ye(f)?(kt(!1,`Use "dataKey" to specify the value of pie,
      the props "valueKey" will be deprecated in 1.1.0`),_="value"):ye(d)&&(kt(!1,`Use "dataKey" to specify the value of pie,
      the props "valueKey" will be deprecated in 1.1.0`),_=f);var A=r.filter(function(P){return me(P,_,0)!==0}).length,N=(g>=360?A:A-1)*l,b=g-A*h-N,x=r.reduce(function(P,E){var R=me(E,_,0);return P+(ge(R)?R:0)},0),k;if(x>0){var w;k=r.map(function(P,E){var R=me(P,_,0),j=me(P,u,E),V=(ge(R)?R:0)/x,U;E?U=w.endAngle+Ee(y)*l*(R!==0?1:0):U=s;var q=U+Ee(y)*((R!==0?h:0)+V*b),J=(U+q)/2,ee=(p.innerRadius+p.outerRadius)/2,ie=[{name:j,value:R,payload:P,dataKey:_,type:v}],C=X(p.cx,p.cy,ee,J);return w=F(F(F({percent:V,cornerRadius:i,name:j,tooltipPayload:ie,midAngle:J,middleRadius:ee,tooltipPosition:C},P),p),{},{value:me(P,_),startAngle:U,endAngle:q,payload:P,paddingAngle:Ee(y)*l}),w})}return F(F({},p),{},{sectors:k,data:r})});var Ui=Yn({chartName:"PieChart",GraphicalChild:Z,validateTooltipEventTypes:["item"],defaultTooltipEventType:"item",legendContent:"children",axisComponents:[{axisType:"angleAxis",AxisComp:He},{axisType:"radiusAxis",AxisComp:Qe}],formatAxisMap:Xn,defaultProps:{layout:"centric",startAngle:0,endAngle:360,cx:"50%",cy:"50%",innerRadius:0,outerRadius:"80%"}});const Wi=({intakes:e,remainingCalories:t})=>{const r=[...W.sortIntakesByRecordedAt(e).map(a=>({name:a.items.reduce((i,s,c,l)=>l.length===1?s.name:c===0?i+`${s.name}, `:c===l.length-1?i+`and ${s.name}`:i+` ${s.name}, `,""),value:a.items.reduce((i,s)=>i+s.calories,0)})),{name:"remaining",value:t}];return t<=0&&r.pop(),m(Ui,{width:250,height:250,children:[o(Z,{dataKey:"value",isAnimationActive:!1,data:r,cx:125,cy:125,innerRadius:80,outerRadius:110,children:r.map((a,i)=>{const s=a.name==="remaining"?"#a7a7a7":pt[i%pt.length];return o(Kt,{fill:s},`cell-${i}`)})}),o(Jn,{})]})},qi=()=>{const{dailyData:e,recordedIntakes:t,calConsumedPct:n,calRemainingPct:r,remainingCalories:a,consumedCalories:i,estimatedKGChange:s,color:c}=B();if(!e)return null;const{date:l}=e,d=new Intl.DateTimeFormat("en-GB",{weekday:"long",month:"numeric",day:"numeric",year:"numeric"}).format(new Date(l)),u=a>0?"remaining":"over your limit";return m("header",{className:"day-edit__header","data-testid":"day-edit-header",children:[o("div",{className:"day-edit__header__date-container",children:o("h2",{className:"day-edit__header__date","data-testid":"day-edit-header-date",children:d})}),o(Wi,{intakes:t,remainingCalories:a}),m("div",{className:"day-edit__header__titles",children:[m("p",{className:"day-edit__header__titles__title","data-testid":"day-edit-header-remaining-calories",children:[m("strong",{children:[Math.abs(a)," "]}),"calories ",u]}),o("hr",{style:{backgroundColor:c}}),i>0&&m(he,{children:[m("p",{className:"day-edit__header__titles__title","data-testid":"day-edit-header-consumed-calories",children:[o("strong",{children:Math.round(i)})," calories consumed"]}),o("hr",{style:{backgroundColor:c}})]}),m("div",{className:"day-edit__header__percentages-container",children:[m("div",{className:"day-edit__header__percentage","data-testid":"day-edit-header-consumed-percentage",children:[o("p",{className:"day-edit__header__percentage__title",children:"consumed:"}),m("p",{className:"day-edit__header__percentage__value",children:[n,"%"]})]}),m("div",{className:"day-edit__header__percentage","data-testid":"day-edit-header-remaining-percentage",children:[o("p",{className:"day-edit__header__percentage__title",children:"remaining:"}),m("p",{className:"day-edit__header__percentage__value",children:[r,"%"]})]})]}),o("hr",{style:{backgroundColor:c}}),m("p",{className:"day-edit__header__titles__title","data-testid":"day-edit-header-estimated-kg-change",children:["estimated to ",s>0?"gain":"lose",m("strong",{children:[" ",Math.abs(s)]})," kg"]}),o("hr",{style:{backgroundColor:c}})]})]})};const Gi=({mode:e,zIndex:t})=>o("div",{className:`main-screen ${e||""}`,style:{zIndex:t},"data-testid":"main-screen"});const Qi=({isModalAbove:e,isFullScreen:t=!1})=>{const n="tippy"+(e?" down":" up")+(t?" full-screen":"");return o("div",{className:n,"data-testid":"tippy"})};function ln(e,t){var c;const n=(c=e.current)==null?void 0:c.getBoundingClientRect();if(!n)return;const a=window.innerHeight-n.top<t,i={top:n.bottom+n.height/2+window.scrollY},s={bottom:window.innerHeight-n.top+n.height/2};return{isModalAbove:a,position:{...a?s:i,left:n.left+n.width/2+window.scrollX},rect:n}}const Ne=S.createContext(void 0),G=({children:e,externalStateControl:t,onClose:n,onOpen:r,onAfterClose:a})=>{const[i,s]=S.useState(""),[c,l]=S.useState(null),[d,u]=S.useState(null),[f,v]=S.useState(!1),h=()=>{if(n==null||n(),t){t.setOpenedModalName(""),a==null||a();return}s(""),a==null||a()},p=A=>{if(r==null||r(),t){t.setOpenedModalName(A);return}s(A)},{debouncedFunc:y,cancel:g}=st(()=>{h()},500),_={openedModalName:(t==null?void 0:t.openedModalName)||i,close:h,open:p,position:c,setPosition:l,isModalAbove:f,setIsModalAbove:v,modalHoverGuardZone:d,setModalHoverGuardZone:u,debouncedClose:y,cancelDebouncedClose:g};return o(Ne.Provider,{value:_,children:e})},Vi=({children:e,modalName:t,setPositionByRef:n=!1,modalHeight:r=0,externalControlFunc:a})=>{const{open:i,setPosition:s,setIsModalAbove:c}=S.useContext(Ne),l=S.useRef(null),d=S.useCallback(()=>{const f=ln(l,r),{isModalAbove:v,position:h}=f;c(v),s(h)},[r,c,s]),u=()=>{if(n&&d(),a)return a();i(t)};return S.useEffect(()=>{if(!n)return;const f=["wheel","scroll","resize"];return f.forEach(v=>{window.addEventListener(v,d)}),()=>{f.forEach(v=>{window.removeEventListener(v,d)})}},[n,d]),S.cloneElement(e,{onClick:u,ref:l})},Hi=({children:e,onClickFn:t})=>{const{close:n}=S.useContext(Ne);return S.cloneElement(e,{onClick:()=>{t==null||t(),n()}})},Ki=({children:e,modalName:t,modalHeight:n=0})=>{const{open:r,setPosition:a,setIsModalAbove:i,setModalHoverGuardZone:s,debouncedClose:c,cancelDebouncedClose:l}=S.useContext(Ne),d=S.useRef(null),{debouncedFunc:u,cancel:f}=st(v,500);function v(){const y=ln(d,n);y&&(a(y.position),i(y.isModalAbove),s({height:y.rect.height,width:y.rect.width}),r(t))}function h(){l(),u()}function p(){f(),c()}return o("div",{className:"modal-hover-open",ref:d,onMouseEnter:h,onMouseLeave:p,children:e})},zi=({children:e,name:t,className:n,mainScreenMode:r="transparent",mainScreenZIndex:a=1e3,elementId:i="app",includeTippy:s=!1,style:c={},hoverControl:l=!1})=>{const{openedModalName:d,open:u,close:f,position:v,isModalAbove:h,modalHoverGuardZone:p,debouncedClose:y,cancelDebouncedClose:g}=S.useContext(Ne),{outsideClickRef:_}=er(f);function A(){g(),u(t)}function N(){y()}return t!==d?null:_n.createPortal(m(he,{children:[!l&&o(Gi,{mode:r,zIndex:a}),m("section",{className:`modal ${n||t}`,style:{...c,zIndex:a+1,...v},ref:l?void 0:_,onMouseEnter:()=>l&&A(),onMouseLeave:()=>l&&N(),"data-testid":"modal-window",children:[s&&o(Qi,{isModalAbove:!!h}),e,l&&p&&o("div",{className:"modal-hover-guard-zone",style:{top:h?"100%":`-${p.height/2}px`,height:`${p.height/2}px`||"10%",width:`${p.width}px`||"10%"}})]})]}),document.getElementById(i))};G.OpenBtn=Vi;G.Window=zi;G.CloseBtn=Hi;G.ModalHoverOpen=Ki;function Zi(){const e=Me(),{mutate:t,isLoading:n}=Be({mutationFn:async r=>qe.removeUserFavoriteIntake(r),onSuccess:()=>{e.invalidateQueries(["favoriteIntakes"])}});return{removeFavoriteIntake:t,isLoading:n}}const un=({intake:e})=>{const{dailyData:t,openedTab:n,setOpenedTab:r,setIntake:a,updateDailyData:i,setCurrIntakeItemId:s}=B(),{addFavoriteIntake:c,isLoading:l}=nn(),{removeFavoriteIntake:d}=Zi(),u=n===T.IntakeList,f=n===T.FavoriteIntake,v=!u||f,h=de.getTotalCalories(e),p=f?e.name||e.items.map(b=>b.name).join(", "):null;function y(b){if(f)return d(b);if(!t)return;const x={...t},k=t.intakes.filter(w=>w.id!==b);i({id:x.id,data:{intakes:k}})}function g(b){if(!t)return;const x={...b};a(x),r(T.IntakeEdit),s(b.items[0].id)}function _(b){if(!t)return;const x={...b};x.id=gt(),x.recordedAt=new Date;const k=[...t.intakes,x];i({id:t.id,data:{intakes:k}})}function A(b){if(!t)return;const x={...t};let k=[...t.intakes];f?k=[...t.intakes,{...e,id:gt(),isRecorded:!0,recordedAt:new Date}]:k=t.intakes.map(w=>(w.id!==b||(w.isRecorded=!0,w.recordedAt=new Date),w)),i({id:x.id,data:{intakes:k}})}function N(b){c(b)}return l?o(Y,{containerSize:{height:"50px"}}):m("section",{className:"intake-preview","data-testid":"intake-preview",children:[p&&o("h2",{className:"intake-preview__title","data-testid":"intake-title",children:p}),o(Ue,{items:e.items,className:"intake-preview__item-list",render:b=>o("li",{className:"intake-preview__item-list__item","data-testid":"intake-preview-item",children:`${b.name} - ${b.quantity} ${b.unit} - calories: ${Math.round(b.calories)}`},b.id)}),m("p",{className:"intake-preview__total-calories",children:["total calories: ",h]}),m("div",{id:"intake-preview-btns-container",className:"intake-preview__btns-container",children:[m(G,{children:[o(G.OpenBtn,{modalName:"delete-intake",children:o("button",{className:"btn",children:"Delete"})}),m(G.Window,{name:"delete-intake",elementId:"intake-preview-btns-container",className:"delete-intake-modal",children:[o("h2",{children:"Are you sure you want to delete this intake?"}),o(G.CloseBtn,{onClickFn:()=>y(e.id),children:o("button",{className:"btn delete-btn",children:"Delete"})}),o(G.CloseBtn,{children:o("button",{className:"btn",children:"Cancel"})})]})]}),(f||u)&&o(L,{className:"btn",onClickFn:()=>g(e),children:"Edit"}),u&&o(L,{className:"btn",onClickFn:()=>_(e),children:"duplicate"}),v&&o(L,{className:"btn",onClickFn:()=>A(e.id),children:"Save"}),!f&&o(L,{className:"btn",onClickFn:()=>N(e),children:"add to fav"})]})]})};const Yi=()=>{const{dailyData:e,unrecordedIntakes:t,recordedIntakes:n,openedTab:r,isLoadingUpdate:a}=B();if(!e)return null;const i=r===T.IntakeList,c=(i?n:t).sort((d,u)=>!d.recordedAt||!u.recordedAt?0:new Date(d.recordedAt).getTime()-new Date(u.recordedAt).getTime()),l=de.getTotalCaloriesFromDailyData({dailyData:e,isRecorded:i});return m(he,{children:[m("header",{className:"intake-list__header","data-testid":"intake-list-header",children:[m("h3",{className:"intake-list__header__title",children:[i?"Recorded":"Unrecorded"," Intakes"]}),m("h4",{className:"intake-list__header__total-calories",children:["total calories: ",l]})]}),a&&o(Y,{}),!a&&o(Ue,{className:"intake-list",items:c,render:(d,u)=>{const f=d.recordedAt?`- ${wn(d.recordedAt)}`:"";return m("li",{className:"intake-list-item",children:[m("h5",{className:"intake-list-item__title",children:["Intake ",u+1,"# ",f]}),o(un,{intake:d})]},d.id)}})]})};const Xi=()=>{const{dailyData:e,isLoading:t,updateDailyData:n,isLoadingUpdate:r,setOpenedTab:a}=B(),{userDailyStats:i}=In(),{userGoal:s}=Cn(),{control:c,handleSubmit:l}=zt({defaultValues:{weight:(e==null?void 0:e.weight)||"",waist:(e==null?void 0:e.waist)||""}}),[d,u]=S.useState(!1),[f,v]=S.useState(!(e!=null&&e.weight)&&!(e!=null&&e.waist)&&!t);function h(){e&&(v(!1),!e.isWeightWaistIgnored&&(n({id:e.id,data:{isWeightWaistIgnored:!0}}),a(T.IntakeEdit)))}function p(g){e&&(n({id:e.id,data:{weight:Number(g.weight),waist:Number(g.waist)}}),v(!1))}function y(){v(!0)}return S.useEffect(()=>{!s||!i||u(An.isReachedGoalWeight({userGoal:s,userDailyStats:i}))},[s,i]),t||r?o(Y,{containerSize:{height:"75px"}}):e?f?m("form",{className:"weight-waist-form","data-testid":"weight-waist-form",onSubmit:l(p),children:[o(Ae,{control:c,name:"weight",render:({field:g})=>m("label",{className:"weight-waist-form__label",children:[o("h3",{children:"Weight"}),o("input",{...g,type:"number",className:"weight-waist-form__input",placeholder:"Enter your weight",required:!0})]})}),o(Ae,{control:c,name:"waist",render:({field:g})=>m("label",{className:"weight-waist-form__label",children:[o("h3",{children:"Waist"}),o("input",{...g,type:"number",className:"weight-waist-form__input",placeholder:"Enter your waist size",required:!0})]})}),m("div",{className:"weight-waist-form__btns-container",children:[o(L,{className:"btn",type:"submit",children:"update"}),o(L,{className:"btn",onClickFn:h,children:"dissmis"})]})]}):m(he,{children:[m("div",{className:"weight-waist-details","data-testid":"weight-waist-details",children:[o("p",{className:"weight-waist-details__title",children:"weight:"}),m("p",{className:"weight-waist-details__text",children:[e.weight," kg"]}),o("p",{className:"weight-waist-details__title",children:"waist:"}),m("p",{className:"weight-waist-details__text",children:[e.waist," cm"]})]}),o(L,{className:"btn",onClickFn:y,children:"update"}),d&&o(Sn,{})]}):null},ft="nutrition";async function Ji(e){const t=await re.get(`${ft}/chatGPT?prompt=${e}`);return fe(t)}async function es(e){const t=await re.get(`${ft}/ninja?query=${e}`);return fe(t)}async function ts(e){const t=await re.get(`${ft}/usda?query=${e}`);return fe(t)}const Ze={queryChatGPT:Ji,queryNinja:es,queryUSDA:ts};function ns(e){return ot({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M2 19V8H1V6H4V4C4 3.44772 4.44772 3 5 3H19C19.5523 3 20 3.44772 20 4V6H23V8H22V19H23V21H1V19H2ZM13 19V12H11V19H13ZM8 19V12H6V19H8ZM18 19V12H16V19H18ZM6 5V6H18V5H6Z"}}]})(e)}function rs(e){return ot({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M20.5624 10.1875C20.8124 9.5 20.8749 8.8125 20.8124 8.125C20.7499 7.4375 20.4999 6.75 20.1874 6.125C19.6249 5.1875 18.8124 4.4375 17.8749 4C16.8749 3.5625 15.8124 3.4375 14.7499 3.6875C14.2499 3.1875 13.6874 2.75 13.0624 2.4375C12.4374 2.125 11.6874 2 10.9999 2C9.9374 2 8.8749 2.3125 7.9999 2.9375C7.1249 3.5625 6.4999 4.4375 6.1874 5.4375C5.4374 5.625 4.8124 5.9375 4.1874 6.3125C3.6249 6.75 3.1874 7.3125 2.8124 7.875C2.24991 8.8125 2.06241 9.875 2.18741 10.9375C2.31241 12 2.7499 13 3.4374 13.8125C3.1874 14.5 3.1249 15.1875 3.1874 15.875C3.2499 16.5625 3.4999 17.25 3.8124 17.875C4.3749 18.8125 5.1874 19.5625 6.1249 20C7.1249 20.4375 8.1874 20.5625 9.2499 20.3125C9.7499 20.8125 10.3124 21.25 10.9374 21.5625C11.5624 21.875 12.3124 22 12.9999 22C14.0624 22 15.1249 21.6875 15.9999 21.0625C16.8749 20.4375 17.4999 19.5625 17.8124 18.5625C18.4999 18.4375 19.1874 18.125 19.7499 17.6875C20.3124 17.25 20.8124 16.75 21.1249 16.125C21.6874 15.1875 21.8749 14.125 21.7499 13.0625C21.6249 12 21.2499 11 20.5624 10.1875ZM13.0624 20.6875C12.0624 20.6875 11.3124 20.375 10.6249 19.8125C10.6249 19.8125 10.6874 19.75 10.7499 19.75L14.7499 17.4375C14.8749 17.375 14.9374 17.3125 14.9999 17.1875C15.0624 17.0625 15.0624 17 15.0624 16.875V11.25L16.7499 12.25V16.875C16.8124 19.0625 15.0624 20.6875 13.0624 20.6875ZM4.9999 17.25C4.5624 16.5 4.3749 15.625 4.5624 14.75C4.5624 14.75 4.6249 14.8125 4.6874 14.8125L8.6874 17.125C8.8124 17.1875 8.8749 17.1875 8.9999 17.1875C9.1249 17.1875 9.2499 17.1875 9.3124 17.125L14.1874 14.3125V16.25L10.1249 18.625C9.2499 19.125 8.2499 19.25 7.3124 19C6.3124 18.75 5.4999 18.125 4.9999 17.25ZM3.9374 8.5625C4.3749 7.8125 5.0624 7.25 5.8749 6.9375V7.0625V11.6875C5.8749 11.8125 5.8749 11.9375 5.9374 12C5.9999 12.125 6.0624 12.1875 6.1874 12.25L11.0624 15.0625L9.3749 16.0625L5.3749 13.75C4.4999 13.25 3.8749 12.4375 3.6249 11.5C3.3749 10.5625 3.4374 9.4375 3.9374 8.5625ZM17.7499 11.75L12.8749 8.9375L14.5624 7.9375L18.5624 10.25C19.1874 10.625 19.6874 11.125 19.9999 11.75C20.3124 12.375 20.4999 13.0625 20.4374 13.8125C20.3749 14.5 20.1249 15.1875 19.6874 15.75C19.2499 16.3125 18.6874 16.75 17.9999 17V12.25C17.9999 12.125 17.9999 12 17.9374 11.9375C17.9374 11.9375 17.8749 11.8125 17.7499 11.75ZM19.4374 9.25C19.4374 9.25 19.3749 9.1875 19.3124 9.1875L15.3124 6.875C15.1874 6.8125 15.1249 6.8125 14.9999 6.8125C14.8749 6.8125 14.7499 6.8125 14.6874 6.875L9.8124 9.6875V7.75L13.8749 5.375C14.4999 5 15.1874 4.875 15.9374 4.875C16.6249 4.875 17.3124 5.125 17.9374 5.5625C18.4999 6 18.9999 6.5625 19.2499 7.1875C19.4999 7.8125 19.5624 8.5625 19.4374 9.25ZM8.9374 12.75L7.2499 11.75V7.0625C7.2499 6.375 7.4374 5.625 7.8124 5.0625C8.1874 4.4375 8.7499 4 9.3749 3.6875C9.9999 3.375 10.7499 3.25 11.4374 3.375C12.1249 3.4375 12.8124 3.75 13.3749 4.1875C13.3749 4.1875 13.3124 4.25 13.2499 4.25L9.2499 6.5625C9.1249 6.625 9.0624 6.6875 8.9999 6.8125C8.9374 6.9375 8.9374 7 8.9374 7.125V12.75ZM9.8124 10.75L11.9999 9.5L14.1874 10.75V13.25L11.9999 14.5L9.8124 13.25V10.75Z"}}]})(e)}const as=()=>o("div",{className:"dot-loader","data-testid":"dot-loader"}),Ye=({queryState:{type:e,status:t,error:n,response:r}})=>t==="loading"?o(as,{}):t==="error"&&n?o(ct,{msg:n}):t==="success"?m("section",{"data-testid":"nutrition-query-response-handler",children:[e==="chatGPT"&&o("p",{children:r}),e==="ninjaAPI"&&o("ul",{className:"nutrition-query__results__item__list","data-testid":"nutrition-query-response-ninja-api-response",children:r.map((a,i)=>o("li",{children:Object.entries(a).map(([s,c])=>s==="name"?o("strong",{children:a.name},s):m("div",{children:[m("span",{children:[s,":"]}),o("span",{children:c})]},s))},i))}),e==="usdaAPI"&&o("ul",{className:"nutrition-query__results__item__list","data-testid":"nutrition-query-response-usda-api-response",children:r.map((a,i)=>{const s=Object.entries(a);return o("li",{children:s.map(([c,l])=>c==="description"?o("strong",{children:a.description},c):m("div",{children:[m("span",{children:[c,":"]}),o("span",{children:l})]},c))},i)})})]}):null;const is=()=>{const{chatGPTQuery:e,setChatGPTQuery:t,ninjaAPIQuery:n,setNinjaAPIQuery:r,USDAAPIQuery:a,setUSDAAPIQuery:i}=B(),{control:s,handleSubmit:c}=zt({defaultValues:{chatGPTQuery:"",ninjaAPIQuery:"",USDAAPIQuery:""}});async function l(d){if(d.chatGPTQuery)try{t({...e,status:"loading"});const u=await Ze.queryChatGPT(d.chatGPTQuery);t({...e,status:"success",response:u})}catch(u){t({...e,status:"error",error:u instanceof Error?u.message:"An unknown error occurred."})}if(d.ninjaAPIQuery)try{r({...n,status:"loading"});const u=await Ze.queryNinja(d.ninjaAPIQuery);r({...n,status:"success",response:u})}catch(u){r({...n,status:"error",error:u instanceof Error?u.message:"An unknown error occurred."})}if(d.USDAAPIQuery)try{i({...a,status:"loading"});const u=await Ze.queryUSDA(d.USDAAPIQuery);i({...a,status:"success",response:u})}catch(u){i({...a,status:"error",error:u instanceof Error?u.message:"An unknown error occurred."})}}return m("section",{className:"nutrition-query","data-testid":"nutrition-query",children:[m("section",{className:"nutrition-query__desc",children:[o("p",{children:"This tab let's you query the APIs used by the app."}),m("ul",{children:[o("li",{children:"The first one is a chatbot that generates a response based on the input"}),o("li",{children:"The second one is a food database."}),o("li",{children:"The third one is a nutrition database."})]})]}),m("form",{className:"nutrition-query__form",autoComplete:"off","data-testid":"nutrition-query-form",children:[m("label",{htmlFor:"chatGPTQuery",children:[o("span",{children:"Chat GPT"}),o(rs,{})]}),o(Ae,{name:"chatGPTQuery",control:s,render:({field:d})=>o("textarea",{id:"chatGPTQuery",...d})}),m("label",{htmlFor:"ninjaAPIQuery",children:[o("span",{children:"Ninja API"}),o(Pn,{})]}),o(Ae,{name:"ninjaAPIQuery",control:s,render:({field:d})=>o("input",{id:"ninjaAPIQuery",...d})}),m("label",{htmlFor:"USDAAPIQuery",children:[o("span",{children:"USDA API"}),o(ns,{})]}),o(Ae,{name:"USDAAPIQuery",control:s,render:({field:d})=>o("input",{id:"USDAAPIQuery",...d})}),o(L,{onClickFn:c(l),children:"query"})]}),m("div",{className:"nutrition-query__results",children:[e.status!=="idle"&&m("div",{className:"nutrition-query__results__item",children:[o("h1",{children:"Chat GPT Response:"}),o(Ye,{queryState:e})]}),n.status!=="idle"&&m("div",{className:"nutrition-query__results__item",children:[o("h1",{children:"Ninja API Response:"}),o(Ye,{queryState:n})]}),a.status!=="idle"&&m("div",{className:"nutrition-query__results__item",children:[o("h1",{children:"USDA API Response:"}),o(Ye,{queryState:a})]})]})]})};const Bt=[{name:"cup (250ml)",value:250},{name:"bottle (750ml)",value:750},{name:"1.5 Liter",value:1500}],ss=()=>{const{dailyData:e,updateDailyData:t,recommendedWaterIntake:n}=B(),[r,a]=S.useState("");function i(c){a(c.name)}function s(){if(!e)return;const c=Bt.find(u=>u.name===r);if(!c)return Je.error("Please select a value");const l=W.getDefaultIntake();l.recordedAt=new Date,l.type="drink",l.items[0].quantity=c.value,l.items[0].unit=Dn.MILLILITER,l.items[0].name="water",l.items[0].calories=0;const d=[...e.intakes,l];t({id:e.id,data:{intakes:d}})}return m("section",{className:"water-edit","data-testid":"water-edit",children:[o("h2",{className:"water-edit__title",children:`Recommended water intake: ${n} ml`}),o("div",{className:"water-edit__btns-values-container",children:Bt.map(c=>o(L,{className:ke("btn",{"btn-selected":r===c.name}),onClickFn:()=>i(c),children:c.name},c.value))}),o(L,{className:"water-edit__btn-save",onClickFn:s,children:"Save"})]})};const os=()=>{const{favoriteIntakes:e,isErrorFavoriteIntakes:t,isLoadingFavoriteIntakes:n,isSuccessFavoriteIntakes:r,isEmptyFavoriteIntakes:a}=B(),{updateFavoriteIntake:i}=rn(),[s,c]=S.useState(Xe(e));function l(f,v){return{background:f?"var(--color-warning)":"",transform:f?"rotate(7deg)":"",...v}}function d(f){if(!f.destination||!s)return;const h=((y,g,_)=>{const A=Array.from(y),[N]=A.splice(g,1);return A.splice(_,0,N),A})(s,f.source.index,f.destination.index);c(h);const p={...h[f.destination.index]};p.sortOrder=f.destination.index,i(p)}function u(f){const{value:v}=f.target;if(!e)return c(Xe(e));const h=e==null?void 0:e.filter(p=>p.name.toLowerCase().includes(v.toLowerCase())||p.items.some(y=>y.name.toLowerCase().includes(v.toLowerCase())));c(h)}return S.useEffect(()=>{c(Xe(e))},[e]),m("section",{className:"day-edit__favorite-intakes","data-testid":"day-edit-favorite-intakes",children:[o("input",{type:"text",className:"day-edit__favorite-intakes__input",autoComplete:"off",placeholder:"Search...",onChange:u}),n&&o(Y,{}),r&&!a&&o(nr,{onDragEnd:d,children:o(rr,{droppableId:"droppable",children:f=>m("ul",{className:"list day-edit__favorite-intakes__list",...f.droppableProps,ref:f.innerRef,children:[s.map((v,h)=>o(ar,{draggableId:v.id,index:h,children:(p,y)=>o("li",{ref:p.innerRef,...p.draggableProps,...p.dragHandleProps,style:l(y.isDragging,p.draggableProps.style),className:"day-edit__favorite-intakes__list__item",children:o(un,{intake:v})})},v.id)),f.placeholder]})})}),r&&a&&o(ir,{entityName:"favorite intake"}),t&&o(ct,{msg:"Couldn't get favorite intake. Please try again later."})]})};function Xe(e){return e?e==null?void 0:e.sort((t,n)=>t.sortOrder-n.sortOrder):[]}const cs=()=>{const{loggedInUser:e}=je(),{dailyData:t,updateDailyData:n,isLoadingUpdate:r}=B(),[a,i]=S.useState(null);function s(){const h=Nn.getDefaultWorkout();i(h)}function c(h){if(!a)return;const p=h.target.value,y={...a,description:p};i(y)}function l(h){if(!a)return;const p={...a,type:h};i(p)}function d(h){if(!a)return;const p=Number(h.target.value),y={...a,durationInMin:p};i(y)}function u(h){if(!a)return;const p={...a,split:h};i(p)}function f(){i(null)}function v(){if(!a||!t||!e)return;const{id:h,...p}=a,y={...p,userId:e.id},g=[...t.workouts,y];n({id:t.id,data:{workouts:g}}),i(null)}return t?m("section",{className:"day-edit__day-workouts","data-testid":"day-workouts",children:[o(L,{className:"day-edit__day-workouts__btn",onClickFn:s,children:"add quick workout"}),a&&m("form",{className:"day-edit__day-workouts__quick-workout-form","data-testid":"quick-workout-form",children:[o(tr,{workout:a,handleTypeSelectChange:l,handleDurationInputChange:d,handleDescInputChange:c,handleSplitSelectChange:u}),m("div",{className:"day-edit__day-workouts__quick-workout-form__btns-container",children:[o(L,{onClickFn:f,children:"cancel"}),o(L,{onClickFn:v,children:"save"})]})]}),r?o(Y,{containerSize:{height:"50px"}}):o(Ue,{className:"day-edit__day-workouts__workouts-list",items:t.workouts,render:h=>o(sr,{workout:h,updateDailyData:n},h.id),dataTestId:"workouts-list"})]}):null};const ls=()=>{const{dailyData:e,goals:t,isLoadingGoals:n,isSuccessGoals:r,isErrorGoals:a,isEmptyGoals:i}=B();return e?m("section",{className:"day-goals",children:[o(or,{type:"day",date:e.date}),o(cr,{className:"day-goals__list",items:t,render:s=>o(lr,{goal:s,isEditEnabled:!0},s.id),isLoading:n,isError:a,isSuccess:r,isEmpty:i,entityName:"goal"})]}):null};function us(e){return ot({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M10 2h4"}},{tag:"path",attr:{d:"M12 14v-4"}},{tag:"path",attr:{d:"M4 13a8 8 0 0 1 8-7 8 8 0 1 1-5.3 14L4 17.6"}},{tag:"path",attr:{d:"M9 17H4v5"}}]})(e)}const ds=()=>{const[e,t]=S.useState(300),[n,r]=S.useState(!1),a=S.useRef(null);function i(){t(l=>l+10*60),r(!1)}function s(){t(5*60),r(!1)}function c(){r(l=>!l)}return S.useEffect(()=>{const{current:l}=a;if(n){const d=setInterval(()=>{t(u=>u>=0?u-.01:(r(!1),"vibrate"in navigator&&navigator.vibrate([200,100,300,100,500]),clearInterval(d),0))},10);a.current=d}else l&&clearInterval(l);return()=>{l&&clearInterval(l)}},[n,t,r]),m("section",{className:"hunger-timer",children:[o("div",{className:"hunger-timer__time",children:o("span",{children:On(e)})}),m("div",{className:"hunger-timer__controls",children:[o(L,{className:"hunger-timer__controls__btn",onClickFn:i,children:o("span",{children:"+10m"})}),o(L,{className:"hunger-timer__controls__btn",onClickFn:s,children:o(us,{})}),o(L,{className:"hunger-timer__controls__btn",onClickFn:c,children:n?o(xn,{}):o(En,{})})]})]})},fs=()=>{const{dailyData:e,updateDailyData:t,isLoadingUpdate:n}=B(),[r,a]=S.useState(1);if(!e)return null;const i=e.hungerEvents.sort((l,d)=>new Date(d.date).getTime()-new Date(l.date).getTime());function s(l){if(!e)return null;a(d=>{const u=d+l;return u<1||u>5?d:u})}function c(){if(!e||n)return null;t({id:e.id,data:{hungerEvents:[...e.hungerEvents,{level:r,date:new Date}]}})}return m("section",{className:"hunger-meter",children:[m("p",{className:"hunger-meter__desc",children:["This is the ",o("strong",{children:"hunger meter"}),".",o("br",{})," The point is to track your hunger level throughout the day. You can set the level by clicking the buttons below, add a hunger event by clicking the button below."]}),m("section",{className:"hunger-meter__level-setter",children:[o("h3",{children:"hunger level"}),n?o(Y,{containerSize:{height:"50px"}}):m(he,{children:[m("div",{className:"hunger-meter__level-setter__btns",children:[o(L,{onClickFn:()=>s(-1),children:o(qt,{})}),o("span",{children:r}),o(L,{onClickFn:()=>s(1),children:o(Gt,{})})]}),o(L,{onClickFn:c,children:"add hunger event"})]})]}),i.length>0&&m("section",{className:"hunger-meter__events",children:[o("h3",{children:"hunger events"}),o("div",{className:"hunger-meter__events__table-container",children:m("table",{children:[o("thead",{children:m("tr",{children:[o("th",{children:"time"}),o("th",{children:"level"})]})}),o("tbody",{children:i.map((l,d)=>{const u=new Intl.DateTimeFormat("en-GB",{hour:"numeric",minute:"numeric",second:"numeric"}).format(new Date(l.date));return m("tr",{children:[o("td",{children:u}),o("td",{children:l.level})]},d)})})]})})]}),o(ds,{})]})},hs=()=>{const{dailyData:e,isLoading:t,isSuccess:n,isError:r,openedTab:a,backgroundColor:i,color:s}=B(),c=n&&e&&!t,l=a===T.IntakeList||a===T.UnRecordedIntakeList;return m("section",{className:"day-edit",style:{backgroundColor:i,color:s,border:`5px solid ${i}`},"data-testid":"day-edit",children:[t&&o(Y,{}),r&&o(ct,{}),c&&m(he,{children:[o(qi,{}),o(Ea,{}),a===T.WeightWaistInput&&o(Xi,{}),a===T.IntakeEdit&&o(xa,{}),a===T.Workouts&&o(cs,{}),a===T.FavoriteIntake&&o(os,{}),l&&o(Yi,{}),a===T.Query&&o(is,{}),a===T.Water&&o(ss,{}),a===T.Goals&&o(ls,{}),a===T.HungerMeter&&o(fs,{})]})]})};const ms=()=>{const e=Rn();return m("div",{className:"login-signup-msg","data-testid":"login-signup-msg",children:[o("div",{className:"login-signup-msg-text-container",children:o("h1",{children:"Start Your Journey Now!"})}),o("div",{className:"login-signup-msg-btn-container",children:[{title:"Log in",className:"btn-login",path:"/login"},{title:"Sign up",className:"btn-signup",path:"/signup"}].map(n=>o("button",{className:n.className,onClick:()=>{e(n.path)},children:n.title},n.title))})]})};function ps(){const e=Me(),{mutate:t,isLoading:n}=Be({mutationFn:Ln.create,onSuccess:()=>{e.invalidateQueries(["today"])}});return{createDay:t,isLoading:n}}const Rs=()=>{const{loggedInUser:e}=je(),{dailyData:t}=Ut(),{createDay:n,isLoading:r}=ps(),{backgroundColor:a,color:i}=Wt(),s=e&&!r,c=e&&t&&!gs(t);Tn({title:"Home / Kceli"});function l(){const d=new Date().toDateString();n({date:d})}return m("main",{className:"home","data-testid":"home-page",children:[!e&&o(ms,{}),s&&o(va,{children:o(hs,{})}),r&&o(Y,{}),c&&m(G,{children:[o(G.OpenBtn,{modalName:"create-day",children:o("button",{className:"home__btn","data-testid":"create-day-open-modal-btn",style:{backgroundColor:a,color:i},children:"start a new day"})}),m(G.Window,{name:"create-day",className:"create-day-modal",children:[m("h2",{className:"create-day-modal__title",children:["Are you sure you want to start a new day? ",o("br",{})]}),o(G.CloseBtn,{onClickFn:l,children:o("button",{className:"btn create-day-modal__btn","data-testid":"create-day-modal-btn",children:"start a new day"})}),o(G.CloseBtn,{children:o("button",{className:"btn create-day-modal__btn",children:"cancel"})})]})]})]})};function gs(e){const t=new Date().toDateString(),n=new Date(e.date).toDateString();return t===n}export{Rs as default};
