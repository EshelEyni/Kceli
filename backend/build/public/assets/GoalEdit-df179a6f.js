import{t as f,o as W,p as L,a4 as v,r as _,j as o,S as b,m as l,F as C,B as u}from"./index-5efcc07c.js";import{c as N}from"./index-7394d37a.js";function D({type:t,date:a=new Date}){const i={id:f(),userId:"",description:"",type:t,isCompleted:!1,date:a};return t!=="user"?{...i,type:t}:{...i,userWeightLossGoal:{startingWeight:0,weightGoal:0}}}const g={getDefaultGoal:D};function S(){const t=W(),{mutate:a,isLoading:i}=L({mutationFn:v.addGoal,onSuccess:()=>{t.invalidateQueries(["goals"]),t.invalidateQueries(["userGoal"])}});return{addGoal:a,isLoading:i}}const A=({type:t,setIsGoalEditing:a,date:i})=>{const{addGoal:c,isLoading:d}=S(),[e,n]=_.useState(g.getDefaultGoal({type:t,date:i}));function h(s){s.preventDefault(),n({...e,description:s.target.value})}function p(s){if(s.preventDefault(),!("userWeightLossGoal"in e))return;const r=Number(s.target.valueAsNumber);n({...e,userWeightLossGoal:{...e.userWeightLossGoal,startingWeight:r}})}function G(s){if(s.preventDefault(),!("userWeightLossGoal"in e))return;const r=Number(s.target.valueAsNumber);n({...e,userWeightLossGoal:{...e.userWeightLossGoal,weightGoal:r}})}function m(){c(e),n(g.getDefaultGoal({type:t,date:i})),a==null||a(!1)}return d?o(b,{containerSize:{height:"50px"}}):l("form",{className:"goal-edit",children:[t==="user"?l(C,{children:[o("input",{type:"number",className:"goal-edit__input",placeholder:"Enter your starting weight",onChange:p}),o("input",{type:"number",className:"goal-edit__input",placeholder:"Enter your goal weight",onChange:G})]}):o("input",{type:"text",className:"goal-edit__input",placeholder:"Enter your goal description",value:e.description,onChange:h}),l("div",{className:"goal-edit__btns",children:[o(u,{className:N("goal-edit__btns__btn ",{active:e.description||"userWeightLossGoal"in e&&e.userWeightLossGoal.startingWeight&&e.userWeightLossGoal.weightGoal}),isDisabled:"userWeightLossGoal"in e?!e.userWeightLossGoal.startingWeight||!e.userWeightLossGoal.weightGoal:!e.description,onClickFn:m,children:"Add Goal"}),a&&o(u,{className:"dismiss",onClickFn:()=>a(!1),children:"dismiss"})]})]})};export{A as G};
