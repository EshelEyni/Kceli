import{t as f,o as W,p as L,a4 as v,r as _,j as i,S as b,m as l,F as C,B as u}from"./index-8703e784.js";import{c as N}from"./index-a60e8904.js";function D({type:t,date:a=new Date}){const o={id:f(),userId:"",description:"",type:t,isCompleted:!1,date:a};return t!=="user"?{...o,type:t}:{...o,userWeightLossGoal:{startingWeight:0,weightGoal:0}}}const g={getDefaultGoal:D};function S(){const t=W(),{mutate:a,isLoading:o}=L({mutationFn:v.addGoal,onSuccess:()=>{t.invalidateQueries(["goals"])}});return{addGoal:a,isLoading:o}}const A=({type:t,setIsGoalEditing:a,date:o})=>{const{addGoal:c,isLoading:d}=S(),[e,n]=_.useState(g.getDefaultGoal({type:t,date:o}));function h(s){s.preventDefault(),n({...e,description:s.target.value})}function p(s){if(s.preventDefault(),!("userWeightLossGoal"in e))return;const r=Number(s.target.valueAsNumber);n({...e,userWeightLossGoal:{...e.userWeightLossGoal,startingWeight:r}})}function m(s){if(s.preventDefault(),!("userWeightLossGoal"in e))return;const r=Number(s.target.valueAsNumber);n({...e,userWeightLossGoal:{...e.userWeightLossGoal,weightGoal:r}})}function G(){c(e),n(g.getDefaultGoal({type:t,date:o})),a==null||a(!1)}return d?i(b,{containerSize:{height:"50px"}}):l("form",{className:"goal-edit",children:[t==="user"?l(C,{children:[i("input",{type:"number",className:"goal-edit__input",placeholder:"Enter your starting waist",onChange:p}),i("input",{type:"number",className:"goal-edit__input",placeholder:"Enter your goal weight",onChange:m})]}):i("input",{type:"text",className:"goal-edit__input",placeholder:"Enter your goal description",value:e.description,onChange:h}),l("div",{className:"goal-edit__btns",children:[i(u,{className:N("goal-edit__btns__btn ",{active:e.description||"userWeightLossGoal"in e&&e.userWeightLossGoal.startingWeight&&e.userWeightLossGoal.weightGoal}),isDisabled:!e.description||"userWeightLossGoal"in e&&!e.userWeightLossGoal.startingWeight&&!e.userWeightLossGoal.weightGoal,onClickFn:G,children:"Add Goal"}),a&&i(u,{className:"dismiss",onClickFn:()=>a(!1),children:"dismiss"})]})]})};export{A as G};
