import{af as k,r as o,j as e,z as M,m as u,F as $,B as f,E as D,H,I as L,D as x,S as P}from"./index-26b4495b.js";import{E as N}from"./ErrorMsg-a64f4cf9.js";import{L as S}from"./List-ee6ca80d.js";import{g as U,h as z,i as j,j as A}from"./index.esm-e2df6728.js";import{a as G,b as V}from"./index.esm-a40f1268.js";import{b as K}from"./index.esm-ac606270.js";import{c as O}from"./index-e7a07546.js";import{u as q}from"./usePageLoaded-12442b19.js";const J=({children:t})=>{const{isRunning:n}=k(),i=o.useRef(null),a=o.useRef(0),[c,s]=o.useState(I(1));return o.useEffect(()=>{const{current:l}=i;if(n){const d=setInterval(()=>{s(I(a.current)),a.current=a.current===100?0:a.current+1},10);i.current=d}else l&&clearInterval(l),s(I(0));return()=>{l&&clearInterval(l)}},[n]),e("div",{className:"seconds-circle","data-testid":"seconds-circle",style:{background:c},children:t})};function I(t){return`radial-gradient(closest-side,  var(--color-background) 85%, transparent 87%),
        conic-gradient(var(--color-text-gray) ${t}%, var(--color-background-light) 0)`}const Q=({children:t})=>{const{initialTime:n,time:i,isRunning:a}=k(),c=o.useRef(null),[s,l]=o.useState(T(1));return o.useEffect(()=>{const{current:d}=c;if(a){const h=setInterval(()=>{const m=Math.abs((i-n)*60)/(n*60)*100;l(T(m))},10);c.current=h}else d&&clearInterval(d);return()=>{d&&clearInterval(d)}},[a,n,i]),o.useEffect(()=>{const h=Math.abs((i-n)*60)/(n*60)*100;l(T(h))},[n,i]),e("div",{className:"item-duration-circle","data-testid":"item-duration-circle",style:{background:s},children:e("div",{className:"item-duration-circle__border",children:t})})};function T(t){return`conic-gradient(var(--color-info) ${Math.max(t,.25)}%, var(--color-background-light) 0)`}const X=({children:t})=>{const{duration:n,completedDuration:i}=k(),a=i/n*100,[c,s]=o.useState(F(a||1));return o.useEffect(()=>{const l=i/n*100;s(F(l))},[i,n]),e("div",{className:"total-duration-circle","data-testid":"total-duration-circle",style:{background:c},children:e("div",{className:"total-duration-circle__border",children:t})})};function F(t){return`conic-gradient(#6A0DAD ${Math.max(t,.25)}%, var(--color-background-light) 0)`}function Y(t){return M({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"}},{tag:"path",attr:{d:"M13 8v8h-3V8h3m0-3h-3C8.34 5 7 6.34 7 8v8c0 1.66 1.34 3 3 3h3c1.66 0 3-1.34 3-3V8c0-1.66-1.34-3-3-3zM1 8h2v11h3V5H1v3zm17.5 3c-.83 0-1.5.68-1.5 1.5v2c0 .82.67 1.5 1.5 1.5H21v1h-4v2h4.5c.83 0 1.5-.67 1.5-1.5v-2c0-.83-.67-1.5-1.5-1.5H19v-1h4v-2h-4.5z"}}]})(t)}function Z(){return new Worker("/assets/timerWorker-8ab54d15.js")}function E({sound:t,isRunning:n,time:i,setTime:a,onEndTime:c}){const s=o.useRef(),l=o.useRef(i);o.useEffect(()=>{l.current=i},[i]),o.useEffect(()=>{if(s.current=new Z,t.load(),!!s.current)return s.current.onmessage=d=>{if(d.data==="tick"&&l.current>=.01)return a(_=>_-.01);const h=c();!s.current||!h||s.current.postMessage({action:"stop"})},()=>{s.current&&s.current.terminate()}},[]),o.useEffect(()=>{s.current&&(n?s.current.postMessage({action:"start",interval:10}):s.current.postMessage({action:"stop"}))},[n])}const y=new Audio("/assets/sounds/Buzzer.mp3"),W={work:60,rest:120},ee=()=>{const[t,n]=o.useState(!1),[i,a]=o.useState(W),[c,s]=o.useState(i.work),[l,d]=o.useState(!1),h=o.useRef("work"),_=o.useRef(W);E({sound:y,time:c,setTime:s,isRunning:l,onEndTime:()=>{y.volume=.5,y.play();const r=h.current==="work"?"rest":"work";return h.current=r,s(_.current[r]),!1}});function m(){c<=0||d(r=>!r)}function w(){n(r=>!r),t&&(s(i.work),_.current=i)}function p(r){a(g=>({...g,work:+r.target.value}))}function v(r){a(g=>({...g,rest:+r.target.value}))}return u($,{children:[u("div",{className:"hiit-timer",children:[e(f,{className:"hiit-timer__btn",onClickFn:m,children:l?e(U,{"data-testid":"pause-icon"}):e(z,{"data-testid":"play-icon"})}),e("span",{className:"timer__count",children:D(c)}),e(f,{className:"hiit-timer__btn",onClickFn:w,children:e(K,{})})]}),t&&u("div",{className:"hiit-settings",children:[u("div",{className:"hiit-settings__input",children:[e("label",{htmlFor:"work",className:"hiit-settings__input__label",children:"Work"}),e("input",{className:"hiit-settings__input__input",type:"number",value:i.work,onChange:p,id:"work"})]}),u("div",{className:"hiit-settings__input",children:[e("label",{htmlFor:"rest",className:"hiit-settings__input__label",children:"Rest"}),e("input",{className:"hiit-settings__input__input",type:"number",value:i.rest,onChange:v,id:"rest"})]})]})]})},b=new Audio("/assets/sounds/SamsungRingtoneSoundEffect.mp3"),te=()=>{const[t,n]=o.useState(!1),{time:i,setTime:a,isRunning:c,setIsRunning:s,onResetTimer:l,setInitialTime:d}=k();E({sound:b,time:i,setTime:a,isRunning:c,onEndTime:()=>(b.volume=.5,b.play(),s(!1),a(0),!0)});function h(){i<=0||s(p=>!p)}function _(){a(0),d(0),s(!1)}function m(){a(p=>p+10),d(p=>p+10)}function w(){n(p=>!p)}return u("section",{className:"timer","data-testid":"timer",children:[e(X,{children:e(Q,{children:e(J,{children:e("div",{className:"clock-wrapper",children:e("span",{className:"timer__count",children:D(i)})})})})}),t&&e(ee,{}),u("div",{className:"timer__controls",children:[e(f,{className:"timer__controls__btn",onClickFn:w,children:t?e(G,{"data-testid":"timer-off-icon"}):e(V,{"data-testid":"timer-on-icon"})}),e(f,{className:"timer__controls__btn",onClickFn:_,children:e(j,{"data-testid":"clear-icon"})}),e(f,{className:"timer__controls__btn",onClickFn:m,children:e(Y,{"data-testid":"increment-icon"})}),e(f,{className:"timer__controls__btn",onClickFn:h,children:c?e(H,{"data-testid":"pause-icon"}):e(L,{"data-testid":"play-icon"})}),e(f,{className:"timer__controls__btn",onClickFn:l,children:e(A,{"data-testid":"reset-icon"})})]})]})};const C=({item:t})=>{const{currItem:n,setCurrItem:i,isWorkoutStarted:a,onCompleteItem:c,onResetTimer:s}=k(),[l,d]=o.useState(t.type!=="aerobic"?t.sets:null),h=(n==null?void 0:n.id)===t.id;function _(){if(!(h||t.isCompleted)){if(i(t),t.type==="aerobic")return;d(t.sets)}}function m(){t.type==="anaerobic"&&(d(r=>r===0||typeof r!="number"?r:r-1),s(),l===1&&(c(t),d(null)))}function w(){return!h||!a||t.isCompleted?null:u("div",{className:"workout-item-display__btns-container "+O({aerobic:(n==null?void 0:n.type)==="aerobic"}),"data-testid":"workout-item-display-btns-container",children:[(n==null?void 0:n.type)!=="aerobic"&&e(f,{className:"workout-item-display__btns-container__btn-set-num",isDisabled:!a,onClickFn:m,children:e("span",{children:l})}),e(f,{className:"workout-item-display__btns-container__btn",isDisabled:!a,onClickFn:()=>c(t),children:"complete"})]})}function p(){return t.type!=="superset"?null:e("ul",{className:"workout-item-display__info__superset-set-list","data-testid":"workout-item-display-info-superset-set-list",children:t.items.map((r,g)=>{const B=r.weightUnit==="kg"||r.weightUnit==="lbs"?`${r.weight} ${r.weightUnit}`:r.weightUnit;return e("li",{className:"workout-item-display__info__superset-set-list__item",children:`${r.name} - ${r.reps} reps - ${B}`},g)})})}function v(){const r=`${t.name} - ${x.calcItemDuration(t)} min`;switch(t.type){case"anaerobic":{const R=t.weightUnit==="kg"||t.weightUnit==="lbs"?`${t.weight} ${t.weightUnit}`:t.weightUnit;return`${r} - ${t.sets} * ${t.reps} - ${R} - ${t.restInSec}s rest`}case"superset":return`${r} - ${t.sets} sets - ${t.items.length} items - ${t.restInSec}s rest`;default:return r}}return u("section",{className:"workout-item-display",onClick:_,children:[u("div",{className:"workout-item-display__info","data-testid":"workout-item-display-info",children:[e("h4",{className:"workout-item-display__info__title","data-testid":"workout-item-display-info-title",children:v()}),p()]}),w()]})},de=()=>{q({title:"Workout / Kceli"});const{workout:t,unCompletedItems:n,completedItems:i,isLoading:a,isSuccess:c,isError:s,duration:l,isWorkoutStarted:d,isLoadingUpdateDailyData:h,onStart:_}=k();return s?e(N,{}):!c||!t?null:u("main",{className:"page workout-details","data-testid":"workout-details",children:[(a||h)&&e(P,{containerSize:{height:"100px"}}),s&&e(N,{}),c&&!t&&e(N,{msg:"Workout not found"}),c&&t&&u("div",{className:"workout-details__wrapper",children:[u("section",{className:"workout-details__info",children:[u("div",{className:"workout-details__info__item",children:[e("h2",{children:"description:"}),u("h3",{children:[" ",t.description]})]}),u("div",{className:"workout-details__info__item",children:[e("h2",{children:"duration: "}),u("h3",{children:[l," min"]})]}),u("div",{className:"workout-details__info__item",children:[e("h2",{children:"type: "}),e("h3",{children:t.type})]}),"split"in t&&u("div",{className:"workout-details__info__item",children:[e("h2",{children:"split: "})," ",e("h3",{children:t.split})]}),!d&&e(f,{onClickFn:_,children:"Start"})]}),!d&&u($,{children:[e("h2",{className:"workout-details__title",children:"items:"}),e(S,{items:t.items,className:"workout-details__list",render:m=>e(C,{item:m},m.id),dataTestId:"workout-items-list"})]}),d&&u($,{children:[e(te,{}),e(S,{items:n,className:"workout-details__list",render:m=>e(C,{item:m},m.id),dataTestId:"workout-uncompleted-items-list"}),i.length>0&&u("div",{className:"workout-details__completed-list-container",children:[e("h2",{className:"workout-details__completed-list-container__title",children:"Completed Items:"}),e("hr",{className:"workout-details__completed-list-container__hr"}),e(S,{items:i,className:"workout-details__list",render:m=>e(C,{item:m},m.id),dataTestId:"workout-completed-items-list"})]})]})]})]})};export{de as default};
